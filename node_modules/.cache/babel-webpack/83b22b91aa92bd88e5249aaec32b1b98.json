{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _createForOfIteratorHelper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _slicedToArray = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar mm = require(\"micromatch\");\n\nvar HarmonyExportImportedSpecifierDependency = require(\"../dependencies/HarmonyExportImportedSpecifierDependency\");\n\nvar HarmonyImportSideEffectDependency = require(\"../dependencies/HarmonyImportSideEffectDependency\");\n\nvar HarmonyImportSpecifierDependency = require(\"../dependencies/HarmonyImportSpecifierDependency\");\n/** @typedef {import(\"../Module\")} Module */\n\n/** @typedef {import(\"../Dependency\")} Dependency */\n\n/**\n * @typedef {Object} ExportInModule\n * @property {Module} module the module\n * @property {string} exportName the name of the export\n * @property {boolean} checked if the export is conditional\n */\n\n/**\n * @typedef {Object} ReexportInfo\n * @property {Map<string, ExportInModule[]>} static\n * @property {Map<Module, Set<string>>} dynamic\n */\n\n/**\n * @param {ReexportInfo} info info object\n * @param {string} exportName name of export\n * @returns {ExportInModule | undefined} static export\n */\n\n\nvar getMappingFromInfo = function getMappingFromInfo(info, exportName) {\n  var staticMappings = info.static.get(exportName);\n\n  if (staticMappings !== undefined) {\n    if (staticMappings.length === 1) return staticMappings[0];\n    return undefined;\n  }\n\n  var dynamicMappings = Array.from(info.dynamic).filter(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        _ = _ref2[0],\n        ignored = _ref2[1];\n\n    return !ignored.has(exportName);\n  });\n\n  if (dynamicMappings.length === 1) {\n    return {\n      module: dynamicMappings[0][0],\n      exportName: exportName,\n      checked: true\n    };\n  }\n\n  return undefined;\n};\n/**\n * @param {ReexportInfo} info info object\n * @param {string} exportName name of export of source module\n * @param {Module} module the target module\n * @param {string} innerExportName name of export of target module\n * @param {boolean} checked true, if existence of target module is checked\n */\n\n\nvar addStaticReexport = function addStaticReexport(info, exportName, module, innerExportName, checked) {\n  var mappings = info.static.get(exportName);\n\n  if (mappings !== undefined) {\n    var _iterator = _createForOfIteratorHelper(mappings),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var mapping = _step.value;\n\n        if (mapping.module === module && mapping.exportName === innerExportName) {\n          mapping.checked = mapping.checked && checked;\n          return;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else {\n    mappings = [];\n    info.static.set(exportName, mappings);\n  }\n\n  mappings.push({\n    module: module,\n    exportName: innerExportName,\n    checked: checked\n  });\n};\n/**\n * @param {ReexportInfo} info info object\n * @param {Module} module the reexport module\n * @param {Set<string>} ignored ignore list\n * @returns {void}\n */\n\n\nvar addDynamicReexport = function addDynamicReexport(info, module, ignored) {\n  var existingList = info.dynamic.get(module);\n\n  if (existingList !== undefined) {\n    var _iterator2 = _createForOfIteratorHelper(existingList),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var key = _step2.value;\n        if (!ignored.has(key)) existingList.delete(key);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  } else {\n    info.dynamic.set(module, new Set(ignored));\n  }\n};\n\nvar SideEffectsFlagPlugin = /*#__PURE__*/function () {\n  function SideEffectsFlagPlugin() {\n    _classCallCheck(this, SideEffectsFlagPlugin);\n  }\n\n  _createClass(SideEffectsFlagPlugin, [{\n    key: \"apply\",\n    value: function apply(compiler) {\n      compiler.hooks.normalModuleFactory.tap(\"SideEffectsFlagPlugin\", function (nmf) {\n        nmf.hooks.module.tap(\"SideEffectsFlagPlugin\", function (module, data) {\n          var resolveData = data.resourceResolveData;\n\n          if (resolveData && resolveData.descriptionFileData && resolveData.relativePath) {\n            var sideEffects = resolveData.descriptionFileData.sideEffects;\n            var hasSideEffects = SideEffectsFlagPlugin.moduleHasSideEffects(resolveData.relativePath, sideEffects);\n\n            if (!hasSideEffects) {\n              module.factoryMeta.sideEffectFree = true;\n            }\n          }\n\n          return module;\n        });\n        nmf.hooks.module.tap(\"SideEffectsFlagPlugin\", function (module, data) {\n          if (data.settings.sideEffects === false) {\n            module.factoryMeta.sideEffectFree = true;\n          } else if (data.settings.sideEffects === true) {\n            module.factoryMeta.sideEffectFree = false;\n          }\n        });\n      });\n      compiler.hooks.compilation.tap(\"SideEffectsFlagPlugin\", function (compilation) {\n        compilation.hooks.optimizeDependencies.tap(\"SideEffectsFlagPlugin\", function (modules) {\n          /** @type {Map<Module, ReexportInfo>} */\n          var reexportMaps = new Map(); // Capture reexports of sideEffectFree modules\n\n          var _iterator3 = _createForOfIteratorHelper(modules),\n              _step3;\n\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var _module = _step3.value;\n\n              /** @type {Dependency[]} */\n              var removeDependencies = [];\n\n              var _iterator7 = _createForOfIteratorHelper(_module.dependencies),\n                  _step7;\n\n              try {\n                for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                  var dep = _step7.value;\n\n                  if (dep instanceof HarmonyImportSideEffectDependency) {\n                    if (dep.module && dep.module.factoryMeta.sideEffectFree) {\n                      removeDependencies.push(dep);\n                    }\n                  } else if (dep instanceof HarmonyExportImportedSpecifierDependency) {\n                    if (_module.factoryMeta.sideEffectFree) {\n                      var mode = dep.getMode(true);\n\n                      if (mode.type === \"safe-reexport\" || mode.type === \"checked-reexport\" || mode.type === \"dynamic-reexport\" || mode.type === \"reexport-non-harmony-default\" || mode.type === \"reexport-non-harmony-default-strict\" || mode.type === \"reexport-named-default\") {\n                        var info = reexportMaps.get(_module);\n\n                        if (!info) {\n                          reexportMaps.set(_module, info = {\n                            static: new Map(),\n                            dynamic: new Map()\n                          });\n                        }\n\n                        var targetModule = dep._module;\n\n                        switch (mode.type) {\n                          case \"safe-reexport\":\n                            var _iterator8 = _createForOfIteratorHelper(mode.map),\n                                _step8;\n\n                            try {\n                              for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n                                var _step8$value = _slicedToArray(_step8.value, 2),\n                                    key = _step8$value[0],\n                                    id = _step8$value[1];\n\n                                if (id) {\n                                  addStaticReexport(info, key, targetModule, id, false);\n                                }\n                              }\n                            } catch (err) {\n                              _iterator8.e(err);\n                            } finally {\n                              _iterator8.f();\n                            }\n\n                            break;\n\n                          case \"checked-reexport\":\n                            var _iterator9 = _createForOfIteratorHelper(mode.map),\n                                _step9;\n\n                            try {\n                              for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n                                var _step9$value = _slicedToArray(_step9.value, 2),\n                                    _key = _step9$value[0],\n                                    _id = _step9$value[1];\n\n                                if (_id) {\n                                  addStaticReexport(info, _key, targetModule, _id, true);\n                                }\n                              }\n                            } catch (err) {\n                              _iterator9.e(err);\n                            } finally {\n                              _iterator9.f();\n                            }\n\n                            break;\n\n                          case \"dynamic-reexport\":\n                            addDynamicReexport(info, targetModule, mode.ignored);\n                            break;\n\n                          case \"reexport-non-harmony-default\":\n                          case \"reexport-non-harmony-default-strict\":\n                          case \"reexport-named-default\":\n                            addStaticReexport(info, mode.name, targetModule, \"default\", false);\n                            break;\n                        }\n                      }\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator7.e(err);\n              } finally {\n                _iterator7.f();\n              }\n            } // Flatten reexports\n\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n\n          var _iterator4 = _createForOfIteratorHelper(reexportMaps.values()),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var _info = _step4.value;\n              var dynamicReexports = _info.dynamic;\n              _info.dynamic = new Map();\n\n              var _iterator10 = _createForOfIteratorHelper(dynamicReexports),\n                  _step10;\n\n              try {\n                for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n                  var reexport = _step10.value;\n\n                  var _reexport = _slicedToArray(reexport, 2),\n                      _targetModule = _reexport[0],\n                      ignored = _reexport[1];\n\n                  for (;;) {\n                    var innerInfo = reexportMaps.get(_targetModule);\n                    if (!innerInfo) break;\n\n                    var _iterator11 = _createForOfIteratorHelper(innerInfo.static),\n                        _step11;\n\n                    try {\n                      for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n                        var _step11$value = _slicedToArray(_step11.value, 2),\n                            _key2 = _step11$value[0],\n                            reexports = _step11$value[1];\n\n                        if (ignored.has(_key2)) continue;\n\n                        var _iterator13 = _createForOfIteratorHelper(reexports),\n                            _step13;\n\n                        try {\n                          for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n                            var _step13$value = _step13.value,\n                                _module2 = _step13$value.module,\n                                exportName = _step13$value.exportName,\n                                checked = _step13$value.checked;\n                            addStaticReexport(_info, _key2, _module2, exportName, checked);\n                          }\n                        } catch (err) {\n                          _iterator13.e(err);\n                        } finally {\n                          _iterator13.f();\n                        }\n                      } // Follow dynamic reexport if there is only one\n\n                    } catch (err) {\n                      _iterator11.e(err);\n                    } finally {\n                      _iterator11.f();\n                    }\n\n                    if (innerInfo.dynamic.size !== 1) {\n                      // When there are more then one, we don't know which one\n                      break;\n                    }\n\n                    ignored = new Set(ignored);\n\n                    var _iterator12 = _createForOfIteratorHelper(innerInfo.dynamic),\n                        _step12;\n\n                    try {\n                      for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n                        var _step12$value = _slicedToArray(_step12.value, 2),\n                            innerModule = _step12$value[0],\n                            innerIgnored = _step12$value[1];\n\n                        var _iterator14 = _createForOfIteratorHelper(innerIgnored),\n                            _step14;\n\n                        try {\n                          for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n                            var _key3 = _step14.value;\n                            if (ignored.has(_key3)) continue; // This reexports ends here\n\n                            addStaticReexport(_info, _key3, _targetModule, _key3, true);\n                            ignored.add(_key3);\n                          }\n                        } catch (err) {\n                          _iterator14.e(err);\n                        } finally {\n                          _iterator14.f();\n                        }\n\n                        _targetModule = innerModule;\n                      }\n                    } catch (err) {\n                      _iterator12.e(err);\n                    } finally {\n                      _iterator12.f();\n                    }\n                  } // Update reexport as all other cases has been handled\n\n\n                  addDynamicReexport(_info, _targetModule, ignored);\n                }\n              } catch (err) {\n                _iterator10.e(err);\n              } finally {\n                _iterator10.f();\n              }\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n\n          var _iterator5 = _createForOfIteratorHelper(reexportMaps.values()),\n              _step5;\n\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var _info2 = _step5.value;\n              var staticReexports = _info2.static;\n              _info2.static = new Map();\n\n              var _iterator15 = _createForOfIteratorHelper(staticReexports),\n                  _step15;\n\n              try {\n                for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n                  var _step15$value = _slicedToArray(_step15.value, 2),\n                      _key4 = _step15$value[0],\n                      _reexports = _step15$value[1];\n\n                  var _iterator16 = _createForOfIteratorHelper(_reexports),\n                      _step16;\n\n                  try {\n                    for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n                      var mapping = _step16.value;\n\n                      for (;;) {\n                        var _innerInfo = reexportMaps.get(mapping.module);\n\n                        if (!_innerInfo) break;\n                        var newMapping = getMappingFromInfo(_innerInfo, mapping.exportName);\n                        if (!newMapping) break;\n                        mapping = newMapping;\n                      }\n\n                      addStaticReexport(_info2, _key4, mapping.module, mapping.exportName, mapping.checked);\n                    }\n                  } catch (err) {\n                    _iterator16.e(err);\n                  } finally {\n                    _iterator16.f();\n                  }\n                }\n              } catch (err) {\n                _iterator15.e(err);\n              } finally {\n                _iterator15.f();\n              }\n            } // Update imports along the reexports from sideEffectFree modules\n\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n\n          var _iterator6 = _createForOfIteratorHelper(reexportMaps),\n              _step6;\n\n          try {\n            for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n              var pair = _step6.value;\n              var _module3 = pair[0];\n              var _info3 = pair[1];\n              var newReasons = undefined;\n\n              for (var i = 0; i < _module3.reasons.length; i++) {\n                var reason = _module3.reasons[i];\n                var _dep = reason.dependency;\n\n                if ((_dep instanceof HarmonyExportImportedSpecifierDependency || _dep instanceof HarmonyImportSpecifierDependency && !_dep.namespaceObjectAsContext) && _dep._id) {\n                  var _mapping = getMappingFromInfo(_info3, _dep._id);\n\n                  if (_mapping) {\n                    _dep.redirectedModule = _mapping.module;\n                    _dep.redirectedId = _mapping.exportName;\n\n                    _mapping.module.addReason(reason.module, _dep, reason.explanation ? reason.explanation + \" (skipped side-effect-free modules)\" : \"(skipped side-effect-free modules)\"); // removing the currect reason, by not adding it to the newReasons array\n                    // lazily create the newReasons array\n\n\n                    if (newReasons === undefined) {\n                      newReasons = i === 0 ? [] : _module3.reasons.slice(0, i);\n                    }\n\n                    continue;\n                  }\n                }\n\n                if (newReasons !== undefined) newReasons.push(reason);\n              }\n\n              if (newReasons !== undefined) {\n                _module3.reasons = newReasons;\n              }\n            }\n          } catch (err) {\n            _iterator6.e(err);\n          } finally {\n            _iterator6.f();\n          }\n        });\n      });\n    }\n  }], [{\n    key: \"moduleHasSideEffects\",\n    value: function moduleHasSideEffects(moduleName, flagValue) {\n      switch (typeof flagValue) {\n        case \"undefined\":\n          return true;\n\n        case \"boolean\":\n          return flagValue;\n\n        case \"string\":\n          if (process.platform === \"win32\") {\n            flagValue = flagValue.replace(/\\\\/g, \"/\");\n          }\n\n          return mm.isMatch(moduleName, flagValue, {\n            matchBase: true\n          });\n\n        case \"object\":\n          return flagValue.some(function (glob) {\n            return SideEffectsFlagPlugin.moduleHasSideEffects(moduleName, glob);\n          });\n      }\n    }\n  }]);\n\n  return SideEffectsFlagPlugin;\n}();\n\nmodule.exports = SideEffectsFlagPlugin;","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/webpack/lib/optimize/SideEffectsFlagPlugin.js"],"names":["mm","require","HarmonyExportImportedSpecifierDependency","HarmonyImportSideEffectDependency","HarmonyImportSpecifierDependency","getMappingFromInfo","info","exportName","staticMappings","static","get","undefined","length","dynamicMappings","Array","from","dynamic","filter","_","ignored","has","module","checked","addStaticReexport","innerExportName","mappings","mapping","set","push","addDynamicReexport","existingList","key","delete","Set","SideEffectsFlagPlugin","compiler","hooks","normalModuleFactory","tap","nmf","data","resolveData","resourceResolveData","descriptionFileData","relativePath","sideEffects","hasSideEffects","moduleHasSideEffects","factoryMeta","sideEffectFree","settings","compilation","optimizeDependencies","modules","reexportMaps","Map","removeDependencies","dependencies","dep","mode","getMode","type","targetModule","_module","map","id","name","values","dynamicReexports","reexport","innerInfo","reexports","size","innerModule","innerIgnored","add","staticReexports","newMapping","pair","newReasons","i","reasons","reason","dependency","namespaceObjectAsContext","_id","redirectedModule","redirectedId","addReason","explanation","slice","moduleName","flagValue","process","platform","replace","isMatch","matchBase","some","glob","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst mm = require(\"micromatch\");\nconst HarmonyExportImportedSpecifierDependency = require(\"../dependencies/HarmonyExportImportedSpecifierDependency\");\nconst HarmonyImportSideEffectDependency = require(\"../dependencies/HarmonyImportSideEffectDependency\");\nconst HarmonyImportSpecifierDependency = require(\"../dependencies/HarmonyImportSpecifierDependency\");\n\n/** @typedef {import(\"../Module\")} Module */\n/** @typedef {import(\"../Dependency\")} Dependency */\n\n/**\n * @typedef {Object} ExportInModule\n * @property {Module} module the module\n * @property {string} exportName the name of the export\n * @property {boolean} checked if the export is conditional\n */\n\n/**\n * @typedef {Object} ReexportInfo\n * @property {Map<string, ExportInModule[]>} static\n * @property {Map<Module, Set<string>>} dynamic\n */\n\n/**\n * @param {ReexportInfo} info info object\n * @param {string} exportName name of export\n * @returns {ExportInModule | undefined} static export\n */\nconst getMappingFromInfo = (info, exportName) => {\n\tconst staticMappings = info.static.get(exportName);\n\tif (staticMappings !== undefined) {\n\t\tif (staticMappings.length === 1) return staticMappings[0];\n\t\treturn undefined;\n\t}\n\tconst dynamicMappings = Array.from(info.dynamic).filter(\n\t\t([_, ignored]) => !ignored.has(exportName)\n\t);\n\tif (dynamicMappings.length === 1) {\n\t\treturn {\n\t\t\tmodule: dynamicMappings[0][0],\n\t\t\texportName,\n\t\t\tchecked: true\n\t\t};\n\t}\n\treturn undefined;\n};\n\n/**\n * @param {ReexportInfo} info info object\n * @param {string} exportName name of export of source module\n * @param {Module} module the target module\n * @param {string} innerExportName name of export of target module\n * @param {boolean} checked true, if existence of target module is checked\n */\nconst addStaticReexport = (\n\tinfo,\n\texportName,\n\tmodule,\n\tinnerExportName,\n\tchecked\n) => {\n\tlet mappings = info.static.get(exportName);\n\tif (mappings !== undefined) {\n\t\tfor (const mapping of mappings) {\n\t\t\tif (mapping.module === module && mapping.exportName === innerExportName) {\n\t\t\t\tmapping.checked = mapping.checked && checked;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tmappings = [];\n\t\tinfo.static.set(exportName, mappings);\n\t}\n\tmappings.push({\n\t\tmodule,\n\t\texportName: innerExportName,\n\t\tchecked\n\t});\n};\n\n/**\n * @param {ReexportInfo} info info object\n * @param {Module} module the reexport module\n * @param {Set<string>} ignored ignore list\n * @returns {void}\n */\nconst addDynamicReexport = (info, module, ignored) => {\n\tconst existingList = info.dynamic.get(module);\n\tif (existingList !== undefined) {\n\t\tfor (const key of existingList) {\n\t\t\tif (!ignored.has(key)) existingList.delete(key);\n\t\t}\n\t} else {\n\t\tinfo.dynamic.set(module, new Set(ignored));\n\t}\n};\n\nclass SideEffectsFlagPlugin {\n\tapply(compiler) {\n\t\tcompiler.hooks.normalModuleFactory.tap(\"SideEffectsFlagPlugin\", nmf => {\n\t\t\tnmf.hooks.module.tap(\"SideEffectsFlagPlugin\", (module, data) => {\n\t\t\t\tconst resolveData = data.resourceResolveData;\n\t\t\t\tif (\n\t\t\t\t\tresolveData &&\n\t\t\t\t\tresolveData.descriptionFileData &&\n\t\t\t\t\tresolveData.relativePath\n\t\t\t\t) {\n\t\t\t\t\tconst sideEffects = resolveData.descriptionFileData.sideEffects;\n\t\t\t\t\tconst hasSideEffects = SideEffectsFlagPlugin.moduleHasSideEffects(\n\t\t\t\t\t\tresolveData.relativePath,\n\t\t\t\t\t\tsideEffects\n\t\t\t\t\t);\n\t\t\t\t\tif (!hasSideEffects) {\n\t\t\t\t\t\tmodule.factoryMeta.sideEffectFree = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn module;\n\t\t\t});\n\t\t\tnmf.hooks.module.tap(\"SideEffectsFlagPlugin\", (module, data) => {\n\t\t\t\tif (data.settings.sideEffects === false) {\n\t\t\t\t\tmodule.factoryMeta.sideEffectFree = true;\n\t\t\t\t} else if (data.settings.sideEffects === true) {\n\t\t\t\t\tmodule.factoryMeta.sideEffectFree = false;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tcompiler.hooks.compilation.tap(\"SideEffectsFlagPlugin\", compilation => {\n\t\t\tcompilation.hooks.optimizeDependencies.tap(\n\t\t\t\t\"SideEffectsFlagPlugin\",\n\t\t\t\tmodules => {\n\t\t\t\t\t/** @type {Map<Module, ReexportInfo>} */\n\t\t\t\t\tconst reexportMaps = new Map();\n\n\t\t\t\t\t// Capture reexports of sideEffectFree modules\n\t\t\t\t\tfor (const module of modules) {\n\t\t\t\t\t\t/** @type {Dependency[]} */\n\t\t\t\t\t\tconst removeDependencies = [];\n\t\t\t\t\t\tfor (const dep of module.dependencies) {\n\t\t\t\t\t\t\tif (dep instanceof HarmonyImportSideEffectDependency) {\n\t\t\t\t\t\t\t\tif (dep.module && dep.module.factoryMeta.sideEffectFree) {\n\t\t\t\t\t\t\t\t\tremoveDependencies.push(dep);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tdep instanceof HarmonyExportImportedSpecifierDependency\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tif (module.factoryMeta.sideEffectFree) {\n\t\t\t\t\t\t\t\t\tconst mode = dep.getMode(true);\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tmode.type === \"safe-reexport\" ||\n\t\t\t\t\t\t\t\t\t\tmode.type === \"checked-reexport\" ||\n\t\t\t\t\t\t\t\t\t\tmode.type === \"dynamic-reexport\" ||\n\t\t\t\t\t\t\t\t\t\tmode.type === \"reexport-non-harmony-default\" ||\n\t\t\t\t\t\t\t\t\t\tmode.type === \"reexport-non-harmony-default-strict\" ||\n\t\t\t\t\t\t\t\t\t\tmode.type === \"reexport-named-default\"\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tlet info = reexportMaps.get(module);\n\t\t\t\t\t\t\t\t\t\tif (!info) {\n\t\t\t\t\t\t\t\t\t\t\treexportMaps.set(\n\t\t\t\t\t\t\t\t\t\t\t\tmodule,\n\t\t\t\t\t\t\t\t\t\t\t\t(info = {\n\t\t\t\t\t\t\t\t\t\t\t\t\tstatic: new Map(),\n\t\t\t\t\t\t\t\t\t\t\t\t\tdynamic: new Map()\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tconst targetModule = dep._module;\n\t\t\t\t\t\t\t\t\t\tswitch (mode.type) {\n\t\t\t\t\t\t\t\t\t\t\tcase \"safe-reexport\":\n\t\t\t\t\t\t\t\t\t\t\t\tfor (const [key, id] of mode.map) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (id) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taddStaticReexport(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfo,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttargetModule,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase \"checked-reexport\":\n\t\t\t\t\t\t\t\t\t\t\t\tfor (const [key, id] of mode.map) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (id) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taddStaticReexport(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinfo,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttargetModule,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttrue\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase \"dynamic-reexport\":\n\t\t\t\t\t\t\t\t\t\t\t\taddDynamicReexport(info, targetModule, mode.ignored);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase \"reexport-non-harmony-default\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"reexport-non-harmony-default-strict\":\n\t\t\t\t\t\t\t\t\t\t\tcase \"reexport-named-default\":\n\t\t\t\t\t\t\t\t\t\t\t\taddStaticReexport(\n\t\t\t\t\t\t\t\t\t\t\t\t\tinfo,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmode.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttargetModule,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"default\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Flatten reexports\n\t\t\t\t\tfor (const info of reexportMaps.values()) {\n\t\t\t\t\t\tconst dynamicReexports = info.dynamic;\n\t\t\t\t\t\tinfo.dynamic = new Map();\n\t\t\t\t\t\tfor (const reexport of dynamicReexports) {\n\t\t\t\t\t\t\tlet [targetModule, ignored] = reexport;\n\t\t\t\t\t\t\tfor (;;) {\n\t\t\t\t\t\t\t\tconst innerInfo = reexportMaps.get(targetModule);\n\t\t\t\t\t\t\t\tif (!innerInfo) break;\n\n\t\t\t\t\t\t\t\tfor (const [key, reexports] of innerInfo.static) {\n\t\t\t\t\t\t\t\t\tif (ignored.has(key)) continue;\n\t\t\t\t\t\t\t\t\tfor (const { module, exportName, checked } of reexports) {\n\t\t\t\t\t\t\t\t\t\taddStaticReexport(info, key, module, exportName, checked);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Follow dynamic reexport if there is only one\n\t\t\t\t\t\t\t\tif (innerInfo.dynamic.size !== 1) {\n\t\t\t\t\t\t\t\t\t// When there are more then one, we don't know which one\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tignored = new Set(ignored);\n\t\t\t\t\t\t\t\tfor (const [innerModule, innerIgnored] of innerInfo.dynamic) {\n\t\t\t\t\t\t\t\t\tfor (const key of innerIgnored) {\n\t\t\t\t\t\t\t\t\t\tif (ignored.has(key)) continue;\n\t\t\t\t\t\t\t\t\t\t// This reexports ends here\n\t\t\t\t\t\t\t\t\t\taddStaticReexport(info, key, targetModule, key, true);\n\t\t\t\t\t\t\t\t\t\tignored.add(key);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttargetModule = innerModule;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Update reexport as all other cases has been handled\n\t\t\t\t\t\t\taddDynamicReexport(info, targetModule, ignored);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const info of reexportMaps.values()) {\n\t\t\t\t\t\tconst staticReexports = info.static;\n\t\t\t\t\t\tinfo.static = new Map();\n\t\t\t\t\t\tfor (const [key, reexports] of staticReexports) {\n\t\t\t\t\t\t\tfor (let mapping of reexports) {\n\t\t\t\t\t\t\t\tfor (;;) {\n\t\t\t\t\t\t\t\t\tconst innerInfo = reexportMaps.get(mapping.module);\n\t\t\t\t\t\t\t\t\tif (!innerInfo) break;\n\n\t\t\t\t\t\t\t\t\tconst newMapping = getMappingFromInfo(\n\t\t\t\t\t\t\t\t\t\tinnerInfo,\n\t\t\t\t\t\t\t\t\t\tmapping.exportName\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (!newMapping) break;\n\t\t\t\t\t\t\t\t\tmapping = newMapping;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taddStaticReexport(\n\t\t\t\t\t\t\t\t\tinfo,\n\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\tmapping.module,\n\t\t\t\t\t\t\t\t\tmapping.exportName,\n\t\t\t\t\t\t\t\t\tmapping.checked\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Update imports along the reexports from sideEffectFree modules\n\t\t\t\t\tfor (const pair of reexportMaps) {\n\t\t\t\t\t\tconst module = pair[0];\n\t\t\t\t\t\tconst info = pair[1];\n\t\t\t\t\t\tlet newReasons = undefined;\n\t\t\t\t\t\tfor (let i = 0; i < module.reasons.length; i++) {\n\t\t\t\t\t\t\tconst reason = module.reasons[i];\n\t\t\t\t\t\t\tconst dep = reason.dependency;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t(dep instanceof HarmonyExportImportedSpecifierDependency ||\n\t\t\t\t\t\t\t\t\t(dep instanceof HarmonyImportSpecifierDependency &&\n\t\t\t\t\t\t\t\t\t\t!dep.namespaceObjectAsContext)) &&\n\t\t\t\t\t\t\t\tdep._id\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tconst mapping = getMappingFromInfo(info, dep._id);\n\t\t\t\t\t\t\t\tif (mapping) {\n\t\t\t\t\t\t\t\t\tdep.redirectedModule = mapping.module;\n\t\t\t\t\t\t\t\t\tdep.redirectedId = mapping.exportName;\n\t\t\t\t\t\t\t\t\tmapping.module.addReason(\n\t\t\t\t\t\t\t\t\t\treason.module,\n\t\t\t\t\t\t\t\t\t\tdep,\n\t\t\t\t\t\t\t\t\t\treason.explanation\n\t\t\t\t\t\t\t\t\t\t\t? reason.explanation +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\" (skipped side-effect-free modules)\"\n\t\t\t\t\t\t\t\t\t\t\t: \"(skipped side-effect-free modules)\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t// removing the currect reason, by not adding it to the newReasons array\n\t\t\t\t\t\t\t\t\t// lazily create the newReasons array\n\t\t\t\t\t\t\t\t\tif (newReasons === undefined) {\n\t\t\t\t\t\t\t\t\t\tnewReasons = i === 0 ? [] : module.reasons.slice(0, i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (newReasons !== undefined) newReasons.push(reason);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (newReasons !== undefined) {\n\t\t\t\t\t\t\tmodule.reasons = newReasons;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tstatic moduleHasSideEffects(moduleName, flagValue) {\n\t\tswitch (typeof flagValue) {\n\t\t\tcase \"undefined\":\n\t\t\t\treturn true;\n\t\t\tcase \"boolean\":\n\t\t\t\treturn flagValue;\n\t\t\tcase \"string\":\n\t\t\t\tif (process.platform === \"win32\") {\n\t\t\t\t\tflagValue = flagValue.replace(/\\\\/g, \"/\");\n\t\t\t\t}\n\t\t\t\treturn mm.isMatch(moduleName, flagValue, {\n\t\t\t\t\tmatchBase: true\n\t\t\t\t});\n\t\t\tcase \"object\":\n\t\t\t\treturn flagValue.some(glob =>\n\t\t\t\t\tSideEffectsFlagPlugin.moduleHasSideEffects(moduleName, glob)\n\t\t\t\t);\n\t\t}\n\t}\n}\nmodule.exports = SideEffectsFlagPlugin;\n"]},"metadata":{},"sourceType":"script"}