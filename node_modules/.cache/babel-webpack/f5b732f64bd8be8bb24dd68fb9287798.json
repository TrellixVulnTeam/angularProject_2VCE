{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/regenerator\");\n\nvar _toConsumableArray = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _createForOfIteratorHelper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _slicedToArray = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _asyncToGenerator = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = stylusLoader;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _stylus = _interopRequireDefault(require(\"stylus\"));\n\nvar _loaderUtils = require(\"loader-utils\");\n\nvar _schemaUtils = require(\"schema-utils\");\n\nvar _options = _interopRequireDefault(require(\"./options.json\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction stylusLoader(_x) {\n  return _stylusLoader.apply(this, arguments);\n}\n\nfunction _stylusLoader() {\n  _stylusLoader = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(source) {\n    var _this = this;\n\n    var options, callback, data, stylusOptions, styl, useSourceMap, length, _stylusOptions$use$sp, _stylusOptions$use$sp2, item, resolved, _iterator, _step, imported, _iterator2, _step2, included, shouldUseWebpackImporter, definitions, _iterator3, _step3, defined;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            options = (0, _loaderUtils.getOptions)(this);\n            (0, _schemaUtils.validate)(_options.default, options, {\n              name: \"Stylus Loader\",\n              baseDataPath: \"options\"\n            });\n            callback = this.async();\n            data = source;\n\n            if (!(typeof options.additionalData !== \"undefined\")) {\n              _context3.next = 13;\n              break;\n            }\n\n            if (!(typeof options.additionalData === \"function\")) {\n              _context3.next = 11;\n              break;\n            }\n\n            _context3.next = 8;\n            return options.additionalData(data, this);\n\n          case 8:\n            _context3.t0 = _context3.sent;\n            _context3.next = 12;\n            break;\n\n          case 11:\n            _context3.t0 = \"\".concat(options.additionalData, \"\\n\").concat(data);\n\n          case 12:\n            data = _context3.t0;\n\n          case 13:\n            stylusOptions = (0, _utils.getStylusOptions)(this, options);\n            styl = (0, _stylus.default)(data, stylusOptions); // include regular CSS on @import\n\n            if (stylusOptions.includeCSS) {\n              styl.set(\"include css\", true);\n            }\n\n            if (stylusOptions.hoistAtrules) {\n              styl.set(\"hoist atrules\", true);\n            }\n\n            if (stylusOptions.lineNumbers) {\n              styl.set(\"linenos\", true);\n            }\n\n            if (stylusOptions.disableCache) {\n              styl.set(\"cache\", false);\n            }\n\n            useSourceMap = typeof options.sourceMap === \"boolean\" ? options.sourceMap : this.sourceMap;\n\n            if (stylusOptions.sourcemap || useSourceMap) {\n              styl.set(\"sourcemap\", useSourceMap ? {\n                comment: false,\n                sourceRoot: stylusOptions.dest,\n                basePath: this.rootContext\n              } : stylusOptions.sourcemap);\n            }\n\n            if (!(typeof stylusOptions.use !== \"undefined\" && stylusOptions.use.length > 0)) {\n              _context3.next = 38;\n              break;\n            }\n\n            length = stylusOptions.use.length; // eslint-disable-next-line no-plusplus\n\n          case 23:\n            if (!length--) {\n              _context3.next = 38;\n              break;\n            }\n\n            _stylusOptions$use$sp = stylusOptions.use.splice(length, 1), _stylusOptions$use$sp2 = _slicedToArray(_stylusOptions$use$sp, 1), item = _stylusOptions$use$sp2[0];\n\n            if (!(typeof item === \"string\")) {\n              _context3.next = 35;\n              break;\n            }\n\n            _context3.prev = 26;\n            resolved = require.resolve(item); // eslint-disable-next-line import/no-dynamic-require, global-require\n\n            item = require(resolved)(stylusOptions);\n            _context3.next = 35;\n            break;\n\n          case 31:\n            _context3.prev = 31;\n            _context3.t1 = _context3[\"catch\"](26);\n            callback(\"Failed to load \\\"\".concat(item, \"\\\" Stylus plugin. Are you sure it's installed?\\n\").concat(_context3.t1));\n            return _context3.abrupt(\"return\");\n\n          case 35:\n            styl.use(item);\n            _context3.next = 23;\n            break;\n\n          case 38:\n            if (typeof stylusOptions.import !== \"undefined\") {\n              _iterator = _createForOfIteratorHelper(stylusOptions.import);\n\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  imported = _step.value;\n                  styl.import(imported);\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n            }\n\n            if (typeof stylusOptions.include !== \"undefined\") {\n              _iterator2 = _createForOfIteratorHelper(stylusOptions.include);\n\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  included = _step2.value;\n                  styl.include(included);\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n            }\n\n            if (stylusOptions.resolveURL !== false) {\n              styl.define(\"url\", (0, _utils.urlResolver)(stylusOptions.resolveURL));\n            }\n\n            shouldUseWebpackImporter = typeof options.webpackImporter === \"boolean\" ? options.webpackImporter : true;\n\n            if (!shouldUseWebpackImporter) {\n              _context3.next = 48;\n              break;\n            }\n\n            _context3.t2 = styl;\n            _context3.next = 46;\n            return (0, _utils.createEvaluator)(this, source, stylusOptions);\n\n          case 46:\n            _context3.t3 = _context3.sent;\n\n            _context3.t2.set.call(_context3.t2, \"Evaluator\", _context3.t3);\n\n          case 48:\n            if (typeof stylusOptions.define !== \"undefined\") {\n              definitions = Array.isArray(stylusOptions.define) ? stylusOptions.define : Object.entries(stylusOptions.define);\n              _iterator3 = _createForOfIteratorHelper(definitions);\n\n              try {\n                for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                  defined = _step3.value;\n                  styl.define.apply(styl, _toConsumableArray(defined));\n                }\n              } catch (err) {\n                _iterator3.e(err);\n              } finally {\n                _iterator3.f();\n              }\n            }\n\n            styl.render( /*#__PURE__*/function () {\n              var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(error, css) {\n                var _iterator4, _step4, importData, map;\n\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        if (!error) {\n                          _context2.next = 4;\n                          break;\n                        }\n\n                        if (error.filename) {\n                          _this.addDependency(_path.default.normalize(error.filename));\n                        }\n\n                        callback(error);\n                        return _context2.abrupt(\"return\");\n\n                      case 4:\n                        // eslint-disable-next-line no-underscore-dangle\n                        if (stylusOptions._imports.length > 0) {\n                          // eslint-disable-next-line no-underscore-dangle\n                          _iterator4 = _createForOfIteratorHelper(stylusOptions._imports);\n\n                          try {\n                            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                              importData = _step4.value;\n\n                              _this.addDependency(_path.default.normalize(importData.path));\n                            }\n                          } catch (err) {\n                            _iterator4.e(err);\n                          } finally {\n                            _iterator4.f();\n                          }\n                        }\n\n                        map = styl.sourcemap;\n\n                        if (!(map && useSourceMap)) {\n                          _context2.next = 18;\n                          break;\n                        }\n\n                        map = (0, _utils.normalizeSourceMap)(map, stylusOptions.dest);\n                        _context2.prev = 8;\n                        _context2.next = 11;\n                        return Promise.all(map.sources.map( /*#__PURE__*/function () {\n                          var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(file) {\n                            return _regeneratorRuntime.wrap(function _callee$(_context) {\n                              while (1) {\n                                switch (_context.prev = _context.next) {\n                                  case 0:\n                                    _context.next = 2;\n                                    return (0, _utils.readFile)(_this.fs, file);\n\n                                  case 2:\n                                    return _context.abrupt(\"return\", _context.sent.toString());\n\n                                  case 3:\n                                  case \"end\":\n                                    return _context.stop();\n                                }\n                              }\n                            }, _callee);\n                          }));\n\n                          return function (_x4) {\n                            return _ref2.apply(this, arguments);\n                          };\n                        }()));\n\n                      case 11:\n                        map.sourcesContent = _context2.sent;\n                        _context2.next = 18;\n                        break;\n\n                      case 14:\n                        _context2.prev = 14;\n                        _context2.t0 = _context2[\"catch\"](8);\n                        callback(_context2.t0);\n                        return _context2.abrupt(\"return\");\n\n                      case 18:\n                        callback(null, css, map);\n\n                      case 19:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2, null, [[8, 14]]);\n              }));\n\n              return function (_x2, _x3) {\n                return _ref.apply(this, arguments);\n              };\n            }());\n\n          case 50:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this, [[26, 31]]);\n  }));\n  return _stylusLoader.apply(this, arguments);\n}","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/stylus-loader/dist/index.js"],"names":["Object","defineProperty","exports","value","default","stylusLoader","_path","_interopRequireDefault","require","_stylus","_loaderUtils","_schemaUtils","_options","_utils","obj","__esModule","source","options","getOptions","validate","name","baseDataPath","callback","async","data","additionalData","stylusOptions","getStylusOptions","styl","includeCSS","set","hoistAtrules","lineNumbers","disableCache","useSourceMap","sourceMap","sourcemap","comment","sourceRoot","dest","basePath","rootContext","use","length","splice","item","resolved","resolve","import","imported","include","included","resolveURL","define","urlResolver","shouldUseWebpackImporter","webpackImporter","createEvaluator","definitions","Array","isArray","entries","defined","render","error","css","filename","addDependency","normalize","_imports","importData","path","map","normalizeSourceMap","Promise","all","sources","file","readFile","fs","toString","sourcesContent"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = stylusLoader;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _stylus = _interopRequireDefault(require(\"stylus\"));\n\nvar _loaderUtils = require(\"loader-utils\");\n\nvar _schemaUtils = require(\"schema-utils\");\n\nvar _options = _interopRequireDefault(require(\"./options.json\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nasync function stylusLoader(source) {\n  const options = (0, _loaderUtils.getOptions)(this);\n  (0, _schemaUtils.validate)(_options.default, options, {\n    name: \"Stylus Loader\",\n    baseDataPath: \"options\"\n  });\n  const callback = this.async();\n  let data = source;\n\n  if (typeof options.additionalData !== \"undefined\") {\n    data = typeof options.additionalData === \"function\" ? await options.additionalData(data, this) : `${options.additionalData}\\n${data}`;\n  }\n\n  const stylusOptions = (0, _utils.getStylusOptions)(this, options);\n  const styl = (0, _stylus.default)(data, stylusOptions); // include regular CSS on @import\n\n  if (stylusOptions.includeCSS) {\n    styl.set(\"include css\", true);\n  }\n\n  if (stylusOptions.hoistAtrules) {\n    styl.set(\"hoist atrules\", true);\n  }\n\n  if (stylusOptions.lineNumbers) {\n    styl.set(\"linenos\", true);\n  }\n\n  if (stylusOptions.disableCache) {\n    styl.set(\"cache\", false);\n  }\n\n  const useSourceMap = typeof options.sourceMap === \"boolean\" ? options.sourceMap : this.sourceMap;\n\n  if (stylusOptions.sourcemap || useSourceMap) {\n    styl.set(\"sourcemap\", useSourceMap ? {\n      comment: false,\n      sourceRoot: stylusOptions.dest,\n      basePath: this.rootContext\n    } : stylusOptions.sourcemap);\n  }\n\n  if (typeof stylusOptions.use !== \"undefined\" && stylusOptions.use.length > 0) {\n    let {\n      length\n    } = stylusOptions.use; // eslint-disable-next-line no-plusplus\n\n    while (length--) {\n      let [item] = stylusOptions.use.splice(length, 1);\n\n      if (typeof item === \"string\") {\n        try {\n          const resolved = require.resolve(item); // eslint-disable-next-line import/no-dynamic-require, global-require\n\n\n          item = require(resolved)(stylusOptions);\n        } catch (error) {\n          callback(`Failed to load \"${item}\" Stylus plugin. Are you sure it's installed?\\n${error}`);\n          return;\n        }\n      }\n\n      styl.use(item);\n    }\n  }\n\n  if (typeof stylusOptions.import !== \"undefined\") {\n    for (const imported of stylusOptions.import) {\n      styl.import(imported);\n    }\n  }\n\n  if (typeof stylusOptions.include !== \"undefined\") {\n    for (const included of stylusOptions.include) {\n      styl.include(included);\n    }\n  }\n\n  if (stylusOptions.resolveURL !== false) {\n    styl.define(\"url\", (0, _utils.urlResolver)(stylusOptions.resolveURL));\n  }\n\n  const shouldUseWebpackImporter = typeof options.webpackImporter === \"boolean\" ? options.webpackImporter : true;\n\n  if (shouldUseWebpackImporter) {\n    styl.set(\"Evaluator\", await (0, _utils.createEvaluator)(this, source, stylusOptions));\n  }\n\n  if (typeof stylusOptions.define !== \"undefined\") {\n    const definitions = Array.isArray(stylusOptions.define) ? stylusOptions.define : Object.entries(stylusOptions.define);\n\n    for (const defined of definitions) {\n      styl.define(...defined);\n    }\n  }\n\n  styl.render(async (error, css) => {\n    if (error) {\n      if (error.filename) {\n        this.addDependency(_path.default.normalize(error.filename));\n      }\n\n      callback(error);\n      return;\n    } // eslint-disable-next-line no-underscore-dangle\n\n\n    if (stylusOptions._imports.length > 0) {\n      // eslint-disable-next-line no-underscore-dangle\n      for (const importData of stylusOptions._imports) {\n        this.addDependency(_path.default.normalize(importData.path));\n      }\n    }\n\n    let map = styl.sourcemap;\n\n    if (map && useSourceMap) {\n      map = (0, _utils.normalizeSourceMap)(map, stylusOptions.dest);\n\n      try {\n        map.sourcesContent = await Promise.all(map.sources.map(async (file) => (await (0, _utils.readFile)(this.fs, file)).toString()));\n      } catch (fsError) {\n        callback(fsError);\n        return;\n      }\n    }\n\n    callback(null, css, map);\n  });\n}"]},"metadata":{},"sourceType":"script"}