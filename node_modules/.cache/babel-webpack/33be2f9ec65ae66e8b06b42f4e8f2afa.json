{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar _toConsumableArray = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _createForOfIteratorHelper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AnyComponentStyleBudgetChecker = void 0;\n\nvar path = require(\"path\");\n\nvar schema_1 = require(\"../../browser/schema\");\n\nvar bundle_calculator_1 = require(\"../../utils/bundle-calculator\");\n\nvar webpack_diagnostics_1 = require(\"../../utils/webpack-diagnostics\");\n\nvar webpack_version_1 = require(\"../../utils/webpack-version\");\n\nvar PLUGIN_NAME = 'AnyComponentStyleBudgetChecker';\n/**\n * Check budget sizes for component styles by emitting a warning or error if a\n * budget is exceeded by a particular component's styles.\n */\n\nvar AnyComponentStyleBudgetChecker = /*#__PURE__*/function () {\n  function AnyComponentStyleBudgetChecker(budgets) {\n    _classCallCheck(this, AnyComponentStyleBudgetChecker);\n\n    this.budgets = budgets.filter(function (budget) {\n      return budget.type === schema_1.Type.AnyComponentStyle;\n    });\n  }\n\n  _createClass(AnyComponentStyleBudgetChecker, [{\n    key: \"apply\",\n    value: function apply(compiler) {\n      var _this = this;\n\n      compiler.hooks.compilation.tap(PLUGIN_NAME, function (compilation) {\n        var afterOptimizeChunkAssets = function afterOptimizeChunkAssets() {\n          // In AOT compilations component styles get processed in child compilations.\n          // tslint:disable-next-line: no-any\n          var parentCompilation = compilation.compiler.parentCompilation;\n\n          if (!parentCompilation) {\n            return;\n          }\n\n          var cssExtensions = ['.css', '.scss', '.less', '.styl', '.sass'];\n          var componentStyles = Object.keys(compilation.assets).filter(function (name) {\n            return cssExtensions.includes(path.extname(name));\n          }).map(function (name) {\n            return {\n              size: compilation.assets[name].size(),\n              label: name\n            };\n          });\n          var thresholds = flatMap(_this.budgets, function (budget) {\n            return bundle_calculator_1.calculateThresholds(budget);\n          });\n\n          var _iterator = _createForOfIteratorHelper(componentStyles),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var _step$value = _step.value,\n                  size = _step$value.size,\n                  label = _step$value.label;\n\n              var _iterator2 = _createForOfIteratorHelper(bundle_calculator_1.checkThresholds(thresholds[Symbol.iterator](), size, label)),\n                  _step2;\n\n              try {\n                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                  var _step2$value = _step2.value,\n                      severity = _step2$value.severity,\n                      message = _step2$value.message;\n\n                  switch (severity) {\n                    case bundle_calculator_1.ThresholdSeverity.Warning:\n                      webpack_diagnostics_1.addWarning(compilation, message);\n                      break;\n\n                    case bundle_calculator_1.ThresholdSeverity.Error:\n                      webpack_diagnostics_1.addError(compilation, message);\n                      break;\n\n                    default:\n                      assertNever(severity);\n                      break;\n                  }\n                }\n              } catch (err) {\n                _iterator2.e(err);\n              } finally {\n                _iterator2.f();\n              }\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        };\n\n        if (webpack_version_1.isWebpackFiveOrHigher()) {\n          // webpack 5 migration \"guide\"\n          // https://github.com/webpack/webpack/blob/07fc554bef5930f8577f91c91a8b81791fc29746/lib/Compilation.js#L535-L539\n          // TODO_WEBPACK_5 const stage = Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE + 1;\n          var stage = 101; // tslint:disable-next-line: no-any\n\n          compilation.hooks.processAssets.tap({\n            name: PLUGIN_NAME,\n            stage: stage\n          }, afterOptimizeChunkAssets);\n        } else {\n          compilation.hooks.afterOptimizeChunkAssets.tap(PLUGIN_NAME, afterOptimizeChunkAssets);\n        }\n      });\n    }\n  }]);\n\n  return AnyComponentStyleBudgetChecker;\n}();\n\nexports.AnyComponentStyleBudgetChecker = AnyComponentStyleBudgetChecker;\n\nfunction assertNever(input) {\n  throw new Error(\"Unexpected call to assertNever() with input: \".concat(JSON.stringify(input, null\n  /* replacer */\n  , 4\n  /* tabSize */\n  )));\n}\n\nfunction flatMap(list, mapper) {\n  var _ref;\n\n  return (_ref = []).concat.apply(_ref, _toConsumableArray(list.map(mapper).map(function (iterator) {\n    return Array.from(iterator);\n  })));\n}","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@angular-devkit/build-angular/src/webpack/plugins/any-component-style-budget-checker.js"],"names":["Object","defineProperty","exports","value","AnyComponentStyleBudgetChecker","path","require","schema_1","bundle_calculator_1","webpack_diagnostics_1","webpack_version_1","PLUGIN_NAME","budgets","filter","budget","type","Type","AnyComponentStyle","compiler","hooks","compilation","tap","afterOptimizeChunkAssets","parentCompilation","cssExtensions","componentStyles","keys","assets","name","includes","extname","map","size","label","thresholds","flatMap","calculateThresholds","checkThresholds","Symbol","iterator","severity","message","ThresholdSeverity","Warning","addWarning","Error","addError","assertNever","isWebpackFiveOrHigher","stage","processAssets","input","JSON","stringify","list","mapper","concat","Array","from"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AnyComponentStyleBudgetChecker = void 0;\nconst path = require(\"path\");\nconst schema_1 = require(\"../../browser/schema\");\nconst bundle_calculator_1 = require(\"../../utils/bundle-calculator\");\nconst webpack_diagnostics_1 = require(\"../../utils/webpack-diagnostics\");\nconst webpack_version_1 = require(\"../../utils/webpack-version\");\nconst PLUGIN_NAME = 'AnyComponentStyleBudgetChecker';\n/**\n * Check budget sizes for component styles by emitting a warning or error if a\n * budget is exceeded by a particular component's styles.\n */\nclass AnyComponentStyleBudgetChecker {\n    constructor(budgets) {\n        this.budgets = budgets.filter((budget) => budget.type === schema_1.Type.AnyComponentStyle);\n    }\n    apply(compiler) {\n        compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation) => {\n            const afterOptimizeChunkAssets = () => {\n                // In AOT compilations component styles get processed in child compilations.\n                // tslint:disable-next-line: no-any\n                const parentCompilation = compilation.compiler.parentCompilation;\n                if (!parentCompilation) {\n                    return;\n                }\n                const cssExtensions = [\n                    '.css',\n                    '.scss',\n                    '.less',\n                    '.styl',\n                    '.sass',\n                ];\n                const componentStyles = Object.keys(compilation.assets)\n                    .filter((name) => cssExtensions.includes(path.extname(name)))\n                    .map((name) => ({\n                    size: compilation.assets[name].size(),\n                    label: name,\n                }));\n                const thresholds = flatMap(this.budgets, (budget) => bundle_calculator_1.calculateThresholds(budget));\n                for (const { size, label } of componentStyles) {\n                    for (const { severity, message } of bundle_calculator_1.checkThresholds(thresholds[Symbol.iterator](), size, label)) {\n                        switch (severity) {\n                            case bundle_calculator_1.ThresholdSeverity.Warning:\n                                webpack_diagnostics_1.addWarning(compilation, message);\n                                break;\n                            case bundle_calculator_1.ThresholdSeverity.Error:\n                                webpack_diagnostics_1.addError(compilation, message);\n                                break;\n                            default:\n                                assertNever(severity);\n                                break;\n                        }\n                    }\n                }\n            };\n            if (webpack_version_1.isWebpackFiveOrHigher()) {\n                // webpack 5 migration \"guide\"\n                // https://github.com/webpack/webpack/blob/07fc554bef5930f8577f91c91a8b81791fc29746/lib/Compilation.js#L535-L539\n                // TODO_WEBPACK_5 const stage = Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE + 1;\n                const stage = 101;\n                // tslint:disable-next-line: no-any\n                compilation.hooks.processAssets.tap({ name: PLUGIN_NAME, stage }, afterOptimizeChunkAssets);\n            }\n            else {\n                compilation.hooks.afterOptimizeChunkAssets.tap(PLUGIN_NAME, afterOptimizeChunkAssets);\n            }\n        });\n    }\n}\nexports.AnyComponentStyleBudgetChecker = AnyComponentStyleBudgetChecker;\nfunction assertNever(input) {\n    throw new Error(`Unexpected call to assertNever() with input: ${JSON.stringify(input, null /* replacer */, 4 /* tabSize */)}`);\n}\nfunction flatMap(list, mapper) {\n    return [].concat(...list.map(mapper).map((iterator) => Array.from(iterator)));\n}\n"]},"metadata":{},"sourceType":"script"}