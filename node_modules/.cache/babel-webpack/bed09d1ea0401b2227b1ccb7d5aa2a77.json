{"ast":null,"code":"'use strict';\n\nvar fs = require('graceful-fs');\n\nvar path = require('path');\n\nvar _ = require('lodash');\n\nvar useragent = require('ua-parser-js');\n\nvar mm = require('minimatch');\n\nexports.browserFullNameToShort = function (fullName) {\n  var ua = useragent(fullName);\n\n  if (!ua.browser.name && !ua.browser.version && !ua.os.name && !ua.os.version) {\n    return fullName;\n  }\n\n  return \"\".concat(ua.browser.name, \" \").concat(ua.browser.version || '0.0.0', \" (\").concat(ua.os.name, \" \").concat(ua.os.version || '0.0.0', \")\");\n};\n\nexports.isDefined = function (value) {\n  return !_.isUndefined(value);\n};\n\nvar parser = function parser(pattern, out) {\n  if (pattern.length === 0) return out;\n  var p = /^(\\[[^\\]]*\\]|[*+@?]\\((.+?)\\))/g;\n  var matches = p.exec(pattern);\n\n  if (!matches) {\n    var c = pattern[0];\n    var t = 'word';\n\n    if (c === '*') {\n      t = 'star';\n    } else if (c === '?') {\n      t = 'optional';\n    }\n\n    out[t]++;\n    return parser(pattern.substring(1), out);\n  }\n\n  if (matches[2] !== undefined) {\n    out.ext_glob++;\n    parser(matches[2], out);\n    return parser(pattern.substring(matches[0].length), out);\n  }\n\n  out.range++;\n  return parser(pattern.substring(matches[0].length), out);\n};\n\nvar gsParser = function gsParser(pattern, out) {\n  if (pattern === '**') {\n    out.glob_star++;\n    return out;\n  }\n\n  return parser(pattern, out);\n};\n\nvar compareWeightObject = function compareWeightObject(w1, w2) {\n  return exports.mmComparePatternWeights([w1.glob_star, w1.star, w1.ext_glob, w1.range, w1.optional], [w2.glob_star, w2.star, w2.ext_glob, w2.range, w2.optional]);\n};\n\nexports.mmPatternWeight = function (pattern) {\n  var m = new mm.Minimatch(pattern);\n  if (!m.globParts) return [0, 0, 0, 0, 0, 0];\n  var result = m.globParts.reduce(function (prev, p) {\n    var r = p.reduce(function (prev, p) {\n      return gsParser(p, prev);\n    }, {\n      glob_star: 0,\n      ext_glob: 0,\n      word: 0,\n      star: 0,\n      optional: 0,\n      range: 0\n    });\n    if (prev === undefined) return r;\n    return compareWeightObject(r, prev) > 0 ? r : prev;\n  }, undefined);\n  result.glob_sets = m.set.length;\n  return [result.glob_sets, result.glob_star, result.star, result.ext_glob, result.range, result.optional];\n};\n\nexports.mmComparePatternWeights = function (weight1, weight2) {\n  var n1 = weight1[0];\n  var n2 = weight2[0];\n  var diff = n1 - n2;\n  if (diff !== 0) return diff / Math.abs(diff);\n  return weight1.length > 1 ? exports.mmComparePatternWeights(weight1.slice(1), weight2.slice(1)) : 0;\n};\n\nexports.isFunction = _.isFunction;\nexports.isString = _.isString;\nexports.isObject = _.isObject;\nexports.isArray = _.isArray;\nexports.isNumber = _.isNumber;\nvar ABS_URL = /^https?:\\/\\//;\n\nexports.isUrlAbsolute = function (url) {\n  return ABS_URL.test(url);\n};\n\nexports.camelToSnake = function (camelCase) {\n  return camelCase.replace(/[A-Z]/g, function (match, pos) {\n    return (pos > 0 ? '_' : '') + match.toLowerCase();\n  });\n};\n\nexports.ucFirst = function (word) {\n  return word.charAt(0).toUpperCase() + word.substr(1);\n};\n\nexports.dashToCamel = function (dash) {\n  var words = dash.split('-');\n  return words.shift() + words.map(exports.ucFirst).join('');\n};\n\nexports.arrayRemove = function (collection, item) {\n  var idx = collection.indexOf(item);\n\n  if (idx !== -1) {\n    collection.splice(idx, 1);\n    return true;\n  }\n\n  return false;\n};\n\nexports.merge = function () {\n  var args = Array.prototype.slice.call(arguments, 0);\n  args.unshift({});\n  return _.merge.apply({}, args);\n};\n\nexports.formatTimeInterval = function (time) {\n  var mins = Math.floor(time / 60000);\n  var secs = (time - mins * 60000) / 1000;\n  var str = secs + (secs === 1 ? ' sec' : ' secs');\n\n  if (mins) {\n    str = mins + (mins === 1 ? ' min ' : ' mins ') + str;\n  }\n\n  return str;\n};\n\nvar replaceWinPath = function replaceWinPath(path) {\n  return _.isString(path) ? path.replace(/\\\\/g, '/') : path;\n};\n\nexports.normalizeWinPath = process.platform === 'win32' ? replaceWinPath : _.identity;\n\nexports.mkdirIfNotExists = function (directory, done) {\n  // TODO(vojta): handle if it's a file\n\n  /* eslint-disable handle-callback-err */\n  fs.stat(directory, function (err, stat) {\n    if (stat && stat.isDirectory()) {\n      done();\n    } else {\n      exports.mkdirIfNotExists(path.dirname(directory), function () {\n        fs.mkdir(directory, done);\n      });\n    }\n  });\n  /* eslint-enable handle-callback-err */\n};\n\nexports.defer = function () {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  return {\n    resolve: res,\n    reject: rej,\n    promise: promise\n  };\n};\n\nexports.saveOriginalArgs = function (config) {\n  if (config && config.client && config.client.args) {\n    config.client.originalArgs = _.cloneDeep(config.client.args);\n  }\n};\n\nexports.restoreOriginalArgs = function (config) {\n  if (config && config.client && config.client.originalArgs) {\n    config.client.args = _.cloneDeep(config.client.originalArgs);\n  }\n};","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/karma/lib/helper.js"],"names":["fs","require","path","_","useragent","mm","exports","browserFullNameToShort","fullName","ua","browser","name","version","os","isDefined","value","isUndefined","parser","pattern","out","length","p","matches","exec","c","t","substring","undefined","ext_glob","range","gsParser","glob_star","compareWeightObject","w1","w2","mmComparePatternWeights","star","optional","mmPatternWeight","m","Minimatch","globParts","result","reduce","prev","r","word","glob_sets","set","weight1","weight2","n1","n2","diff","Math","abs","slice","isFunction","isString","isObject","isArray","isNumber","ABS_URL","isUrlAbsolute","url","test","camelToSnake","camelCase","replace","match","pos","toLowerCase","ucFirst","charAt","toUpperCase","substr","dashToCamel","dash","words","split","shift","map","join","arrayRemove","collection","item","idx","indexOf","splice","merge","args","Array","prototype","call","arguments","unshift","apply","formatTimeInterval","time","mins","floor","secs","str","replaceWinPath","normalizeWinPath","process","platform","identity","mkdirIfNotExists","directory","done","stat","err","isDirectory","dirname","mkdir","defer","res","rej","promise","Promise","resolve","reject","saveOriginalArgs","config","client","originalArgs","cloneDeep","restoreOriginalArgs"],"mappings":"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","sourcesContent":["'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst _ = require('lodash')\nconst useragent = require('ua-parser-js')\nconst mm = require('minimatch')\n\nexports.browserFullNameToShort = (fullName) => {\n  const ua = useragent(fullName)\n  if (!ua.browser.name && !ua.browser.version && !ua.os.name && !ua.os.version) {\n    return fullName\n  }\n  return `${ua.browser.name} ${ua.browser.version || '0.0.0'} (${ua.os.name} ${ua.os.version || '0.0.0'})`\n}\n\nexports.isDefined = (value) => {\n  return !_.isUndefined(value)\n}\n\nconst parser = (pattern, out) => {\n  if (pattern.length === 0) return out\n  const p = /^(\\[[^\\]]*\\]|[*+@?]\\((.+?)\\))/g\n  const matches = p.exec(pattern)\n  if (!matches) {\n    const c = pattern[0]\n    let t = 'word'\n    if (c === '*') {\n      t = 'star'\n    } else if (c === '?') {\n      t = 'optional'\n    }\n    out[t]++\n    return parser(pattern.substring(1), out)\n  }\n  if (matches[2] !== undefined) {\n    out.ext_glob++\n    parser(matches[2], out)\n    return parser(pattern.substring(matches[0].length), out)\n  }\n  out.range++\n  return parser(pattern.substring(matches[0].length), out)\n}\n\nconst gsParser = (pattern, out) => {\n  if (pattern === '**') {\n    out.glob_star++\n    return out\n  }\n  return parser(pattern, out)\n}\n\nconst compareWeightObject = (w1, w2) => {\n  return exports.mmComparePatternWeights(\n    [w1.glob_star, w1.star, w1.ext_glob, w1.range, w1.optional],\n    [w2.glob_star, w2.star, w2.ext_glob, w2.range, w2.optional]\n  )\n}\n\nexports.mmPatternWeight = (pattern) => {\n  const m = new mm.Minimatch(pattern)\n  if (!m.globParts) return [0, 0, 0, 0, 0, 0]\n  const result = m.globParts.reduce((prev, p) => {\n    const r = p.reduce((prev, p) => {\n      return gsParser(p, prev)\n    }, { glob_star: 0, ext_glob: 0, word: 0, star: 0, optional: 0, range: 0 })\n    if (prev === undefined) return r\n    return compareWeightObject(r, prev) > 0 ? r : prev\n  }, undefined)\n  result.glob_sets = m.set.length\n  return [result.glob_sets, result.glob_star, result.star, result.ext_glob, result.range, result.optional]\n}\n\nexports.mmComparePatternWeights = (weight1, weight2) => {\n  const n1 = weight1[0]\n  const n2 = weight2[0]\n  const diff = n1 - n2\n  if (diff !== 0) return diff / Math.abs(diff)\n  return weight1.length > 1 ? exports.mmComparePatternWeights(weight1.slice(1), weight2.slice(1)) : 0\n}\n\nexports.isFunction = _.isFunction\nexports.isString = _.isString\nexports.isObject = _.isObject\nexports.isArray = _.isArray\nexports.isNumber = _.isNumber\n\nconst ABS_URL = /^https?:\\/\\//\nexports.isUrlAbsolute = (url) => {\n  return ABS_URL.test(url)\n}\n\nexports.camelToSnake = (camelCase) => {\n  return camelCase.replace(/[A-Z]/g, (match, pos) => {\n    return (pos > 0 ? '_' : '') + match.toLowerCase()\n  })\n}\n\nexports.ucFirst = (word) => {\n  return word.charAt(0).toUpperCase() + word.substr(1)\n}\n\nexports.dashToCamel = (dash) => {\n  const words = dash.split('-')\n  return words.shift() + words.map(exports.ucFirst).join('')\n}\n\nexports.arrayRemove = (collection, item) => {\n  const idx = collection.indexOf(item)\n\n  if (idx !== -1) {\n    collection.splice(idx, 1)\n    return true\n  }\n\n  return false\n}\n\nexports.merge = function () {\n  const args = Array.prototype.slice.call(arguments, 0)\n  args.unshift({})\n  return _.merge.apply({}, args)\n}\n\nexports.formatTimeInterval = (time) => {\n  const mins = Math.floor(time / 60000)\n  const secs = (time - mins * 60000) / 1000\n  let str = secs + (secs === 1 ? ' sec' : ' secs')\n\n  if (mins) {\n    str = mins + (mins === 1 ? ' min ' : ' mins ') + str\n  }\n\n  return str\n}\n\nconst replaceWinPath = (path) => {\n  return _.isString(path) ? path.replace(/\\\\/g, '/') : path\n}\n\nexports.normalizeWinPath = process.platform === 'win32' ? replaceWinPath : _.identity\n\nexports.mkdirIfNotExists = (directory, done) => {\n  // TODO(vojta): handle if it's a file\n  /* eslint-disable handle-callback-err */\n  fs.stat(directory, (err, stat) => {\n    if (stat && stat.isDirectory()) {\n      done()\n    } else {\n      exports.mkdirIfNotExists(path.dirname(directory), () => {\n        fs.mkdir(directory, done)\n      })\n    }\n  })\n  /* eslint-enable handle-callback-err */\n}\n\nexports.defer = () => {\n  let res\n  let rej\n  const promise = new Promise((resolve, reject) => {\n    res = resolve\n    rej = reject\n  })\n\n  return {\n    resolve: res,\n    reject: rej,\n    promise: promise\n  }\n}\n\nexports.saveOriginalArgs = (config) => {\n  if (config && config.client && config.client.args) {\n    config.client.originalArgs = _.cloneDeep(config.client.args)\n  }\n}\n\nexports.restoreOriginalArgs = (config) => {\n  if (config && config.client && config.client.originalArgs) {\n    config.client.args = _.cloneDeep(config.client.originalArgs)\n  }\n}\n"]},"metadata":{},"sourceType":"script"}