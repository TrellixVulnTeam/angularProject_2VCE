{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _toConsumableArray = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _createForOfIteratorHelper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _regeneratorRuntime = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/regenerator\");\n\nvar _objectSpread = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/objectSpread2\");\n\nvar _taggedTemplateLiteral = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/taggedTemplateLiteral\");\n\nvar _asyncToGenerator = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _asyncIterator = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/asyncIterator\");\n\nvar _templateObject;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.buildWebpackBrowser = exports.getCompilerConfig = exports.getAnalyticsConfig = void 0;\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar architect_1 = require(\"@angular-devkit/architect\");\n\nvar build_webpack_1 = require(\"@angular-devkit/build-webpack\");\n\nvar core_1 = require(\"@angular-devkit/core\");\n\nvar node_1 = require(\"@angular-devkit/core/node\");\n\nvar fs = require(\"fs\");\n\nvar path = require(\"path\");\n\nvar rxjs_1 = require(\"rxjs\");\n\nvar operators_1 = require(\"rxjs/operators\");\n\nvar typescript_1 = require(\"typescript\");\n\nvar utils_1 = require(\"../utils\");\n\nvar action_executor_1 = require(\"../utils/action-executor\");\n\nvar bundle_calculator_1 = require(\"../utils/bundle-calculator\");\n\nvar cache_path_1 = require(\"../utils/cache-path\");\n\nvar color_1 = require(\"../utils/color\");\n\nvar copy_assets_1 = require(\"../utils/copy-assets\");\n\nvar environment_options_1 = require(\"../utils/environment-options\");\n\nvar i18n_inlining_1 = require(\"../utils/i18n-inlining\");\n\nvar transforms_1 = require(\"../utils/index-file/transforms\");\n\nvar write_index_html_1 = require(\"../utils/index-file/write-index-html\");\n\nvar output_paths_1 = require(\"../utils/output-paths\");\n\nvar read_tsconfig_1 = require(\"../utils/read-tsconfig\");\n\nvar service_worker_1 = require(\"../utils/service-worker\");\n\nvar spinner_1 = require(\"../utils/spinner\");\n\nvar version_1 = require(\"../utils/version\");\n\nvar webpack_browser_config_1 = require(\"../utils/webpack-browser-config\");\n\nvar webpack_version_1 = require(\"../utils/webpack-version\");\n\nvar configs_1 = require(\"../webpack/configs\");\n\nvar analytics_1 = require(\"../webpack/plugins/analytics\");\n\nvar async_chunks_1 = require(\"../webpack/utils/async-chunks\");\n\nvar stats_1 = require(\"../webpack/utils/stats\");\n\nvar cacheDownlevelPath = environment_options_1.cachingDisabled ? undefined : cache_path_1.findCachePath('angular-build-dl');\n\nfunction getAnalyticsConfig(wco, context) {\n  if (context.analytics) {\n    // If there's analytics, add our plugin. Otherwise no need to slow down the build.\n    var category = 'build';\n\n    if (context.builder) {\n      // We already vetted that this is a \"safe\" package, otherwise the analytics would be noop.\n      category = context.builder.builderName.split(':')[1] || context.builder.builderName || 'build';\n    } // The category is the builder name if it's an angular builder.\n\n\n    return {\n      plugins: [new analytics_1.NgBuildAnalyticsPlugin(wco.projectRoot, context.analytics, category, !!wco.tsConfig.options.enableIvy)]\n    };\n  }\n\n  return {};\n}\n\nexports.getAnalyticsConfig = getAnalyticsConfig;\n\nfunction getCompilerConfig(wco) {\n  if (wco.buildOptions.main || wco.buildOptions.polyfills) {\n    return wco.buildOptions.aot ? configs_1.getAotConfig(wco) : configs_1.getNonAotConfig(wco);\n  }\n\n  return {};\n}\n\nexports.getCompilerConfig = getCompilerConfig;\n\nfunction initialize(_x, _x2, _x3, _x4, _x5) {\n  return _initialize.apply(this, arguments);\n} // tslint:disable-next-line: no-big-function\n\n\nfunction _initialize() {\n  _initialize = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(options, context, host, differentialLoadingMode, webpackConfigurationTransform) {\n    var _a, _b, originalOutputPath, adjustedOptions, _yield$webpack_browse, config, projectRoot, projectSourceRoot, i18n, transformedConfig;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            originalOutputPath = options.outputPath; // Assets are processed directly by the builder except when watching\n\n            adjustedOptions = options.watch ? options : _objectSpread(_objectSpread({}, options), {}, {\n              assets: []\n            }); // TODO_WEBPACK_5: Investigate build/serve issues with the `license-webpack-plugin` package\n\n            if (adjustedOptions.extractLicenses && webpack_version_1.isWebpackFiveOrHigher()) {\n              adjustedOptions.extractLicenses = false;\n              context.logger.warn('Warning: License extraction is currently disabled when using Webpack 5. ' + 'This is temporary and will be corrected in a future update.');\n            }\n\n            _context3.next = 5;\n            return webpack_browser_config_1.generateI18nBrowserWebpackConfigFromContext(adjustedOptions, context, function (wco) {\n              return [configs_1.getCommonConfig(wco), configs_1.getBrowserConfig(wco), configs_1.getStylesConfig(wco), configs_1.getStatsConfig(wco), getAnalyticsConfig(wco, context), getCompilerConfig(wco), wco.buildOptions.webWorkerTsConfig ? configs_1.getWorkerConfig(wco) : {}];\n            }, host, {\n              differentialLoadingMode: differentialLoadingMode\n            });\n\n          case 5:\n            _yield$webpack_browse = _context3.sent;\n            config = _yield$webpack_browse.config;\n            projectRoot = _yield$webpack_browse.projectRoot;\n            projectSourceRoot = _yield$webpack_browse.projectSourceRoot;\n            i18n = _yield$webpack_browse.i18n;\n\n            // Validate asset option values if processed directly\n            if (((_a = options.assets) === null || _a === void 0 ? void 0 : _a.length) && !((_b = adjustedOptions.assets) === null || _b === void 0 ? void 0 : _b.length)) {\n              utils_1.normalizeAssetPatterns(options.assets, new core_1.virtualFs.SyncDelegateHost(host), core_1.normalize(context.workspaceRoot), core_1.normalize(projectRoot), projectSourceRoot === undefined ? undefined : core_1.normalize(projectSourceRoot)).forEach(function (_ref4) {\n                var output = _ref4.output;\n\n                if (output.startsWith('..')) {\n                  throw new Error('An asset cannot be written to a location outside of the output path.');\n                }\n              });\n            }\n\n            if (!webpackConfigurationTransform) {\n              _context3.next = 15;\n              break;\n            }\n\n            _context3.next = 14;\n            return webpackConfigurationTransform(config);\n\n          case 14:\n            transformedConfig = _context3.sent;\n\n          case 15:\n            if (options.deleteOutputPath) {\n              utils_1.deleteOutputDir(context.workspaceRoot, originalOutputPath);\n            }\n\n            return _context3.abrupt(\"return\", {\n              config: transformedConfig || config,\n              projectRoot: projectRoot,\n              projectSourceRoot: projectSourceRoot,\n              i18n: i18n\n            });\n\n          case 17:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _initialize.apply(this, arguments);\n}\n\nfunction buildWebpackBrowser(options, context) {\n  var transforms = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var _a;\n\n  var host = new node_1.NodeJsSyncHost();\n  var root = core_1.normalize(context.workspaceRoot);\n  var projectName = (_a = context.target) === null || _a === void 0 ? void 0 : _a.project;\n\n  if (!projectName) {\n    throw new Error('The builder requires a target.');\n  }\n\n  var baseOutputPath = path.resolve(context.workspaceRoot, options.outputPath);\n  var outputPaths; // Check Angular version.\n\n  version_1.assertCompatibleAngularVersion(context.workspaceRoot, context.logger);\n  return rxjs_1.from(context.getProjectMetadata(projectName)).pipe(operators_1.switchMap( /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(projectMetadata) {\n      var _a, sysProjectRoot, _read_tsconfig_1$read, compilerOptions, target, buildBrowserFeatures, isDifferentialLoadingNeeded, differentialLoadingMode, hasIE9, hasIE10, browsers;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              sysProjectRoot = core_1.getSystemPath(core_1.resolve(core_1.normalize(context.workspaceRoot), core_1.normalize((_a = projectMetadata.root) !== null && _a !== void 0 ? _a : '')));\n              _read_tsconfig_1$read = read_tsconfig_1.readTsconfig(options.tsConfig, context.workspaceRoot), compilerOptions = _read_tsconfig_1$read.options;\n              target = compilerOptions.target || typescript_1.ScriptTarget.ES5;\n              buildBrowserFeatures = new utils_1.BuildBrowserFeatures(sysProjectRoot);\n              isDifferentialLoadingNeeded = buildBrowserFeatures.isDifferentialLoadingNeeded(target);\n              differentialLoadingMode = !options.watch && isDifferentialLoadingNeeded;\n\n              if (target > typescript_1.ScriptTarget.ES2015 && isDifferentialLoadingNeeded) {\n                context.logger.warn(core_1.tags.stripIndent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n          Warning: Using differential loading with targets ES5 and ES2016 or higher may\\n          cause problems. Browsers with support for ES2015 will load the ES2016+ scripts\\n          referenced with script[type=\\\"module\\\"] but they may not support ES2016+ syntax.\\n        \"]))));\n              }\n\n              hasIE9 = buildBrowserFeatures.supportedBrowsers.includes('ie 9');\n              hasIE10 = buildBrowserFeatures.supportedBrowsers.includes('ie 10');\n\n              if (hasIE9 || hasIE10) {\n                browsers = (hasIE9 ? 'IE 9' + (hasIE10 ? ' & ' : '') : '') + (hasIE10 ? 'IE 10' : '');\n                context.logger.warn(\"Warning: Support was requested for \".concat(browsers, \" in the project's browserslist configuration. \") + (hasIE9 && hasIE10 ? 'These browsers are' : 'This browser is') + ' no longer officially supported with Angular v11 and higher.' + '\\nFor additional information: https://v10.angular.io/guide/deprecations#ie-9-10-and-mobile');\n              }\n\n              _context.t0 = _objectSpread;\n              _context.t1 = _objectSpread;\n              _context.t2 = {};\n              _context.next = 15;\n              return initialize(options, context, host, differentialLoadingMode, transforms.webpackConfiguration);\n\n            case 15:\n              _context.t3 = _context.sent;\n              _context.t4 = (0, _context.t1)(_context.t2, _context.t3);\n              _context.t5 = {};\n              _context.t6 = {\n                buildBrowserFeatures: buildBrowserFeatures,\n                isDifferentialLoadingNeeded: isDifferentialLoadingNeeded,\n                target: target\n              };\n              return _context.abrupt(\"return\", (0, _context.t0)(_context.t4, _context.t5, _context.t6));\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x6) {\n      return _ref.apply(this, arguments);\n    };\n  }()), // tslint:disable-next-line: no-big-function\n  operators_1.switchMap(function (_ref2) {\n    var config = _ref2.config,\n        projectRoot = _ref2.projectRoot,\n        projectSourceRoot = _ref2.projectSourceRoot,\n        i18n = _ref2.i18n,\n        buildBrowserFeatures = _ref2.buildBrowserFeatures,\n        isDifferentialLoadingNeeded = _ref2.isDifferentialLoadingNeeded,\n        target = _ref2.target;\n    var normalizedOptimization = utils_1.normalizeOptimization(options.optimization);\n    var indexTransforms = transforms_1.getHtmlTransforms(normalizedOptimization, buildBrowserFeatures, transforms.indexHtml);\n    return build_webpack_1.runWebpack(config, context, {\n      webpackFactory: require('webpack'),\n      logging: transforms.logging || function (stats, config) {\n        if (options.verbose) {\n          context.logger.info(stats.toString(config.stats));\n        }\n      }\n    }).pipe( // tslint:disable-next-line: no-big-function\n    operators_1.concatMap( /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(buildEvent) {\n        var _a, _b, _c, _d, spinner, webpackRawStats, success, _buildEvent$emittedFi, emittedFiles, extraEntryPoints, webpackStats, bundleInfoStats, noModuleFiles, moduleFiles, files, scriptsEntryPointName, _success, sourceMapOptions, actionOptions, mainChunkId, actions, workerReplacements, seen, _iterator3, _step3, file, es5Polyfills, filename, code, map, es2015Polyfills, newFilename, processActions, processRuntimeAction, processResults, _i, _actions, action, executor, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, _value, result, runtimeOptions, inlineActions, processedFiles, _iterator4, _step4, _result2, hasErrors, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _value2, _result, _iterator5, _step5, diagnostic, _loop, _i2, _processResults, unprocessedChunks, _iterator6, _step6, _loop2, budgets, budgetFailures, _iterator7, _step7, _step7$value, severity, message, _success2, _iterator8, _step8, _step8$value, locale, outputPath, _iterator9, _step9, _step9$value, _locale, _outputPath;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                spinner = new spinner_1.Spinner();\n                spinner.enabled = options.progress !== false;\n                webpackRawStats = buildEvent.webpackStats, success = buildEvent.success, _buildEvent$emittedFi = buildEvent.emittedFiles, emittedFiles = _buildEvent$emittedFi === void 0 ? [] : _buildEvent$emittedFi;\n\n                if (webpackRawStats) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw new Error('Webpack stats build result is required.');\n\n              case 5:\n                // Fix incorrectly set `initial` value on chunks.\n                extraEntryPoints = configs_1.normalizeExtraEntryPoints(options.styles || [], 'styles').concat(configs_1.normalizeExtraEntryPoints(options.scripts || [], 'scripts'));\n                webpackStats = _objectSpread(_objectSpread({}, webpackRawStats), {}, {\n                  chunks: async_chunks_1.markAsyncChunksNonInitial(webpackRawStats, extraEntryPoints)\n                });\n\n                if (success) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                // If using bundle downleveling then there is only one build\n                // If it fails show any diagnostic messages and bail\n                if (stats_1.statsHasWarnings(webpackStats)) {\n                  context.logger.warn(stats_1.statsWarningsToString(webpackStats, {\n                    colors: true\n                  }));\n                }\n\n                if (stats_1.statsHasErrors(webpackStats)) {\n                  context.logger.error(stats_1.statsErrorsToString(webpackStats, {\n                    colors: true\n                  }));\n                }\n\n                return _context2.abrupt(\"return\", {\n                  success: success\n                });\n\n              case 13:\n                bundleInfoStats = [];\n                outputPaths = output_paths_1.ensureOutputPaths(baseOutputPath, i18n);\n                scriptsEntryPointName = configs_1.normalizeExtraEntryPoints(options.scripts || [], 'scripts').map(function (x) {\n                  return x.bundleName;\n                });\n\n                if (!(isDifferentialLoadingNeeded && options.watch)) {\n                  _context2.next = 27;\n                  break;\n                }\n\n                moduleFiles = emittedFiles;\n                files = moduleFiles.filter(function (x) {\n                  return x.extension === '.css' || x.name && scriptsEntryPointName.includes(x.name);\n                });\n\n                if (!i18n.shouldInline) {\n                  _context2.next = 25;\n                  break;\n                }\n\n                _context2.next = 22;\n                return i18n_inlining_1.i18nInlineEmittedFiles(context, emittedFiles, i18n, baseOutputPath, Array.from(outputPaths.values()), scriptsEntryPointName, // tslint:disable-next-line: no-non-null-assertion\n                webpackStats.outputPath, target <= typescript_1.ScriptTarget.ES5, options.i18nMissingTranslation);\n\n              case 22:\n                _success = _context2.sent;\n\n                if (_success) {\n                  _context2.next = 25;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", {\n                  success: false\n                });\n\n              case 25:\n                _context2.next = 221;\n                break;\n\n              case 27:\n                if (!isDifferentialLoadingNeeded) {\n                  _context2.next = 213;\n                  break;\n                }\n\n                moduleFiles = [];\n                noModuleFiles = []; // Common options for all bundle process actions\n\n                sourceMapOptions = utils_1.normalizeSourceMaps(options.sourceMap || false);\n                actionOptions = {\n                  optimize: normalizedOptimization.scripts,\n                  sourceMaps: sourceMapOptions.scripts,\n                  hiddenSourceMaps: sourceMapOptions.hidden,\n                  vendorSourceMaps: sourceMapOptions.vendor,\n                  integrityAlgorithm: options.subresourceIntegrity ? 'sha384' : undefined\n                };\n                actions = [];\n                seen = new Set();\n                _iterator3 = _createForOfIteratorHelper(emittedFiles);\n                _context2.prev = 35;\n\n                _iterator3.s();\n\n              case 37:\n                if ((_step3 = _iterator3.n()).done) {\n                  _context2.next = 69;\n                  break;\n                }\n\n                file = _step3.value;\n\n                if (!file.asset) {\n                  _context2.next = 46;\n                  break;\n                }\n\n                if (!file.file.endsWith('.worker.js')) {\n                  _context2.next = 45;\n                  break;\n                }\n\n                if (!workerReplacements) {\n                  workerReplacements = [];\n                }\n\n                workerReplacements.push([file.file, file.file.replace(/\\-(es20\\d{2}|esnext)/, '-es5')]);\n                _context2.next = 46;\n                break;\n\n              case 45:\n                return _context2.abrupt(\"continue\", 67);\n\n              case 46:\n                if (!(file.extension !== '.js' || file.name && scriptsEntryPointName.includes(file.name))) {\n                  _context2.next = 50;\n                  break;\n                }\n\n                if (files === undefined) {\n                  files = [];\n                }\n\n                files.push(file);\n                return _context2.abrupt(\"continue\", 67);\n\n              case 50:\n                if (!seen.has(file.file)) {\n                  _context2.next = 52;\n                  break;\n                }\n\n                return _context2.abrupt(\"continue\", 67);\n\n              case 52:\n                seen.add(file.file);\n\n                if (file.name === 'vendor' || !mainChunkId && file.name === 'main') {\n                  // tslint:disable-next-line: no-non-null-assertion\n                  mainChunkId = file.id.toString();\n                } // All files at this point except ES5 polyfills are module scripts\n\n\n                es5Polyfills = file.file.startsWith('polyfills-es5');\n\n                if (!es5Polyfills) {\n                  moduleFiles.push(file);\n                } // Retrieve the content/map for the file\n                // NOTE: Additional future optimizations will read directly from memory\n                // tslint:disable-next-line: no-non-null-assertion\n\n\n                filename = path.join(webpackStats.outputPath, file.file);\n                code = fs.readFileSync(filename, 'utf8');\n                map = void 0;\n\n                if (actionOptions.sourceMaps) {\n                  try {\n                    map = fs.readFileSync(filename + '.map', 'utf8');\n\n                    if (es5Polyfills) {\n                      fs.unlinkSync(filename + '.map');\n                    }\n                  } catch (_e) {}\n                }\n\n                if (es5Polyfills) {\n                  fs.unlinkSync(filename);\n                  filename = filename.replace(/\\-es20\\d{2}/, '');\n                }\n\n                es2015Polyfills = file.file.startsWith('polyfills-es20'); // Record the bundle processing action\n                // The runtime chunk gets special processing for lazy loaded files\n\n                actions.push(_objectSpread(_objectSpread({}, actionOptions), {}, {\n                  filename: filename,\n                  code: code,\n                  map: map,\n                  // id is always present for non-assets\n                  // tslint:disable-next-line: no-non-null-assertion\n                  name: file.id,\n                  runtime: file.file.startsWith('runtime'),\n                  ignoreOriginal: es5Polyfills,\n                  optimizeOnly: es2015Polyfills\n                })); // ES2015 polyfills are only optimized; optimization check was performed above\n\n                if (!es2015Polyfills) {\n                  _context2.next = 65;\n                  break;\n                }\n\n                return _context2.abrupt(\"continue\", 67);\n\n              case 65:\n                // Add the newly created ES5 bundles to the index as nomodule scripts\n                newFilename = es5Polyfills ? file.file.replace(/\\-es20\\d{2}/, '') : file.file.replace(/\\-(es20\\d{2}|esnext)/, '-es5');\n                noModuleFiles.push(_objectSpread(_objectSpread({}, file), {}, {\n                  file: newFilename\n                }));\n\n              case 67:\n                _context2.next = 37;\n                break;\n\n              case 69:\n                _context2.next = 74;\n                break;\n\n              case 71:\n                _context2.prev = 71;\n                _context2.t0 = _context2[\"catch\"](35);\n\n                _iterator3.e(_context2.t0);\n\n              case 74:\n                _context2.prev = 74;\n\n                _iterator3.f();\n\n                return _context2.finish(74);\n\n              case 77:\n                processActions = [];\n                processResults = [];\n\n                for (_i = 0, _actions = actions; _i < _actions.length; _i++) {\n                  action = _actions[_i];\n\n                  // If SRI is enabled always process the runtime bundle\n                  // Lazy route integrity values are stored in the runtime bundle\n                  if (action.integrityAlgorithm && action.runtime) {\n                    processRuntimeAction = action;\n                  } else {\n                    processActions.push(_objectSpread({\n                      replacements: workerReplacements\n                    }, action));\n                  }\n                }\n\n                executor = new action_executor_1.BundleActionExecutor({\n                  cachePath: cacheDownlevelPath,\n                  i18n: i18n\n                }, options.subresourceIntegrity ? 'sha384' : undefined); // Execute the bundle processing actions\n\n                _context2.prev = 81;\n                spinner.start('Generating ES5 bundles for differential loading...');\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _context2.prev = 85;\n                _iterator = _asyncIterator(executor.processAll(processActions));\n\n              case 87:\n                _context2.next = 89;\n                return _iterator.next();\n\n              case 89:\n                _step = _context2.sent;\n                _iteratorNormalCompletion = _step.done;\n                _context2.next = 93;\n                return _step.value;\n\n              case 93:\n                _value = _context2.sent;\n\n                if (_iteratorNormalCompletion) {\n                  _context2.next = 100;\n                  break;\n                }\n\n                result = _value;\n                processResults.push(result);\n\n              case 97:\n                _iteratorNormalCompletion = true;\n                _context2.next = 87;\n                break;\n\n              case 100:\n                _context2.next = 106;\n                break;\n\n              case 102:\n                _context2.prev = 102;\n                _context2.t1 = _context2[\"catch\"](85);\n                _didIteratorError = true;\n                _iteratorError = _context2.t1;\n\n              case 106:\n                _context2.prev = 106;\n                _context2.prev = 107;\n\n                if (!(!_iteratorNormalCompletion && _iterator.return != null)) {\n                  _context2.next = 111;\n                  break;\n                }\n\n                _context2.next = 111;\n                return _iterator.return();\n\n              case 111:\n                _context2.prev = 111;\n\n                if (!_didIteratorError) {\n                  _context2.next = 114;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 114:\n                return _context2.finish(111);\n\n              case 115:\n                return _context2.finish(106);\n\n              case 116:\n                if (!processRuntimeAction) {\n                  _context2.next = 123;\n                  break;\n                }\n\n                runtimeOptions = _objectSpread(_objectSpread({}, processRuntimeAction), {}, {\n                  runtimeData: processResults,\n                  supportedBrowsers: buildBrowserFeatures.supportedBrowsers\n                });\n                _context2.t2 = processResults;\n                _context2.next = 121;\n                return Promise.resolve().then(function () {\n                  return require('../utils/process-bundle');\n                }).then(function (m) {\n                  return m.process(runtimeOptions);\n                });\n\n              case 121:\n                _context2.t3 = _context2.sent;\n\n                _context2.t2.push.call(_context2.t2, _context2.t3);\n\n              case 123:\n                spinner.succeed('ES5 bundle generation complete.');\n\n                if (!i18n.shouldInline) {\n                  _context2.next = 178;\n                  break;\n                }\n\n                spinner.start('Generating localized bundles...');\n                inlineActions = [];\n                processedFiles = new Set();\n                _iterator4 = _createForOfIteratorHelper(processResults);\n\n                try {\n                  for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                    _result2 = _step4.value;\n\n                    if (_result2.original) {\n                      inlineActions.push({\n                        filename: path.basename(_result2.original.filename),\n                        code: fs.readFileSync(_result2.original.filename, 'utf8'),\n                        map: _result2.original.map && fs.readFileSync(_result2.original.map.filename, 'utf8'),\n                        outputPath: baseOutputPath,\n                        es5: false,\n                        missingTranslation: options.i18nMissingTranslation,\n                        setLocale: _result2.name === mainChunkId\n                      });\n                      processedFiles.add(_result2.original.filename);\n\n                      if (_result2.original.map) {\n                        processedFiles.add(_result2.original.map.filename);\n                      }\n                    }\n\n                    if (_result2.downlevel) {\n                      inlineActions.push({\n                        filename: path.basename(_result2.downlevel.filename),\n                        code: fs.readFileSync(_result2.downlevel.filename, 'utf8'),\n                        map: _result2.downlevel.map && fs.readFileSync(_result2.downlevel.map.filename, 'utf8'),\n                        outputPath: baseOutputPath,\n                        es5: true,\n                        missingTranslation: options.i18nMissingTranslation,\n                        setLocale: _result2.name === mainChunkId\n                      });\n                      processedFiles.add(_result2.downlevel.filename);\n\n                      if (_result2.downlevel.map) {\n                        processedFiles.add(_result2.downlevel.map.filename);\n                      }\n                    }\n                  }\n                } catch (err) {\n                  _iterator4.e(err);\n                } finally {\n                  _iterator4.f();\n                }\n\n                hasErrors = false;\n                _context2.prev = 131;\n                _iteratorNormalCompletion2 = true;\n                _didIteratorError2 = false;\n                _context2.prev = 134;\n                _iterator2 = _asyncIterator(executor.inlineAll(inlineActions));\n\n              case 136:\n                _context2.next = 138;\n                return _iterator2.next();\n\n              case 138:\n                _step2 = _context2.sent;\n                _iteratorNormalCompletion2 = _step2.done;\n                _context2.next = 142;\n                return _step2.value;\n\n              case 142:\n                _value2 = _context2.sent;\n\n                if (_iteratorNormalCompletion2) {\n                  _context2.next = 151;\n                  break;\n                }\n\n                _result = _value2;\n\n                if (options.verbose) {\n                  context.logger.info(\"Localized \\\"\".concat(_result.file, \"\\\" [\").concat(_result.count, \" translation(s)].\"));\n                }\n\n                _iterator5 = _createForOfIteratorHelper(_result.diagnostics);\n\n                try {\n                  for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                    diagnostic = _step5.value;\n                    spinner.stop();\n\n                    if (diagnostic.type === 'error') {\n                      hasErrors = true;\n                      context.logger.error(diagnostic.message);\n                    } else {\n                      context.logger.warn(diagnostic.message);\n                    }\n\n                    spinner.start();\n                  }\n                } catch (err) {\n                  _iterator5.e(err);\n                } finally {\n                  _iterator5.f();\n                }\n\n              case 148:\n                _iteratorNormalCompletion2 = true;\n                _context2.next = 136;\n                break;\n\n              case 151:\n                _context2.next = 157;\n                break;\n\n              case 153:\n                _context2.prev = 153;\n                _context2.t4 = _context2[\"catch\"](134);\n                _didIteratorError2 = true;\n                _iteratorError2 = _context2.t4;\n\n              case 157:\n                _context2.prev = 157;\n                _context2.prev = 158;\n\n                if (!(!_iteratorNormalCompletion2 && _iterator2.return != null)) {\n                  _context2.next = 162;\n                  break;\n                }\n\n                _context2.next = 162;\n                return _iterator2.return();\n\n              case 162:\n                _context2.prev = 162;\n\n                if (!_didIteratorError2) {\n                  _context2.next = 165;\n                  break;\n                }\n\n                throw _iteratorError2;\n\n              case 165:\n                return _context2.finish(162);\n\n              case 166:\n                return _context2.finish(157);\n\n              case 167:\n                _context2.next = 169;\n                return copy_assets_1.copyAssets([{\n                  glob: '**/*',\n                  // tslint:disable-next-line: no-non-null-assertion\n                  input: webpackStats.outputPath,\n                  output: '',\n                  ignore: _toConsumableArray(processedFiles).map(function (f) {\n                    return (// tslint:disable-next-line: no-non-null-assertion\n                      path.relative(webpackStats.outputPath, f)\n                    );\n                  })\n                }], Array.from(outputPaths.values()), '');\n\n              case 169:\n                _context2.next = 175;\n                break;\n\n              case 171:\n                _context2.prev = 171;\n                _context2.t5 = _context2[\"catch\"](131);\n                spinner.fail('Localized bundle generation failed.');\n                return _context2.abrupt(\"return\", {\n                  success: false,\n                  error: mapErrorToMessage(_context2.t5)\n                });\n\n              case 175:\n                if (hasErrors) {\n                  spinner.fail('Localized bundle generation failed.');\n                } else {\n                  spinner.succeed('Localized bundle generation complete.');\n                }\n\n                if (!hasErrors) {\n                  _context2.next = 178;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", {\n                  success: false\n                });\n\n              case 178:\n                _context2.prev = 178;\n                executor.stop();\n                return _context2.finish(178);\n\n              case 181:\n                _loop = function _loop() {\n                  var result = _processResults[_i2];\n                  var chunk = (_a = webpackStats.chunks) === null || _a === void 0 ? void 0 : _a.find(function (chunk) {\n                    return chunk.id.toString() === result.name;\n                  });\n\n                  if (result.original) {\n                    bundleInfoStats.push(generateBundleInfoStats(result.original, chunk, 'modern'));\n                  }\n\n                  if (result.downlevel) {\n                    bundleInfoStats.push(generateBundleInfoStats(result.downlevel, chunk, 'legacy'));\n                  }\n                };\n\n                for (_i2 = 0, _processResults = processResults; _i2 < _processResults.length; _i2++) {\n                  _loop();\n                }\n\n                unprocessedChunks = ((_b = webpackStats.chunks) === null || _b === void 0 ? void 0 : _b.filter(function (chunk) {\n                  return !processResults.find(function (result) {\n                    return chunk.id.toString() === result.name;\n                  });\n                })) || [];\n                _iterator6 = _createForOfIteratorHelper(unprocessedChunks);\n\n                try {\n                  _loop2 = function _loop2() {\n                    var chunk = _step6.value;\n                    var asset = (_c = webpackStats.assets) === null || _c === void 0 ? void 0 : _c.find(function (a) {\n                      return a.name === chunk.files[0];\n                    });\n                    bundleInfoStats.push(stats_1.generateBundleStats(_objectSpread(_objectSpread({}, chunk), {}, {\n                      size: asset === null || asset === void 0 ? void 0 : asset.size\n                    })));\n                  };\n\n                  for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n                    _loop2();\n                  } // Check for budget errors and display them to the user.\n\n                } catch (err) {\n                  _iterator6.e(err);\n                } finally {\n                  _iterator6.f();\n                }\n\n                budgets = options.budgets || [];\n                budgetFailures = bundle_calculator_1.checkBudgets(budgets, webpackStats, processResults);\n                _iterator7 = _createForOfIteratorHelper(budgetFailures);\n                _context2.prev = 189;\n\n                _iterator7.s();\n\n              case 191:\n                if ((_step7 = _iterator7.n()).done) {\n                  _context2.next = 203;\n                  break;\n                }\n\n                _step7$value = _step7.value, severity = _step7$value.severity, message = _step7$value.message;\n                _context2.t6 = severity;\n                _context2.next = _context2.t6 === bundle_calculator_1.ThresholdSeverity.Warning ? 196 : _context2.t6 === bundle_calculator_1.ThresholdSeverity.Error ? 198 : 200;\n                break;\n\n              case 196:\n                webpackStats.warnings.push(message);\n                return _context2.abrupt(\"break\", 201);\n\n              case 198:\n                webpackStats.errors.push(message);\n                return _context2.abrupt(\"break\", 201);\n\n              case 200:\n                assertNever(severity);\n\n              case 201:\n                _context2.next = 191;\n                break;\n\n              case 203:\n                _context2.next = 208;\n                break;\n\n              case 205:\n                _context2.prev = 205;\n                _context2.t7 = _context2[\"catch\"](189);\n\n                _iterator7.e(_context2.t7);\n\n              case 208:\n                _context2.prev = 208;\n\n                _iterator7.f();\n\n                return _context2.finish(208);\n\n              case 211:\n                _context2.next = 221;\n                break;\n\n              case 213:\n                files = emittedFiles.filter(function (x) {\n                  return x.name !== 'polyfills-es5';\n                });\n                noModuleFiles = emittedFiles.filter(function (x) {\n                  return x.name === 'polyfills-es5';\n                });\n\n                if (!i18n.shouldInline) {\n                  _context2.next = 221;\n                  break;\n                }\n\n                _context2.next = 218;\n                return i18n_inlining_1.i18nInlineEmittedFiles(context, emittedFiles, i18n, baseOutputPath, Array.from(outputPaths.values()), scriptsEntryPointName, // tslint:disable-next-line: no-non-null-assertion\n                webpackStats.outputPath, target <= typescript_1.ScriptTarget.ES5, options.i18nMissingTranslation);\n\n              case 218:\n                _success2 = _context2.sent;\n\n                if (_success2) {\n                  _context2.next = 221;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", {\n                  success: false\n                });\n\n              case 221:\n                if (!(!options.watch && ((_d = options.assets) === null || _d === void 0 ? void 0 : _d.length))) {\n                  _context2.next = 233;\n                  break;\n                }\n\n                spinner.start('Copying assets...');\n                _context2.prev = 223;\n                _context2.next = 226;\n                return copy_assets_1.copyAssets(utils_1.normalizeAssetPatterns(options.assets, new core_1.virtualFs.SyncDelegateHost(host), root, core_1.normalize(projectRoot), projectSourceRoot === undefined ? undefined : core_1.normalize(projectSourceRoot)), Array.from(outputPaths.values()), context.workspaceRoot);\n\n              case 226:\n                spinner.succeed('Copying assets complete.');\n                _context2.next = 233;\n                break;\n\n              case 229:\n                _context2.prev = 229;\n                _context2.t8 = _context2[\"catch\"](223);\n                spinner.fail(color_1.colors.redBright('Copying of assets failed.'));\n                return _context2.abrupt(\"return\", {\n                  success: false,\n                  error: 'Unable to copy assets: ' + _context2.t8.message\n                });\n\n              case 233:\n                if (!success) {\n                  _context2.next = 288;\n                  break;\n                }\n\n                if (!options.index) {\n                  _context2.next = 261;\n                  break;\n                }\n\n                spinner.start('Generating index html...');\n                _iterator8 = _createForOfIteratorHelper(outputPaths.entries());\n                _context2.prev = 237;\n\n                _iterator8.s();\n\n              case 239:\n                if ((_step8 = _iterator8.n()).done) {\n                  _context2.next = 253;\n                  break;\n                }\n\n                _step8$value = _slicedToArray(_step8.value, 2), locale = _step8$value[0], outputPath = _step8$value[1];\n                _context2.prev = 241;\n                _context2.next = 244;\n                return write_index_html_1.writeIndexHtml({\n                  host: host,\n                  outputPath: path.join(outputPath, webpack_browser_config_1.getIndexOutputFile(options.index)),\n                  indexPath: path.join(context.workspaceRoot, webpack_browser_config_1.getIndexInputFile(options.index)),\n                  files: files,\n                  noModuleFiles: noModuleFiles,\n                  moduleFiles: moduleFiles,\n                  baseHref: getLocaleBaseHref(i18n, locale) || options.baseHref,\n                  deployUrl: options.deployUrl,\n                  sri: options.subresourceIntegrity,\n                  scripts: options.scripts,\n                  styles: options.styles,\n                  postTransforms: indexTransforms,\n                  crossOrigin: options.crossOrigin,\n                  // i18nLocale is used when Ivy is disabled\n                  lang: locale || options.i18nLocale\n                });\n\n              case 244:\n                _context2.next = 250;\n                break;\n\n              case 246:\n                _context2.prev = 246;\n                _context2.t9 = _context2[\"catch\"](241);\n                spinner.fail('Index html generation failed.');\n                return _context2.abrupt(\"return\", {\n                  success: false,\n                  error: mapErrorToMessage(_context2.t9)\n                });\n\n              case 250:\n                spinner.succeed('Index html generation complete.');\n\n              case 251:\n                _context2.next = 239;\n                break;\n\n              case 253:\n                _context2.next = 258;\n                break;\n\n              case 255:\n                _context2.prev = 255;\n                _context2.t10 = _context2[\"catch\"](237);\n\n                _iterator8.e(_context2.t10);\n\n              case 258:\n                _context2.prev = 258;\n\n                _iterator8.f();\n\n                return _context2.finish(258);\n\n              case 261:\n                if (!options.serviceWorker) {\n                  _context2.next = 288;\n                  break;\n                }\n\n                spinner.start('Generating service worker...');\n                _iterator9 = _createForOfIteratorHelper(outputPaths.entries());\n                _context2.prev = 264;\n\n                _iterator9.s();\n\n              case 266:\n                if ((_step9 = _iterator9.n()).done) {\n                  _context2.next = 280;\n                  break;\n                }\n\n                _step9$value = _slicedToArray(_step9.value, 2), _locale = _step9$value[0], _outputPath = _step9$value[1];\n                _context2.prev = 268;\n                _context2.next = 271;\n                return service_worker_1.augmentAppWithServiceWorker(host, root, core_1.normalize(projectRoot), core_1.normalize(_outputPath), getLocaleBaseHref(i18n, _locale) || options.baseHref || '/', options.ngswConfigPath);\n\n              case 271:\n                _context2.next = 277;\n                break;\n\n              case 273:\n                _context2.prev = 273;\n                _context2.t11 = _context2[\"catch\"](268);\n                spinner.fail('Service worker generation failed.');\n                return _context2.abrupt(\"return\", {\n                  success: false,\n                  error: mapErrorToMessage(_context2.t11)\n                });\n\n              case 277:\n                spinner.succeed('Service worker generation complete.');\n\n              case 278:\n                _context2.next = 266;\n                break;\n\n              case 280:\n                _context2.next = 285;\n                break;\n\n              case 282:\n                _context2.prev = 282;\n                _context2.t12 = _context2[\"catch\"](264);\n\n                _iterator9.e(_context2.t12);\n\n              case 285:\n                _context2.prev = 285;\n\n                _iterator9.f();\n\n                return _context2.finish(285);\n\n              case 288:\n                stats_1.webpackStatsLogger(context.logger, webpackStats, config, bundleInfoStats);\n                return _context2.abrupt(\"return\", {\n                  success: !stats_1.statsHasErrors(webpackStats)\n                });\n\n              case 290:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[35, 71, 74, 77], [81,, 178, 181], [85, 102, 106, 116], [107,, 111, 115], [131, 171], [134, 153, 157, 167], [158,, 162, 166], [189, 205, 208, 211], [223, 229], [237, 255, 258, 261], [241, 246], [264, 282, 285, 288], [268, 273]]);\n      }));\n\n      return function (_x7) {\n        return _ref3.apply(this, arguments);\n      };\n    }()), operators_1.map(function (event) {\n      return _objectSpread(_objectSpread({}, event), {}, {\n        baseOutputPath: baseOutputPath,\n        outputPath: baseOutputPath,\n        outputPaths: outputPaths && Array.from(outputPaths.values()) || [baseOutputPath]\n      });\n    }));\n  }));\n\n  function getLocaleBaseHref(i18n, locale) {\n    var _a, _b;\n\n    if (i18n.locales[locale] && ((_a = i18n.locales[locale]) === null || _a === void 0 ? void 0 : _a.baseHref) !== '') {\n      return utils_1.urlJoin(options.baseHref || '', (_b = i18n.locales[locale].baseHref) !== null && _b !== void 0 ? _b : \"/\".concat(locale, \"/\"));\n    }\n\n    return undefined;\n  }\n}\n\nexports.buildWebpackBrowser = buildWebpackBrowser;\n\nfunction mapErrorToMessage(error) {\n  if (error instanceof Error) {\n    return error.message;\n  }\n\n  if (typeof error === 'string') {\n    return error;\n  }\n\n  return undefined;\n}\n\nfunction assertNever(input) {\n  throw new Error(\"Unexpected call to assertNever() with input: \".concat(JSON.stringify(input, null\n  /* replacer */\n  , 4\n  /* tabSize */\n  )));\n}\n\nfunction generateBundleInfoStats(bundle, chunk, chunkType) {\n  return stats_1.generateBundleStats({\n    size: bundle.size,\n    files: bundle.map ? [bundle.filename, bundle.map.filename] : [bundle.filename],\n    names: chunk === null || chunk === void 0 ? void 0 : chunk.names,\n    entry: !!(chunk === null || chunk === void 0 ? void 0 : chunk.names.includes('runtime')),\n    initial: !!(chunk === null || chunk === void 0 ? void 0 : chunk.initial),\n    rendered: true,\n    chunkType: chunkType\n  });\n}\n\nexports.default = architect_1.createBuilder(buildWebpackBrowser);","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@angular-devkit/build-angular/src/browser/index.js"],"names":["Object","defineProperty","exports","value","buildWebpackBrowser","getCompilerConfig","getAnalyticsConfig","architect_1","require","build_webpack_1","core_1","node_1","fs","path","rxjs_1","operators_1","typescript_1","utils_1","action_executor_1","bundle_calculator_1","cache_path_1","color_1","copy_assets_1","environment_options_1","i18n_inlining_1","transforms_1","write_index_html_1","output_paths_1","read_tsconfig_1","service_worker_1","spinner_1","version_1","webpack_browser_config_1","webpack_version_1","configs_1","analytics_1","async_chunks_1","stats_1","cacheDownlevelPath","cachingDisabled","undefined","findCachePath","wco","context","analytics","category","builder","builderName","split","plugins","NgBuildAnalyticsPlugin","projectRoot","tsConfig","options","enableIvy","buildOptions","main","polyfills","aot","getAotConfig","getNonAotConfig","initialize","host","differentialLoadingMode","webpackConfigurationTransform","originalOutputPath","outputPath","adjustedOptions","watch","assets","extractLicenses","isWebpackFiveOrHigher","logger","warn","generateI18nBrowserWebpackConfigFromContext","getCommonConfig","getBrowserConfig","getStylesConfig","getStatsConfig","webWorkerTsConfig","getWorkerConfig","config","projectSourceRoot","i18n","_a","length","_b","normalizeAssetPatterns","virtualFs","SyncDelegateHost","normalize","workspaceRoot","forEach","output","startsWith","Error","transformedConfig","deleteOutputPath","deleteOutputDir","transforms","NodeJsSyncHost","root","projectName","target","project","baseOutputPath","resolve","outputPaths","assertCompatibleAngularVersion","from","getProjectMetadata","pipe","switchMap","projectMetadata","sysProjectRoot","getSystemPath","readTsconfig","compilerOptions","ScriptTarget","ES5","buildBrowserFeatures","BuildBrowserFeatures","isDifferentialLoadingNeeded","ES2015","tags","stripIndent","hasIE9","supportedBrowsers","includes","hasIE10","browsers","webpackConfiguration","normalizedOptimization","normalizeOptimization","optimization","indexTransforms","getHtmlTransforms","indexHtml","runWebpack","webpackFactory","logging","stats","verbose","info","toString","concatMap","buildEvent","spinner","Spinner","enabled","progress","webpackRawStats","webpackStats","success","emittedFiles","extraEntryPoints","normalizeExtraEntryPoints","styles","concat","scripts","chunks","markAsyncChunksNonInitial","statsHasWarnings","statsWarningsToString","colors","statsHasErrors","error","statsErrorsToString","bundleInfoStats","ensureOutputPaths","scriptsEntryPointName","map","x","bundleName","moduleFiles","files","filter","extension","name","shouldInline","i18nInlineEmittedFiles","Array","values","i18nMissingTranslation","noModuleFiles","sourceMapOptions","normalizeSourceMaps","sourceMap","actionOptions","optimize","sourceMaps","hiddenSourceMaps","hidden","vendorSourceMaps","vendor","integrityAlgorithm","subresourceIntegrity","actions","seen","Set","file","asset","endsWith","workerReplacements","push","replace","has","add","mainChunkId","id","es5Polyfills","filename","join","code","readFileSync","unlinkSync","_e","es2015Polyfills","runtime","ignoreOriginal","optimizeOnly","newFilename","processActions","processResults","action","processRuntimeAction","replacements","executor","BundleActionExecutor","cachePath","start","processAll","result","runtimeOptions","runtimeData","Promise","then","m","process","succeed","inlineActions","processedFiles","original","basename","es5","missingTranslation","setLocale","downlevel","hasErrors","inlineAll","count","diagnostics","diagnostic","stop","type","message","copyAssets","glob","input","ignore","f","relative","fail","mapErrorToMessage","chunk","find","generateBundleInfoStats","unprocessedChunks","_c","a","generateBundleStats","size","budgets","budgetFailures","checkBudgets","severity","ThresholdSeverity","Warning","warnings","errors","assertNever","_d","redBright","index","entries","locale","writeIndexHtml","getIndexOutputFile","indexPath","getIndexInputFile","baseHref","getLocaleBaseHref","deployUrl","sri","postTransforms","crossOrigin","lang","i18nLocale","serviceWorker","augmentAppWithServiceWorker","ngswConfigPath","webpackStatsLogger","event","locales","urlJoin","JSON","stringify","bundle","chunkType","names","entry","initial","rendered","default","createBuilder"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildWebpackBrowser = exports.getCompilerConfig = exports.getAnalyticsConfig = void 0;\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst architect_1 = require(\"@angular-devkit/architect\");\nconst build_webpack_1 = require(\"@angular-devkit/build-webpack\");\nconst core_1 = require(\"@angular-devkit/core\");\nconst node_1 = require(\"@angular-devkit/core/node\");\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst typescript_1 = require(\"typescript\");\nconst utils_1 = require(\"../utils\");\nconst action_executor_1 = require(\"../utils/action-executor\");\nconst bundle_calculator_1 = require(\"../utils/bundle-calculator\");\nconst cache_path_1 = require(\"../utils/cache-path\");\nconst color_1 = require(\"../utils/color\");\nconst copy_assets_1 = require(\"../utils/copy-assets\");\nconst environment_options_1 = require(\"../utils/environment-options\");\nconst i18n_inlining_1 = require(\"../utils/i18n-inlining\");\nconst transforms_1 = require(\"../utils/index-file/transforms\");\nconst write_index_html_1 = require(\"../utils/index-file/write-index-html\");\nconst output_paths_1 = require(\"../utils/output-paths\");\nconst read_tsconfig_1 = require(\"../utils/read-tsconfig\");\nconst service_worker_1 = require(\"../utils/service-worker\");\nconst spinner_1 = require(\"../utils/spinner\");\nconst version_1 = require(\"../utils/version\");\nconst webpack_browser_config_1 = require(\"../utils/webpack-browser-config\");\nconst webpack_version_1 = require(\"../utils/webpack-version\");\nconst configs_1 = require(\"../webpack/configs\");\nconst analytics_1 = require(\"../webpack/plugins/analytics\");\nconst async_chunks_1 = require(\"../webpack/utils/async-chunks\");\nconst stats_1 = require(\"../webpack/utils/stats\");\nconst cacheDownlevelPath = environment_options_1.cachingDisabled ? undefined : cache_path_1.findCachePath('angular-build-dl');\nfunction getAnalyticsConfig(wco, context) {\n    if (context.analytics) {\n        // If there's analytics, add our plugin. Otherwise no need to slow down the build.\n        let category = 'build';\n        if (context.builder) {\n            // We already vetted that this is a \"safe\" package, otherwise the analytics would be noop.\n            category =\n                context.builder.builderName.split(':')[1] || context.builder.builderName || 'build';\n        }\n        // The category is the builder name if it's an angular builder.\n        return {\n            plugins: [new analytics_1.NgBuildAnalyticsPlugin(wco.projectRoot, context.analytics, category, !!wco.tsConfig.options.enableIvy)],\n        };\n    }\n    return {};\n}\nexports.getAnalyticsConfig = getAnalyticsConfig;\nfunction getCompilerConfig(wco) {\n    if (wco.buildOptions.main || wco.buildOptions.polyfills) {\n        return wco.buildOptions.aot ? configs_1.getAotConfig(wco) : configs_1.getNonAotConfig(wco);\n    }\n    return {};\n}\nexports.getCompilerConfig = getCompilerConfig;\nasync function initialize(options, context, host, differentialLoadingMode, webpackConfigurationTransform) {\n    var _a, _b;\n    const originalOutputPath = options.outputPath;\n    // Assets are processed directly by the builder except when watching\n    const adjustedOptions = options.watch ? options : { ...options, assets: [] };\n    // TODO_WEBPACK_5: Investigate build/serve issues with the `license-webpack-plugin` package\n    if (adjustedOptions.extractLicenses && webpack_version_1.isWebpackFiveOrHigher()) {\n        adjustedOptions.extractLicenses = false;\n        context.logger.warn('Warning: License extraction is currently disabled when using Webpack 5. ' +\n            'This is temporary and will be corrected in a future update.');\n    }\n    const { config, projectRoot, projectSourceRoot, i18n, } = await webpack_browser_config_1.generateI18nBrowserWebpackConfigFromContext(adjustedOptions, context, wco => [\n        configs_1.getCommonConfig(wco),\n        configs_1.getBrowserConfig(wco),\n        configs_1.getStylesConfig(wco),\n        configs_1.getStatsConfig(wco),\n        getAnalyticsConfig(wco, context),\n        getCompilerConfig(wco),\n        wco.buildOptions.webWorkerTsConfig ? configs_1.getWorkerConfig(wco) : {},\n    ], host, { differentialLoadingMode });\n    // Validate asset option values if processed directly\n    if (((_a = options.assets) === null || _a === void 0 ? void 0 : _a.length) && !((_b = adjustedOptions.assets) === null || _b === void 0 ? void 0 : _b.length)) {\n        utils_1.normalizeAssetPatterns(options.assets, new core_1.virtualFs.SyncDelegateHost(host), core_1.normalize(context.workspaceRoot), core_1.normalize(projectRoot), projectSourceRoot === undefined ? undefined : core_1.normalize(projectSourceRoot)).forEach(({ output }) => {\n            if (output.startsWith('..')) {\n                throw new Error('An asset cannot be written to a location outside of the output path.');\n            }\n        });\n    }\n    let transformedConfig;\n    if (webpackConfigurationTransform) {\n        transformedConfig = await webpackConfigurationTransform(config);\n    }\n    if (options.deleteOutputPath) {\n        utils_1.deleteOutputDir(context.workspaceRoot, originalOutputPath);\n    }\n    return { config: transformedConfig || config, projectRoot, projectSourceRoot, i18n };\n}\n// tslint:disable-next-line: no-big-function\nfunction buildWebpackBrowser(options, context, transforms = {}) {\n    var _a;\n    const host = new node_1.NodeJsSyncHost();\n    const root = core_1.normalize(context.workspaceRoot);\n    const projectName = (_a = context.target) === null || _a === void 0 ? void 0 : _a.project;\n    if (!projectName) {\n        throw new Error('The builder requires a target.');\n    }\n    const baseOutputPath = path.resolve(context.workspaceRoot, options.outputPath);\n    let outputPaths;\n    // Check Angular version.\n    version_1.assertCompatibleAngularVersion(context.workspaceRoot, context.logger);\n    return rxjs_1.from(context.getProjectMetadata(projectName))\n        .pipe(operators_1.switchMap(async (projectMetadata) => {\n        var _a;\n        const sysProjectRoot = core_1.getSystemPath(core_1.resolve(core_1.normalize(context.workspaceRoot), core_1.normalize((_a = projectMetadata.root) !== null && _a !== void 0 ? _a : '')));\n        const { options: compilerOptions } = read_tsconfig_1.readTsconfig(options.tsConfig, context.workspaceRoot);\n        const target = compilerOptions.target || typescript_1.ScriptTarget.ES5;\n        const buildBrowserFeatures = new utils_1.BuildBrowserFeatures(sysProjectRoot);\n        const isDifferentialLoadingNeeded = buildBrowserFeatures.isDifferentialLoadingNeeded(target);\n        const differentialLoadingMode = !options.watch && isDifferentialLoadingNeeded;\n        if (target > typescript_1.ScriptTarget.ES2015 && isDifferentialLoadingNeeded) {\n            context.logger.warn(core_1.tags.stripIndent `\n          Warning: Using differential loading with targets ES5 and ES2016 or higher may\n          cause problems. Browsers with support for ES2015 will load the ES2016+ scripts\n          referenced with script[type=\"module\"] but they may not support ES2016+ syntax.\n        `);\n        }\n        const hasIE9 = buildBrowserFeatures.supportedBrowsers.includes('ie 9');\n        const hasIE10 = buildBrowserFeatures.supportedBrowsers.includes('ie 10');\n        if (hasIE9 || hasIE10) {\n            const browsers = (hasIE9 ? 'IE 9' + (hasIE10 ? ' & ' : '') : '') + (hasIE10 ? 'IE 10' : '');\n            context.logger.warn(`Warning: Support was requested for ${browsers} in the project's browserslist configuration. ` +\n                (hasIE9 && hasIE10 ? 'These browsers are' : 'This browser is') +\n                ' no longer officially supported with Angular v11 and higher.' +\n                '\\nFor additional information: https://v10.angular.io/guide/deprecations#ie-9-10-and-mobile');\n        }\n        return {\n            ...(await initialize(options, context, host, differentialLoadingMode, transforms.webpackConfiguration)),\n            buildBrowserFeatures,\n            isDifferentialLoadingNeeded,\n            target,\n        };\n    }), \n    // tslint:disable-next-line: no-big-function\n    operators_1.switchMap(({ config, projectRoot, projectSourceRoot, i18n, buildBrowserFeatures, isDifferentialLoadingNeeded, target }) => {\n        const normalizedOptimization = utils_1.normalizeOptimization(options.optimization);\n        const indexTransforms = transforms_1.getHtmlTransforms(normalizedOptimization, buildBrowserFeatures, transforms.indexHtml);\n        return build_webpack_1.runWebpack(config, context, {\n            webpackFactory: require('webpack'),\n            logging: transforms.logging || ((stats, config) => {\n                if (options.verbose) {\n                    context.logger.info(stats.toString(config.stats));\n                }\n            }),\n        }).pipe(\n        // tslint:disable-next-line: no-big-function\n        operators_1.concatMap(async (buildEvent) => {\n            var _a, _b, _c, _d;\n            const spinner = new spinner_1.Spinner();\n            spinner.enabled = options.progress !== false;\n            const { webpackStats: webpackRawStats, success, emittedFiles = [] } = buildEvent;\n            if (!webpackRawStats) {\n                throw new Error('Webpack stats build result is required.');\n            }\n            // Fix incorrectly set `initial` value on chunks.\n            const extraEntryPoints = configs_1.normalizeExtraEntryPoints(options.styles || [], 'styles')\n                .concat(configs_1.normalizeExtraEntryPoints(options.scripts || [], 'scripts'));\n            const webpackStats = {\n                ...webpackRawStats,\n                chunks: async_chunks_1.markAsyncChunksNonInitial(webpackRawStats, extraEntryPoints),\n            };\n            if (!success) {\n                // If using bundle downleveling then there is only one build\n                // If it fails show any diagnostic messages and bail\n                if (stats_1.statsHasWarnings(webpackStats)) {\n                    context.logger.warn(stats_1.statsWarningsToString(webpackStats, { colors: true }));\n                }\n                if (stats_1.statsHasErrors(webpackStats)) {\n                    context.logger.error(stats_1.statsErrorsToString(webpackStats, { colors: true }));\n                }\n                return { success };\n            }\n            else {\n                const bundleInfoStats = [];\n                outputPaths = output_paths_1.ensureOutputPaths(baseOutputPath, i18n);\n                let noModuleFiles;\n                let moduleFiles;\n                let files;\n                const scriptsEntryPointName = configs_1.normalizeExtraEntryPoints(options.scripts || [], 'scripts').map(x => x.bundleName);\n                if (isDifferentialLoadingNeeded && options.watch) {\n                    moduleFiles = emittedFiles;\n                    files = moduleFiles.filter(x => x.extension === '.css' || (x.name && scriptsEntryPointName.includes(x.name)));\n                    if (i18n.shouldInline) {\n                        const success = await i18n_inlining_1.i18nInlineEmittedFiles(context, emittedFiles, i18n, baseOutputPath, Array.from(outputPaths.values()), scriptsEntryPointName, \n                        // tslint:disable-next-line: no-non-null-assertion\n                        webpackStats.outputPath, target <= typescript_1.ScriptTarget.ES5, options.i18nMissingTranslation);\n                        if (!success) {\n                            return { success: false };\n                        }\n                    }\n                }\n                else if (isDifferentialLoadingNeeded) {\n                    moduleFiles = [];\n                    noModuleFiles = [];\n                    // Common options for all bundle process actions\n                    const sourceMapOptions = utils_1.normalizeSourceMaps(options.sourceMap || false);\n                    const actionOptions = {\n                        optimize: normalizedOptimization.scripts,\n                        sourceMaps: sourceMapOptions.scripts,\n                        hiddenSourceMaps: sourceMapOptions.hidden,\n                        vendorSourceMaps: sourceMapOptions.vendor,\n                        integrityAlgorithm: options.subresourceIntegrity ? 'sha384' : undefined,\n                    };\n                    let mainChunkId;\n                    const actions = [];\n                    let workerReplacements;\n                    const seen = new Set();\n                    for (const file of emittedFiles) {\n                        // Assets are not processed nor injected into the index\n                        if (file.asset) {\n                            // WorkerPlugin adds worker files to assets\n                            if (file.file.endsWith('.worker.js')) {\n                                if (!workerReplacements) {\n                                    workerReplacements = [];\n                                }\n                                workerReplacements.push([\n                                    file.file,\n                                    file.file.replace(/\\-(es20\\d{2}|esnext)/, '-es5'),\n                                ]);\n                            }\n                            else {\n                                continue;\n                            }\n                        }\n                        // Scripts and non-javascript files are not processed\n                        if (file.extension !== '.js' ||\n                            (file.name && scriptsEntryPointName.includes(file.name))) {\n                            if (files === undefined) {\n                                files = [];\n                            }\n                            files.push(file);\n                            continue;\n                        }\n                        // Ignore already processed files; emittedFiles can contain duplicates\n                        if (seen.has(file.file)) {\n                            continue;\n                        }\n                        seen.add(file.file);\n                        if (file.name === 'vendor' || (!mainChunkId && file.name === 'main')) {\n                            // tslint:disable-next-line: no-non-null-assertion\n                            mainChunkId = file.id.toString();\n                        }\n                        // All files at this point except ES5 polyfills are module scripts\n                        const es5Polyfills = file.file.startsWith('polyfills-es5');\n                        if (!es5Polyfills) {\n                            moduleFiles.push(file);\n                        }\n                        // Retrieve the content/map for the file\n                        // NOTE: Additional future optimizations will read directly from memory\n                        // tslint:disable-next-line: no-non-null-assertion\n                        let filename = path.join(webpackStats.outputPath, file.file);\n                        const code = fs.readFileSync(filename, 'utf8');\n                        let map;\n                        if (actionOptions.sourceMaps) {\n                            try {\n                                map = fs.readFileSync(filename + '.map', 'utf8');\n                                if (es5Polyfills) {\n                                    fs.unlinkSync(filename + '.map');\n                                }\n                            }\n                            catch (_e) { }\n                        }\n                        if (es5Polyfills) {\n                            fs.unlinkSync(filename);\n                            filename = filename.replace(/\\-es20\\d{2}/, '');\n                        }\n                        const es2015Polyfills = file.file.startsWith('polyfills-es20');\n                        // Record the bundle processing action\n                        // The runtime chunk gets special processing for lazy loaded files\n                        actions.push({\n                            ...actionOptions,\n                            filename,\n                            code,\n                            map,\n                            // id is always present for non-assets\n                            // tslint:disable-next-line: no-non-null-assertion\n                            name: file.id,\n                            runtime: file.file.startsWith('runtime'),\n                            ignoreOriginal: es5Polyfills,\n                            optimizeOnly: es2015Polyfills,\n                        });\n                        // ES2015 polyfills are only optimized; optimization check was performed above\n                        if (es2015Polyfills) {\n                            continue;\n                        }\n                        // Add the newly created ES5 bundles to the index as nomodule scripts\n                        const newFilename = es5Polyfills\n                            ? file.file.replace(/\\-es20\\d{2}/, '')\n                            : file.file.replace(/\\-(es20\\d{2}|esnext)/, '-es5');\n                        noModuleFiles.push({ ...file, file: newFilename });\n                    }\n                    const processActions = [];\n                    let processRuntimeAction;\n                    const processResults = [];\n                    for (const action of actions) {\n                        // If SRI is enabled always process the runtime bundle\n                        // Lazy route integrity values are stored in the runtime bundle\n                        if (action.integrityAlgorithm && action.runtime) {\n                            processRuntimeAction = action;\n                        }\n                        else {\n                            processActions.push({ replacements: workerReplacements, ...action });\n                        }\n                    }\n                    const executor = new action_executor_1.BundleActionExecutor({ cachePath: cacheDownlevelPath, i18n }, options.subresourceIntegrity ? 'sha384' : undefined);\n                    // Execute the bundle processing actions\n                    try {\n                        spinner.start('Generating ES5 bundles for differential loading...');\n                        for await (const result of executor.processAll(processActions)) {\n                            processResults.push(result);\n                        }\n                        // Runtime must be processed after all other files\n                        if (processRuntimeAction) {\n                            const runtimeOptions = {\n                                ...processRuntimeAction,\n                                runtimeData: processResults,\n                                supportedBrowsers: buildBrowserFeatures.supportedBrowsers,\n                            };\n                            processResults.push(await Promise.resolve().then(() => require('../utils/process-bundle')).then(m => m.process(runtimeOptions)));\n                        }\n                        spinner.succeed('ES5 bundle generation complete.');\n                        if (i18n.shouldInline) {\n                            spinner.start('Generating localized bundles...');\n                            const inlineActions = [];\n                            const processedFiles = new Set();\n                            for (const result of processResults) {\n                                if (result.original) {\n                                    inlineActions.push({\n                                        filename: path.basename(result.original.filename),\n                                        code: fs.readFileSync(result.original.filename, 'utf8'),\n                                        map: result.original.map &&\n                                            fs.readFileSync(result.original.map.filename, 'utf8'),\n                                        outputPath: baseOutputPath,\n                                        es5: false,\n                                        missingTranslation: options.i18nMissingTranslation,\n                                        setLocale: result.name === mainChunkId,\n                                    });\n                                    processedFiles.add(result.original.filename);\n                                    if (result.original.map) {\n                                        processedFiles.add(result.original.map.filename);\n                                    }\n                                }\n                                if (result.downlevel) {\n                                    inlineActions.push({\n                                        filename: path.basename(result.downlevel.filename),\n                                        code: fs.readFileSync(result.downlevel.filename, 'utf8'),\n                                        map: result.downlevel.map &&\n                                            fs.readFileSync(result.downlevel.map.filename, 'utf8'),\n                                        outputPath: baseOutputPath,\n                                        es5: true,\n                                        missingTranslation: options.i18nMissingTranslation,\n                                        setLocale: result.name === mainChunkId,\n                                    });\n                                    processedFiles.add(result.downlevel.filename);\n                                    if (result.downlevel.map) {\n                                        processedFiles.add(result.downlevel.map.filename);\n                                    }\n                                }\n                            }\n                            let hasErrors = false;\n                            try {\n                                for await (const result of executor.inlineAll(inlineActions)) {\n                                    if (options.verbose) {\n                                        context.logger.info(`Localized \"${result.file}\" [${result.count} translation(s)].`);\n                                    }\n                                    for (const diagnostic of result.diagnostics) {\n                                        spinner.stop();\n                                        if (diagnostic.type === 'error') {\n                                            hasErrors = true;\n                                            context.logger.error(diagnostic.message);\n                                        }\n                                        else {\n                                            context.logger.warn(diagnostic.message);\n                                        }\n                                        spinner.start();\n                                    }\n                                }\n                                // Copy any non-processed files into the output locations\n                                await copy_assets_1.copyAssets([\n                                    {\n                                        glob: '**/*',\n                                        // tslint:disable-next-line: no-non-null-assertion\n                                        input: webpackStats.outputPath,\n                                        output: '',\n                                        ignore: [...processedFiles].map(f => \n                                        // tslint:disable-next-line: no-non-null-assertion\n                                        path.relative(webpackStats.outputPath, f)),\n                                    },\n                                ], Array.from(outputPaths.values()), '');\n                            }\n                            catch (err) {\n                                spinner.fail('Localized bundle generation failed.');\n                                return { success: false, error: mapErrorToMessage(err) };\n                            }\n                            if (hasErrors) {\n                                spinner.fail('Localized bundle generation failed.');\n                            }\n                            else {\n                                spinner.succeed('Localized bundle generation complete.');\n                            }\n                            if (hasErrors) {\n                                return { success: false };\n                            }\n                        }\n                    }\n                    finally {\n                        executor.stop();\n                    }\n                    for (const result of processResults) {\n                        const chunk = (_a = webpackStats.chunks) === null || _a === void 0 ? void 0 : _a.find((chunk) => chunk.id.toString() === result.name);\n                        if (result.original) {\n                            bundleInfoStats.push(generateBundleInfoStats(result.original, chunk, 'modern'));\n                        }\n                        if (result.downlevel) {\n                            bundleInfoStats.push(generateBundleInfoStats(result.downlevel, chunk, 'legacy'));\n                        }\n                    }\n                    const unprocessedChunks = ((_b = webpackStats.chunks) === null || _b === void 0 ? void 0 : _b.filter((chunk) => !processResults\n                        .find((result) => chunk.id.toString() === result.name))) || [];\n                    for (const chunk of unprocessedChunks) {\n                        const asset = (_c = webpackStats.assets) === null || _c === void 0 ? void 0 : _c.find(a => a.name === chunk.files[0]);\n                        bundleInfoStats.push(stats_1.generateBundleStats({ ...chunk, size: asset === null || asset === void 0 ? void 0 : asset.size }));\n                    }\n                    // Check for budget errors and display them to the user.\n                    const budgets = options.budgets || [];\n                    const budgetFailures = bundle_calculator_1.checkBudgets(budgets, webpackStats, processResults);\n                    for (const { severity, message } of budgetFailures) {\n                        switch (severity) {\n                            case bundle_calculator_1.ThresholdSeverity.Warning:\n                                webpackStats.warnings.push(message);\n                                break;\n                            case bundle_calculator_1.ThresholdSeverity.Error:\n                                webpackStats.errors.push(message);\n                                break;\n                            default:\n                                assertNever(severity);\n                        }\n                    }\n                }\n                else {\n                    files = emittedFiles.filter(x => x.name !== 'polyfills-es5');\n                    noModuleFiles = emittedFiles.filter(x => x.name === 'polyfills-es5');\n                    if (i18n.shouldInline) {\n                        const success = await i18n_inlining_1.i18nInlineEmittedFiles(context, emittedFiles, i18n, baseOutputPath, Array.from(outputPaths.values()), scriptsEntryPointName, \n                        // tslint:disable-next-line: no-non-null-assertion\n                        webpackStats.outputPath, target <= typescript_1.ScriptTarget.ES5, options.i18nMissingTranslation);\n                        if (!success) {\n                            return { success: false };\n                        }\n                    }\n                }\n                // Copy assets\n                if (!options.watch && ((_d = options.assets) === null || _d === void 0 ? void 0 : _d.length)) {\n                    spinner.start('Copying assets...');\n                    try {\n                        await copy_assets_1.copyAssets(utils_1.normalizeAssetPatterns(options.assets, new core_1.virtualFs.SyncDelegateHost(host), root, core_1.normalize(projectRoot), projectSourceRoot === undefined ? undefined : core_1.normalize(projectSourceRoot)), Array.from(outputPaths.values()), context.workspaceRoot);\n                        spinner.succeed('Copying assets complete.');\n                    }\n                    catch (err) {\n                        spinner.fail(color_1.colors.redBright('Copying of assets failed.'));\n                        return { success: false, error: 'Unable to copy assets: ' + err.message };\n                    }\n                }\n                if (success) {\n                    if (options.index) {\n                        spinner.start('Generating index html...');\n                        for (const [locale, outputPath] of outputPaths.entries()) {\n                            try {\n                                await write_index_html_1.writeIndexHtml({\n                                    host,\n                                    outputPath: path.join(outputPath, webpack_browser_config_1.getIndexOutputFile(options.index)),\n                                    indexPath: path.join(context.workspaceRoot, webpack_browser_config_1.getIndexInputFile(options.index)),\n                                    files,\n                                    noModuleFiles,\n                                    moduleFiles,\n                                    baseHref: getLocaleBaseHref(i18n, locale) || options.baseHref,\n                                    deployUrl: options.deployUrl,\n                                    sri: options.subresourceIntegrity,\n                                    scripts: options.scripts,\n                                    styles: options.styles,\n                                    postTransforms: indexTransforms,\n                                    crossOrigin: options.crossOrigin,\n                                    // i18nLocale is used when Ivy is disabled\n                                    lang: locale || options.i18nLocale,\n                                });\n                            }\n                            catch (error) {\n                                spinner.fail('Index html generation failed.');\n                                return { success: false, error: mapErrorToMessage(error) };\n                            }\n                            spinner.succeed('Index html generation complete.');\n                        }\n                    }\n                    if (options.serviceWorker) {\n                        spinner.start('Generating service worker...');\n                        for (const [locale, outputPath] of outputPaths.entries()) {\n                            try {\n                                await service_worker_1.augmentAppWithServiceWorker(host, root, core_1.normalize(projectRoot), core_1.normalize(outputPath), getLocaleBaseHref(i18n, locale) || options.baseHref || '/', options.ngswConfigPath);\n                            }\n                            catch (error) {\n                                spinner.fail('Service worker generation failed.');\n                                return { success: false, error: mapErrorToMessage(error) };\n                            }\n                            spinner.succeed('Service worker generation complete.');\n                        }\n                    }\n                }\n                stats_1.webpackStatsLogger(context.logger, webpackStats, config, bundleInfoStats);\n                return { success: !stats_1.statsHasErrors(webpackStats) };\n            }\n        }), operators_1.map(event => ({\n            ...event,\n            baseOutputPath,\n            outputPath: baseOutputPath,\n            outputPaths: outputPaths && Array.from(outputPaths.values()) || [baseOutputPath],\n        })));\n    }));\n    function getLocaleBaseHref(i18n, locale) {\n        var _a, _b;\n        if (i18n.locales[locale] && ((_a = i18n.locales[locale]) === null || _a === void 0 ? void 0 : _a.baseHref) !== '') {\n            return utils_1.urlJoin(options.baseHref || '', (_b = i18n.locales[locale].baseHref) !== null && _b !== void 0 ? _b : `/${locale}/`);\n        }\n        return undefined;\n    }\n}\nexports.buildWebpackBrowser = buildWebpackBrowser;\nfunction mapErrorToMessage(error) {\n    if (error instanceof Error) {\n        return error.message;\n    }\n    if (typeof error === 'string') {\n        return error;\n    }\n    return undefined;\n}\nfunction assertNever(input) {\n    throw new Error(`Unexpected call to assertNever() with input: ${JSON.stringify(input, null /* replacer */, 4 /* tabSize */)}`);\n}\nfunction generateBundleInfoStats(bundle, chunk, chunkType) {\n    return stats_1.generateBundleStats({\n        size: bundle.size,\n        files: bundle.map ? [bundle.filename, bundle.map.filename] : [bundle.filename],\n        names: chunk === null || chunk === void 0 ? void 0 : chunk.names,\n        entry: !!(chunk === null || chunk === void 0 ? void 0 : chunk.names.includes('runtime')),\n        initial: !!(chunk === null || chunk === void 0 ? void 0 : chunk.initial),\n        rendered: true,\n        chunkType,\n    });\n}\nexports.default = architect_1.createBuilder(buildWebpackBrowser);\n"]},"metadata":{},"sourceType":"script"}