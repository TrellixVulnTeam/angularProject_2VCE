{"ast":null,"code":"\"use strict\";\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar _createForOfIteratorHelper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommonJsUsageWarnPlugin = void 0;\n\nvar path_1 = require(\"path\");\n\nvar webpack_diagnostics_1 = require(\"../../utils/webpack-diagnostics\");\n\nvar webpack_version_1 = require(\"../../utils/webpack-version\"); // Webpack doesn't export these so the deep imports can potentially break.\n\n\nvar CommonJsRequireDependency = require('webpack/lib/dependencies/CommonJsRequireDependency');\n\nvar AMDDefineDependency = require('webpack/lib/dependencies/AMDDefineDependency');\n\nvar CommonJsUsageWarnPlugin = /*#__PURE__*/function () {\n  function CommonJsUsageWarnPlugin() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, CommonJsUsageWarnPlugin);\n\n    this.options = options;\n    this.shownWarnings = new Set();\n    this.allowedDependencies = new Set(this.options.allowedDependencies);\n  }\n\n  _createClass(CommonJsUsageWarnPlugin, [{\n    key: \"apply\",\n    value: function apply(compiler) {\n      var _this = this;\n\n      compiler.hooks.compilation.tap('CommonJsUsageWarnPlugin', function (compilation) {\n        compilation.hooks.finishModules.tap('CommonJsUsageWarnPlugin', function (modules) {\n          var _a;\n\n          var _iterator = _createForOfIteratorHelper(modules),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var module = _step.value;\n              var dependencies = module.dependencies,\n                  rawRequest = module.rawRequest;\n\n              if (!rawRequest || rawRequest.startsWith('.') || path_1.isAbsolute(rawRequest) || _this.allowedDependencies.has(rawRequest) || _this.allowedDependencies.has(_this.rawRequestToPackageName(rawRequest)) || rawRequest.startsWith('@angular/common/locales/')) {\n                /**\n                 * Skip when:\n                 * - module is absolute or relative.\n                 * - module is allowed even if it's a CommonJS.\n                 * - module is a locale imported from '@angular/common'.\n                 */\n                continue;\n              }\n\n              if (_this.hasCommonJsDependencies(compilation, dependencies)) {\n                // Dependency is CommonsJS or AMD.\n                var issuer = getIssuer(compilation, module); // Check if it's parent issuer is also a CommonJS dependency.\n                // In case it is skip as an warning will be show for the parent CommonJS dependency.\n\n                var parentDependencies = (_a = getIssuer(compilation, issuer)) === null || _a === void 0 ? void 0 : _a.dependencies;\n\n                if (parentDependencies && _this.hasCommonJsDependencies(compilation, parentDependencies, true)) {\n                  continue;\n                } // Find the main issuer (entry-point).\n\n\n                var mainIssuer = issuer;\n                var nextIssuer = getIssuer(compilation, mainIssuer);\n\n                while (nextIssuer) {\n                  mainIssuer = nextIssuer;\n                  nextIssuer = getIssuer(compilation, mainIssuer);\n                } // Only show warnings for modules from main entrypoint.\n                // And if the issuer request is not from 'webpack-dev-server', as 'webpack-dev-server'\n                // will require CommonJS libraries for live reloading such as 'sockjs-node'.\n\n\n                if ((mainIssuer === null || mainIssuer === void 0 ? void 0 : mainIssuer.name) === 'main') {\n                  var warning = \"\".concat(issuer === null || issuer === void 0 ? void 0 : issuer.userRequest, \" depends on '\").concat(rawRequest, \"'. \") + 'CommonJS or AMD dependencies can cause optimization bailouts.\\n' + 'For more info see: https://angular.io/guide/build#configuring-commonjs-dependencies'; // Avoid showing the same warning multiple times when in 'watch' mode.\n\n                  if (!_this.shownWarnings.has(warning)) {\n                    webpack_diagnostics_1.addWarning(compilation, warning);\n\n                    _this.shownWarnings.add(warning);\n                  }\n                }\n              }\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"hasCommonJsDependencies\",\n    value: function hasCommonJsDependencies(compilation, dependencies) {\n      var checkParentModules = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var _iterator2 = _createForOfIteratorHelper(dependencies),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var dep = _step2.value;\n\n          if (dep instanceof CommonJsRequireDependency || dep instanceof AMDDefineDependency) {\n            return true;\n          }\n\n          if (checkParentModules) {\n            var module = getWebpackModule(compilation, dep);\n\n            if (module && this.hasCommonJsDependencies(compilation, module.dependencies)) {\n              return true;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return false;\n    }\n  }, {\n    key: \"rawRequestToPackageName\",\n    value: function rawRequestToPackageName(rawRequest) {\n      return rawRequest.startsWith('@') // Scoped request ex: @angular/common/locale/en -> @angular/common\n      ? rawRequest.split('/', 2).join('/') // Non-scoped request ex: lodash/isEmpty -> lodash\n      : rawRequest.split('/', 1)[0];\n    }\n  }]);\n\n  return CommonJsUsageWarnPlugin;\n}();\n\nexports.CommonJsUsageWarnPlugin = CommonJsUsageWarnPlugin;\n\nfunction getIssuer(compilation, module) {\n  if (!module) {\n    return null;\n  }\n\n  if (!webpack_version_1.isWebpackFiveOrHigher()) {\n    return module === null || module === void 0 ? void 0 : module.issuer;\n  }\n\n  return compilation.moduleGraph.getIssuer(module);\n}\n\nfunction getWebpackModule(compilation, dependency) {\n  if (!webpack_version_1.isWebpackFiveOrHigher()) {\n    return dependency.module;\n  }\n\n  return compilation.moduleGraph.getModule(dependency);\n}","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@angular-devkit/build-angular/src/webpack/plugins/common-js-usage-warn-plugin.js"],"names":["Object","defineProperty","exports","value","CommonJsUsageWarnPlugin","path_1","require","webpack_diagnostics_1","webpack_version_1","CommonJsRequireDependency","AMDDefineDependency","options","shownWarnings","Set","allowedDependencies","compiler","hooks","compilation","tap","finishModules","modules","_a","module","dependencies","rawRequest","startsWith","isAbsolute","has","rawRequestToPackageName","hasCommonJsDependencies","issuer","getIssuer","parentDependencies","mainIssuer","nextIssuer","name","warning","userRequest","addWarning","add","checkParentModules","dep","getWebpackModule","split","join","isWebpackFiveOrHigher","moduleGraph","dependency","getModule"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CommonJsUsageWarnPlugin = void 0;\nconst path_1 = require(\"path\");\nconst webpack_diagnostics_1 = require(\"../../utils/webpack-diagnostics\");\nconst webpack_version_1 = require(\"../../utils/webpack-version\");\n// Webpack doesn't export these so the deep imports can potentially break.\nconst CommonJsRequireDependency = require('webpack/lib/dependencies/CommonJsRequireDependency');\nconst AMDDefineDependency = require('webpack/lib/dependencies/AMDDefineDependency');\nclass CommonJsUsageWarnPlugin {\n    constructor(options = {}) {\n        this.options = options;\n        this.shownWarnings = new Set();\n        this.allowedDependencies = new Set(this.options.allowedDependencies);\n    }\n    apply(compiler) {\n        compiler.hooks.compilation.tap('CommonJsUsageWarnPlugin', compilation => {\n            compilation.hooks.finishModules.tap('CommonJsUsageWarnPlugin', modules => {\n                var _a;\n                for (const module of modules) {\n                    const { dependencies, rawRequest } = module;\n                    if (!rawRequest ||\n                        rawRequest.startsWith('.') ||\n                        path_1.isAbsolute(rawRequest) ||\n                        this.allowedDependencies.has(rawRequest) ||\n                        this.allowedDependencies.has(this.rawRequestToPackageName(rawRequest)) ||\n                        rawRequest.startsWith('@angular/common/locales/')) {\n                        /**\n                         * Skip when:\n                         * - module is absolute or relative.\n                         * - module is allowed even if it's a CommonJS.\n                         * - module is a locale imported from '@angular/common'.\n                         */\n                        continue;\n                    }\n                    if (this.hasCommonJsDependencies(compilation, dependencies)) {\n                        // Dependency is CommonsJS or AMD.\n                        const issuer = getIssuer(compilation, module);\n                        // Check if it's parent issuer is also a CommonJS dependency.\n                        // In case it is skip as an warning will be show for the parent CommonJS dependency.\n                        const parentDependencies = (_a = getIssuer(compilation, issuer)) === null || _a === void 0 ? void 0 : _a.dependencies;\n                        if (parentDependencies && this.hasCommonJsDependencies(compilation, parentDependencies, true)) {\n                            continue;\n                        }\n                        // Find the main issuer (entry-point).\n                        let mainIssuer = issuer;\n                        let nextIssuer = getIssuer(compilation, mainIssuer);\n                        while (nextIssuer) {\n                            mainIssuer = nextIssuer;\n                            nextIssuer = getIssuer(compilation, mainIssuer);\n                        }\n                        // Only show warnings for modules from main entrypoint.\n                        // And if the issuer request is not from 'webpack-dev-server', as 'webpack-dev-server'\n                        // will require CommonJS libraries for live reloading such as 'sockjs-node'.\n                        if ((mainIssuer === null || mainIssuer === void 0 ? void 0 : mainIssuer.name) === 'main') {\n                            const warning = `${issuer === null || issuer === void 0 ? void 0 : issuer.userRequest} depends on '${rawRequest}'. ` +\n                                'CommonJS or AMD dependencies can cause optimization bailouts.\\n' +\n                                'For more info see: https://angular.io/guide/build#configuring-commonjs-dependencies';\n                            // Avoid showing the same warning multiple times when in 'watch' mode.\n                            if (!this.shownWarnings.has(warning)) {\n                                webpack_diagnostics_1.addWarning(compilation, warning);\n                                this.shownWarnings.add(warning);\n                            }\n                        }\n                    }\n                }\n            });\n        });\n    }\n    hasCommonJsDependencies(compilation, dependencies, checkParentModules = false) {\n        for (const dep of dependencies) {\n            if (dep instanceof CommonJsRequireDependency || dep instanceof AMDDefineDependency) {\n                return true;\n            }\n            if (checkParentModules) {\n                const module = getWebpackModule(compilation, dep);\n                if (module && this.hasCommonJsDependencies(compilation, module.dependencies)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    rawRequestToPackageName(rawRequest) {\n        return rawRequest.startsWith('@')\n            // Scoped request ex: @angular/common/locale/en -> @angular/common\n            ? rawRequest.split('/', 2).join('/')\n            // Non-scoped request ex: lodash/isEmpty -> lodash\n            : rawRequest.split('/', 1)[0];\n    }\n}\nexports.CommonJsUsageWarnPlugin = CommonJsUsageWarnPlugin;\nfunction getIssuer(compilation, module) {\n    if (!module) {\n        return null;\n    }\n    if (!webpack_version_1.isWebpackFiveOrHigher()) {\n        return module === null || module === void 0 ? void 0 : module.issuer;\n    }\n    return compilation\n        .moduleGraph.getIssuer(module);\n}\nfunction getWebpackModule(compilation, dependency) {\n    if (!webpack_version_1.isWebpackFiveOrHigher()) {\n        return dependency.module;\n    }\n    return compilation\n        .moduleGraph.getModule(dependency);\n}\n"]},"metadata":{},"sourceType":"script"}