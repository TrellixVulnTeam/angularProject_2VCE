{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nvar Watchpack = require(\"watchpack\");\n\nvar objectToMap = require(\"../util/objectToMap\");\n\nvar NodeWatchFileSystem = /*#__PURE__*/function () {\n  function NodeWatchFileSystem(inputFileSystem) {\n    _classCallCheck(this, NodeWatchFileSystem);\n\n    this.inputFileSystem = inputFileSystem;\n    this.watcherOptions = {\n      aggregateTimeout: 0\n    };\n    this.watcher = new Watchpack(this.watcherOptions);\n  }\n\n  _createClass(NodeWatchFileSystem, [{\n    key: \"watch\",\n    value: function watch(files, dirs, missing, startTime, options, callback, callbackUndelayed) {\n      var _this = this;\n\n      if (!Array.isArray(files)) {\n        throw new Error(\"Invalid arguments: 'files'\");\n      }\n\n      if (!Array.isArray(dirs)) {\n        throw new Error(\"Invalid arguments: 'dirs'\");\n      }\n\n      if (!Array.isArray(missing)) {\n        throw new Error(\"Invalid arguments: 'missing'\");\n      }\n\n      if (typeof callback !== \"function\") {\n        throw new Error(\"Invalid arguments: 'callback'\");\n      }\n\n      if (typeof startTime !== \"number\" && startTime) {\n        throw new Error(\"Invalid arguments: 'startTime'\");\n      }\n\n      if (typeof options !== \"object\") {\n        throw new Error(\"Invalid arguments: 'options'\");\n      }\n\n      if (typeof callbackUndelayed !== \"function\" && callbackUndelayed) {\n        throw new Error(\"Invalid arguments: 'callbackUndelayed'\");\n      }\n\n      var oldWatcher = this.watcher;\n      this.watcher = new Watchpack(options);\n\n      if (callbackUndelayed) {\n        this.watcher.once(\"change\", callbackUndelayed);\n      }\n\n      var cachedFiles = files;\n      var cachedDirs = dirs;\n      this.watcher.once(\"aggregated\", function (changes, removals) {\n        changes = changes.concat(removals);\n\n        if (_this.inputFileSystem && _this.inputFileSystem.purge) {\n          _this.inputFileSystem.purge(changes);\n        }\n\n        var times = objectToMap(_this.watcher.getTimes());\n        files = new Set(files);\n        dirs = new Set(dirs);\n        missing = new Set(missing);\n        removals = new Set(removals.filter(function (file) {\n          return files.has(file);\n        }));\n        callback(null, changes.filter(function (file) {\n          return files.has(file);\n        }).sort(), changes.filter(function (file) {\n          return dirs.has(file);\n        }).sort(), changes.filter(function (file) {\n          return missing.has(file);\n        }).sort(), times, times, removals);\n      });\n      this.watcher.watch(cachedFiles.concat(missing), cachedDirs.concat(missing), startTime);\n\n      if (oldWatcher) {\n        oldWatcher.close();\n      }\n\n      return {\n        close: function close() {\n          if (_this.watcher) {\n            _this.watcher.close();\n\n            _this.watcher = null;\n          }\n        },\n        pause: function pause() {\n          if (_this.watcher) {\n            _this.watcher.pause();\n          }\n        },\n        getFileTimestamps: function getFileTimestamps() {\n          if (_this.watcher) {\n            return objectToMap(_this.watcher.getTimes());\n          } else {\n            return new Map();\n          }\n        },\n        getContextTimestamps: function getContextTimestamps() {\n          if (_this.watcher) {\n            return objectToMap(_this.watcher.getTimes());\n          } else {\n            return new Map();\n          }\n        }\n      };\n    }\n  }]);\n\n  return NodeWatchFileSystem;\n}();\n\nmodule.exports = NodeWatchFileSystem;","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/webpack/lib/node/NodeWatchFileSystem.js"],"names":["Watchpack","require","objectToMap","NodeWatchFileSystem","inputFileSystem","watcherOptions","aggregateTimeout","watcher","files","dirs","missing","startTime","options","callback","callbackUndelayed","Array","isArray","Error","oldWatcher","once","cachedFiles","cachedDirs","changes","removals","concat","purge","times","getTimes","Set","filter","file","has","sort","watch","close","pause","getFileTimestamps","Map","getContextTimestamps","module","exports"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Watchpack = require(\"watchpack\");\nconst objectToMap = require(\"../util/objectToMap\");\n\nclass NodeWatchFileSystem {\n\tconstructor(inputFileSystem) {\n\t\tthis.inputFileSystem = inputFileSystem;\n\t\tthis.watcherOptions = {\n\t\t\taggregateTimeout: 0\n\t\t};\n\t\tthis.watcher = new Watchpack(this.watcherOptions);\n\t}\n\n\twatch(files, dirs, missing, startTime, options, callback, callbackUndelayed) {\n\t\tif (!Array.isArray(files)) {\n\t\t\tthrow new Error(\"Invalid arguments: 'files'\");\n\t\t}\n\t\tif (!Array.isArray(dirs)) {\n\t\t\tthrow new Error(\"Invalid arguments: 'dirs'\");\n\t\t}\n\t\tif (!Array.isArray(missing)) {\n\t\t\tthrow new Error(\"Invalid arguments: 'missing'\");\n\t\t}\n\t\tif (typeof callback !== \"function\") {\n\t\t\tthrow new Error(\"Invalid arguments: 'callback'\");\n\t\t}\n\t\tif (typeof startTime !== \"number\" && startTime) {\n\t\t\tthrow new Error(\"Invalid arguments: 'startTime'\");\n\t\t}\n\t\tif (typeof options !== \"object\") {\n\t\t\tthrow new Error(\"Invalid arguments: 'options'\");\n\t\t}\n\t\tif (typeof callbackUndelayed !== \"function\" && callbackUndelayed) {\n\t\t\tthrow new Error(\"Invalid arguments: 'callbackUndelayed'\");\n\t\t}\n\t\tconst oldWatcher = this.watcher;\n\t\tthis.watcher = new Watchpack(options);\n\n\t\tif (callbackUndelayed) {\n\t\t\tthis.watcher.once(\"change\", callbackUndelayed);\n\t\t}\n\t\tconst cachedFiles = files;\n\t\tconst cachedDirs = dirs;\n\t\tthis.watcher.once(\"aggregated\", (changes, removals) => {\n\t\t\tchanges = changes.concat(removals);\n\t\t\tif (this.inputFileSystem && this.inputFileSystem.purge) {\n\t\t\t\tthis.inputFileSystem.purge(changes);\n\t\t\t}\n\t\t\tconst times = objectToMap(this.watcher.getTimes());\n\t\t\tfiles = new Set(files);\n\t\t\tdirs = new Set(dirs);\n\t\t\tmissing = new Set(missing);\n\t\t\tremovals = new Set(removals.filter(file => files.has(file)));\n\t\t\tcallback(\n\t\t\t\tnull,\n\t\t\t\tchanges.filter(file => files.has(file)).sort(),\n\t\t\t\tchanges.filter(file => dirs.has(file)).sort(),\n\t\t\t\tchanges.filter(file => missing.has(file)).sort(),\n\t\t\t\ttimes,\n\t\t\t\ttimes,\n\t\t\t\tremovals\n\t\t\t);\n\t\t});\n\n\t\tthis.watcher.watch(\n\t\t\tcachedFiles.concat(missing),\n\t\t\tcachedDirs.concat(missing),\n\t\t\tstartTime\n\t\t);\n\n\t\tif (oldWatcher) {\n\t\t\toldWatcher.close();\n\t\t}\n\t\treturn {\n\t\t\tclose: () => {\n\t\t\t\tif (this.watcher) {\n\t\t\t\t\tthis.watcher.close();\n\t\t\t\t\tthis.watcher = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\tpause: () => {\n\t\t\t\tif (this.watcher) {\n\t\t\t\t\tthis.watcher.pause();\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetFileTimestamps: () => {\n\t\t\t\tif (this.watcher) {\n\t\t\t\t\treturn objectToMap(this.watcher.getTimes());\n\t\t\t\t} else {\n\t\t\t\t\treturn new Map();\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetContextTimestamps: () => {\n\t\t\t\tif (this.watcher) {\n\t\t\t\t\treturn objectToMap(this.watcher.getTimes());\n\t\t\t\t} else {\n\t\t\t\t\treturn new Map();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n}\n\nmodule.exports = NodeWatchFileSystem;\n"]},"metadata":{},"sourceType":"script"}