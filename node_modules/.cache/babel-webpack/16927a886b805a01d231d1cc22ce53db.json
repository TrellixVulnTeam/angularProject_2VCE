{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nvar Storage = /*#__PURE__*/function () {\n  function Storage(duration) {\n    _classCallCheck(this, Storage);\n\n    this.duration = duration;\n    this.running = new Map();\n    this.data = new Map();\n    this.levels = [];\n\n    if (duration > 0) {\n      this.levels.push(new Set(), new Set(), new Set(), new Set(), new Set(), new Set(), new Set(), new Set(), new Set());\n\n      for (var i = 8000; i < duration; i += 500) {\n        this.levels.push(new Set());\n      }\n    }\n\n    this.count = 0;\n    this.interval = null;\n    this.needTickCheck = false;\n    this.nextTick = null;\n    this.passive = true;\n    this.tick = this.tick.bind(this);\n  }\n\n  _createClass(Storage, [{\n    key: \"ensureTick\",\n    value: function ensureTick() {\n      if (!this.interval && this.duration > 0 && !this.nextTick) this.interval = setInterval(this.tick, Math.floor(this.duration / this.levels.length));\n    }\n  }, {\n    key: \"finished\",\n    value: function finished(name, err, result) {\n      var callbacks = this.running.get(name);\n      this.running.delete(name);\n\n      if (this.duration > 0) {\n        this.data.set(name, [err, result]);\n        var levelData = this.levels[0];\n        this.count -= levelData.size;\n        levelData.add(name);\n        this.count += levelData.size;\n        this.ensureTick();\n      }\n\n      for (var i = 0; i < callbacks.length; i++) {\n        callbacks[i](err, result);\n      }\n    }\n  }, {\n    key: \"finishedSync\",\n    value: function finishedSync(name, err, result) {\n      if (this.duration > 0) {\n        this.data.set(name, [err, result]);\n        var levelData = this.levels[0];\n        this.count -= levelData.size;\n        levelData.add(name);\n        this.count += levelData.size;\n        this.ensureTick();\n      }\n    }\n  }, {\n    key: \"provide\",\n    value: function provide(name, provider, callback) {\n      var _this = this;\n\n      if (typeof name !== \"string\") {\n        callback(new TypeError(\"path must be a string\"));\n        return;\n      }\n\n      var running = this.running.get(name);\n\n      if (running) {\n        running.push(callback);\n        return;\n      }\n\n      if (this.duration > 0) {\n        this.checkTicks();\n        var data = this.data.get(name);\n\n        if (data) {\n          return process.nextTick(function () {\n            callback.apply(null, data);\n          });\n        }\n      }\n\n      this.running.set(name, running = [callback]);\n      provider(name, function (err, result) {\n        _this.finished(name, err, result);\n      });\n    }\n  }, {\n    key: \"provideSync\",\n    value: function provideSync(name, provider) {\n      if (typeof name !== \"string\") {\n        throw new TypeError(\"path must be a string\");\n      }\n\n      if (this.duration > 0) {\n        this.checkTicks();\n        var data = this.data.get(name);\n\n        if (data) {\n          if (data[0]) throw data[0];\n          return data[1];\n        }\n      }\n\n      var result;\n\n      try {\n        result = provider(name);\n      } catch (e) {\n        this.finishedSync(name, e);\n        throw e;\n      }\n\n      this.finishedSync(name, null, result);\n      return result;\n    }\n  }, {\n    key: \"tick\",\n    value: function tick() {\n      var decay = this.levels.pop();\n\n      var _iterator = _createForOfIteratorHelper(decay),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var item = _step.value;\n          this.data.delete(item);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.count -= decay.size;\n      decay.clear();\n      this.levels.unshift(decay);\n\n      if (this.count === 0) {\n        clearInterval(this.interval);\n        this.interval = null;\n        this.nextTick = null;\n        return true;\n      } else if (this.nextTick) {\n        this.nextTick += Math.floor(this.duration / this.levels.length);\n        var time = new Date().getTime();\n\n        if (this.nextTick > time) {\n          this.nextTick = null;\n          this.interval = setInterval(this.tick, Math.floor(this.duration / this.levels.length));\n          return true;\n        }\n      } else if (this.passive) {\n        clearInterval(this.interval);\n        this.interval = null;\n        this.nextTick = new Date().getTime() + Math.floor(this.duration / this.levels.length);\n      } else {\n        this.passive = true;\n      }\n    }\n  }, {\n    key: \"checkTicks\",\n    value: function checkTicks() {\n      this.passive = false;\n\n      if (this.nextTick) {\n        while (!this.tick()) {\n          ;\n        }\n      }\n    }\n  }, {\n    key: \"purge\",\n    value: function purge(what) {\n      if (!what) {\n        this.count = 0;\n        clearInterval(this.interval);\n        this.nextTick = null;\n        this.data.clear();\n        this.levels.forEach(function (level) {\n          level.clear();\n        });\n      } else if (typeof what === \"string\") {\n        var _iterator2 = _createForOfIteratorHelper(this.data.keys()),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var key = _step2.value;\n            if (key.startsWith(what)) this.data.delete(key);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      } else {\n        for (var i = what.length - 1; i >= 0; i--) {\n          this.purge(what[i]);\n        }\n      }\n    }\n  }]);\n\n  return Storage;\n}();\n\nmodule.exports = /*#__PURE__*/function () {\n  function CachedInputFileSystem(fileSystem, duration) {\n    var _this2 = this;\n\n    _classCallCheck(this, CachedInputFileSystem);\n\n    this.fileSystem = fileSystem;\n    this._statStorage = new Storage(duration);\n    this._readdirStorage = new Storage(duration);\n    this._readFileStorage = new Storage(duration);\n    this._readJsonStorage = new Storage(duration);\n    this._readlinkStorage = new Storage(duration);\n    this._stat = this.fileSystem.stat ? this.fileSystem.stat.bind(this.fileSystem) : null;\n    if (!this._stat) this.stat = null;\n    this._statSync = this.fileSystem.statSync ? this.fileSystem.statSync.bind(this.fileSystem) : null;\n    if (!this._statSync) this.statSync = null;\n    this._readdir = this.fileSystem.readdir ? this.fileSystem.readdir.bind(this.fileSystem) : null;\n    if (!this._readdir) this.readdir = null;\n    this._readdirSync = this.fileSystem.readdirSync ? this.fileSystem.readdirSync.bind(this.fileSystem) : null;\n    if (!this._readdirSync) this.readdirSync = null;\n    this._readFile = this.fileSystem.readFile ? this.fileSystem.readFile.bind(this.fileSystem) : null;\n    if (!this._readFile) this.readFile = null;\n    this._readFileSync = this.fileSystem.readFileSync ? this.fileSystem.readFileSync.bind(this.fileSystem) : null;\n    if (!this._readFileSync) this.readFileSync = null;\n\n    if (this.fileSystem.readJson) {\n      this._readJson = this.fileSystem.readJson.bind(this.fileSystem);\n    } else if (this.readFile) {\n      this._readJson = function (path, callback) {\n        _this2.readFile(path, function (err, buffer) {\n          if (err) return callback(err);\n          var data;\n\n          try {\n            data = JSON.parse(buffer.toString(\"utf-8\"));\n          } catch (e) {\n            return callback(e);\n          }\n\n          callback(null, data);\n        });\n      };\n    } else {\n      this.readJson = null;\n    }\n\n    if (this.fileSystem.readJsonSync) {\n      this._readJsonSync = this.fileSystem.readJsonSync.bind(this.fileSystem);\n    } else if (this.readFileSync) {\n      this._readJsonSync = function (path) {\n        var buffer = _this2.readFileSync(path);\n\n        var data = JSON.parse(buffer.toString(\"utf-8\"));\n        return data;\n      };\n    } else {\n      this.readJsonSync = null;\n    }\n\n    this._readlink = this.fileSystem.readlink ? this.fileSystem.readlink.bind(this.fileSystem) : null;\n    if (!this._readlink) this.readlink = null;\n    this._readlinkSync = this.fileSystem.readlinkSync ? this.fileSystem.readlinkSync.bind(this.fileSystem) : null;\n    if (!this._readlinkSync) this.readlinkSync = null;\n  }\n\n  _createClass(CachedInputFileSystem, [{\n    key: \"stat\",\n    value: function stat(path, callback) {\n      this._statStorage.provide(path, this._stat, callback);\n    }\n  }, {\n    key: \"readdir\",\n    value: function readdir(path, callback) {\n      this._readdirStorage.provide(path, this._readdir, callback);\n    }\n  }, {\n    key: \"readFile\",\n    value: function readFile(path, callback) {\n      this._readFileStorage.provide(path, this._readFile, callback);\n    }\n  }, {\n    key: \"readJson\",\n    value: function readJson(path, callback) {\n      this._readJsonStorage.provide(path, this._readJson, callback);\n    }\n  }, {\n    key: \"readlink\",\n    value: function readlink(path, callback) {\n      this._readlinkStorage.provide(path, this._readlink, callback);\n    }\n  }, {\n    key: \"statSync\",\n    value: function statSync(path) {\n      return this._statStorage.provideSync(path, this._statSync);\n    }\n  }, {\n    key: \"readdirSync\",\n    value: function readdirSync(path) {\n      return this._readdirStorage.provideSync(path, this._readdirSync);\n    }\n  }, {\n    key: \"readFileSync\",\n    value: function readFileSync(path) {\n      return this._readFileStorage.provideSync(path, this._readFileSync);\n    }\n  }, {\n    key: \"readJsonSync\",\n    value: function readJsonSync(path) {\n      return this._readJsonStorage.provideSync(path, this._readJsonSync);\n    }\n  }, {\n    key: \"readlinkSync\",\n    value: function readlinkSync(path) {\n      return this._readlinkStorage.provideSync(path, this._readlinkSync);\n    }\n  }, {\n    key: \"purge\",\n    value: function purge(what) {\n      this._statStorage.purge(what);\n\n      this._readdirStorage.purge(what);\n\n      this._readFileStorage.purge(what);\n\n      this._readlinkStorage.purge(what);\n\n      this._readJsonStorage.purge(what);\n    }\n  }]);\n\n  return CachedInputFileSystem;\n}();","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/webpack/node_modules/enhanced-resolve/lib/CachedInputFileSystem.js"],"names":["Storage","duration","running","Map","data","levels","push","Set","i","count","interval","needTickCheck","nextTick","passive","tick","bind","setInterval","Math","floor","length","name","err","result","callbacks","get","delete","set","levelData","size","add","ensureTick","provider","callback","TypeError","checkTicks","process","apply","finished","e","finishedSync","decay","pop","item","clear","unshift","clearInterval","time","Date","getTime","what","forEach","level","keys","key","startsWith","purge","module","exports","fileSystem","_statStorage","_readdirStorage","_readFileStorage","_readJsonStorage","_readlinkStorage","_stat","stat","_statSync","statSync","_readdir","readdir","_readdirSync","readdirSync","_readFile","readFile","_readFileSync","readFileSync","readJson","_readJson","path","buffer","JSON","parse","toString","readJsonSync","_readJsonSync","_readlink","readlink","_readlinkSync","readlinkSync","provide","provideSync"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass Storage {\n\tconstructor(duration) {\n\t\tthis.duration = duration;\n\t\tthis.running = new Map();\n\t\tthis.data = new Map();\n\t\tthis.levels = [];\n\t\tif (duration > 0) {\n\t\t\tthis.levels.push(\n\t\t\t\tnew Set(),\n\t\t\t\tnew Set(),\n\t\t\t\tnew Set(),\n\t\t\t\tnew Set(),\n\t\t\t\tnew Set(),\n\t\t\t\tnew Set(),\n\t\t\t\tnew Set(),\n\t\t\t\tnew Set(),\n\t\t\t\tnew Set()\n\t\t\t);\n\t\t\tfor (let i = 8000; i < duration; i += 500) this.levels.push(new Set());\n\t\t}\n\t\tthis.count = 0;\n\t\tthis.interval = null;\n\t\tthis.needTickCheck = false;\n\t\tthis.nextTick = null;\n\t\tthis.passive = true;\n\t\tthis.tick = this.tick.bind(this);\n\t}\n\n\tensureTick() {\n\t\tif (!this.interval && this.duration > 0 && !this.nextTick)\n\t\t\tthis.interval = setInterval(\n\t\t\t\tthis.tick,\n\t\t\t\tMath.floor(this.duration / this.levels.length)\n\t\t\t);\n\t}\n\n\tfinished(name, err, result) {\n\t\tconst callbacks = this.running.get(name);\n\t\tthis.running.delete(name);\n\t\tif (this.duration > 0) {\n\t\t\tthis.data.set(name, [err, result]);\n\t\t\tconst levelData = this.levels[0];\n\t\t\tthis.count -= levelData.size;\n\t\t\tlevelData.add(name);\n\t\t\tthis.count += levelData.size;\n\t\t\tthis.ensureTick();\n\t\t}\n\t\tfor (let i = 0; i < callbacks.length; i++) {\n\t\t\tcallbacks[i](err, result);\n\t\t}\n\t}\n\n\tfinishedSync(name, err, result) {\n\t\tif (this.duration > 0) {\n\t\t\tthis.data.set(name, [err, result]);\n\t\t\tconst levelData = this.levels[0];\n\t\t\tthis.count -= levelData.size;\n\t\t\tlevelData.add(name);\n\t\t\tthis.count += levelData.size;\n\t\t\tthis.ensureTick();\n\t\t}\n\t}\n\n\tprovide(name, provider, callback) {\n\t\tif (typeof name !== \"string\") {\n\t\t\tcallback(new TypeError(\"path must be a string\"));\n\t\t\treturn;\n\t\t}\n\t\tlet running = this.running.get(name);\n\t\tif (running) {\n\t\t\trunning.push(callback);\n\t\t\treturn;\n\t\t}\n\t\tif (this.duration > 0) {\n\t\t\tthis.checkTicks();\n\t\t\tconst data = this.data.get(name);\n\t\t\tif (data) {\n\t\t\t\treturn process.nextTick(() => {\n\t\t\t\t\tcallback.apply(null, data);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tthis.running.set(name, (running = [callback]));\n\t\tprovider(name, (err, result) => {\n\t\t\tthis.finished(name, err, result);\n\t\t});\n\t}\n\n\tprovideSync(name, provider) {\n\t\tif (typeof name !== \"string\") {\n\t\t\tthrow new TypeError(\"path must be a string\");\n\t\t}\n\t\tif (this.duration > 0) {\n\t\t\tthis.checkTicks();\n\t\t\tconst data = this.data.get(name);\n\t\t\tif (data) {\n\t\t\t\tif (data[0]) throw data[0];\n\t\t\t\treturn data[1];\n\t\t\t}\n\t\t}\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = provider(name);\n\t\t} catch (e) {\n\t\t\tthis.finishedSync(name, e);\n\t\t\tthrow e;\n\t\t}\n\t\tthis.finishedSync(name, null, result);\n\t\treturn result;\n\t}\n\n\ttick() {\n\t\tconst decay = this.levels.pop();\n\t\tfor (let item of decay) {\n\t\t\tthis.data.delete(item);\n\t\t}\n\t\tthis.count -= decay.size;\n\t\tdecay.clear();\n\t\tthis.levels.unshift(decay);\n\t\tif (this.count === 0) {\n\t\t\tclearInterval(this.interval);\n\t\t\tthis.interval = null;\n\t\t\tthis.nextTick = null;\n\t\t\treturn true;\n\t\t} else if (this.nextTick) {\n\t\t\tthis.nextTick += Math.floor(this.duration / this.levels.length);\n\t\t\tconst time = new Date().getTime();\n\t\t\tif (this.nextTick > time) {\n\t\t\t\tthis.nextTick = null;\n\t\t\t\tthis.interval = setInterval(\n\t\t\t\t\tthis.tick,\n\t\t\t\t\tMath.floor(this.duration / this.levels.length)\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else if (this.passive) {\n\t\t\tclearInterval(this.interval);\n\t\t\tthis.interval = null;\n\t\t\tthis.nextTick =\n\t\t\t\tnew Date().getTime() + Math.floor(this.duration / this.levels.length);\n\t\t} else {\n\t\t\tthis.passive = true;\n\t\t}\n\t}\n\n\tcheckTicks() {\n\t\tthis.passive = false;\n\t\tif (this.nextTick) {\n\t\t\twhile (!this.tick());\n\t\t}\n\t}\n\n\tpurge(what) {\n\t\tif (!what) {\n\t\t\tthis.count = 0;\n\t\t\tclearInterval(this.interval);\n\t\t\tthis.nextTick = null;\n\t\t\tthis.data.clear();\n\t\t\tthis.levels.forEach(level => {\n\t\t\t\tlevel.clear();\n\t\t\t});\n\t\t} else if (typeof what === \"string\") {\n\t\t\tfor (let key of this.data.keys()) {\n\t\t\t\tif (key.startsWith(what)) this.data.delete(key);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = what.length - 1; i >= 0; i--) {\n\t\t\t\tthis.purge(what[i]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = class CachedInputFileSystem {\n\tconstructor(fileSystem, duration) {\n\t\tthis.fileSystem = fileSystem;\n\t\tthis._statStorage = new Storage(duration);\n\t\tthis._readdirStorage = new Storage(duration);\n\t\tthis._readFileStorage = new Storage(duration);\n\t\tthis._readJsonStorage = new Storage(duration);\n\t\tthis._readlinkStorage = new Storage(duration);\n\n\t\tthis._stat = this.fileSystem.stat\n\t\t\t? this.fileSystem.stat.bind(this.fileSystem)\n\t\t\t: null;\n\t\tif (!this._stat) this.stat = null;\n\n\t\tthis._statSync = this.fileSystem.statSync\n\t\t\t? this.fileSystem.statSync.bind(this.fileSystem)\n\t\t\t: null;\n\t\tif (!this._statSync) this.statSync = null;\n\n\t\tthis._readdir = this.fileSystem.readdir\n\t\t\t? this.fileSystem.readdir.bind(this.fileSystem)\n\t\t\t: null;\n\t\tif (!this._readdir) this.readdir = null;\n\n\t\tthis._readdirSync = this.fileSystem.readdirSync\n\t\t\t? this.fileSystem.readdirSync.bind(this.fileSystem)\n\t\t\t: null;\n\t\tif (!this._readdirSync) this.readdirSync = null;\n\n\t\tthis._readFile = this.fileSystem.readFile\n\t\t\t? this.fileSystem.readFile.bind(this.fileSystem)\n\t\t\t: null;\n\t\tif (!this._readFile) this.readFile = null;\n\n\t\tthis._readFileSync = this.fileSystem.readFileSync\n\t\t\t? this.fileSystem.readFileSync.bind(this.fileSystem)\n\t\t\t: null;\n\t\tif (!this._readFileSync) this.readFileSync = null;\n\n\t\tif (this.fileSystem.readJson) {\n\t\t\tthis._readJson = this.fileSystem.readJson.bind(this.fileSystem);\n\t\t} else if (this.readFile) {\n\t\t\tthis._readJson = (path, callback) => {\n\t\t\t\tthis.readFile(path, (err, buffer) => {\n\t\t\t\t\tif (err) return callback(err);\n\t\t\t\t\tlet data;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdata = JSON.parse(buffer.toString(\"utf-8\"));\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn callback(e);\n\t\t\t\t\t}\n\t\t\t\t\tcallback(null, data);\n\t\t\t\t});\n\t\t\t};\n\t\t} else {\n\t\t\tthis.readJson = null;\n\t\t}\n\t\tif (this.fileSystem.readJsonSync) {\n\t\t\tthis._readJsonSync = this.fileSystem.readJsonSync.bind(this.fileSystem);\n\t\t} else if (this.readFileSync) {\n\t\t\tthis._readJsonSync = path => {\n\t\t\t\tconst buffer = this.readFileSync(path);\n\t\t\t\tconst data = JSON.parse(buffer.toString(\"utf-8\"));\n\t\t\t\treturn data;\n\t\t\t};\n\t\t} else {\n\t\t\tthis.readJsonSync = null;\n\t\t}\n\n\t\tthis._readlink = this.fileSystem.readlink\n\t\t\t? this.fileSystem.readlink.bind(this.fileSystem)\n\t\t\t: null;\n\t\tif (!this._readlink) this.readlink = null;\n\n\t\tthis._readlinkSync = this.fileSystem.readlinkSync\n\t\t\t? this.fileSystem.readlinkSync.bind(this.fileSystem)\n\t\t\t: null;\n\t\tif (!this._readlinkSync) this.readlinkSync = null;\n\t}\n\n\tstat(path, callback) {\n\t\tthis._statStorage.provide(path, this._stat, callback);\n\t}\n\n\treaddir(path, callback) {\n\t\tthis._readdirStorage.provide(path, this._readdir, callback);\n\t}\n\n\treadFile(path, callback) {\n\t\tthis._readFileStorage.provide(path, this._readFile, callback);\n\t}\n\n\treadJson(path, callback) {\n\t\tthis._readJsonStorage.provide(path, this._readJson, callback);\n\t}\n\n\treadlink(path, callback) {\n\t\tthis._readlinkStorage.provide(path, this._readlink, callback);\n\t}\n\n\tstatSync(path) {\n\t\treturn this._statStorage.provideSync(path, this._statSync);\n\t}\n\n\treaddirSync(path) {\n\t\treturn this._readdirStorage.provideSync(path, this._readdirSync);\n\t}\n\n\treadFileSync(path) {\n\t\treturn this._readFileStorage.provideSync(path, this._readFileSync);\n\t}\n\n\treadJsonSync(path) {\n\t\treturn this._readJsonStorage.provideSync(path, this._readJsonSync);\n\t}\n\n\treadlinkSync(path) {\n\t\treturn this._readlinkStorage.provideSync(path, this._readlinkSync);\n\t}\n\n\tpurge(what) {\n\t\tthis._statStorage.purge(what);\n\t\tthis._readdirStorage.purge(what);\n\t\tthis._readFileStorage.purge(what);\n\t\tthis._readlinkStorage.purge(what);\n\t\tthis._readJsonStorage.purge(what);\n\t}\n};\n"]},"metadata":{},"sourceType":"script"}