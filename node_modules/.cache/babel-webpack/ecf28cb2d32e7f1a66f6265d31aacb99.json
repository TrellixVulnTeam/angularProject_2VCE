{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _require = require(\"tapable\"),\n    SyncBailHook = _require.SyncBailHook;\n\nvar HarmonyImportSideEffectDependency = require(\"./HarmonyImportSideEffectDependency\");\n\nvar HarmonyImportSpecifierDependency = require(\"./HarmonyImportSpecifierDependency\");\n\nvar HarmonyAcceptImportDependency = require(\"./HarmonyAcceptImportDependency\");\n\nvar HarmonyAcceptDependency = require(\"./HarmonyAcceptDependency\");\n\nvar ConstDependency = require(\"./ConstDependency\");\n\nmodule.exports = /*#__PURE__*/function () {\n  function HarmonyImportDependencyParserPlugin(moduleOptions) {\n    _classCallCheck(this, HarmonyImportDependencyParserPlugin);\n\n    this.strictExportPresence = moduleOptions.strictExportPresence;\n    this.strictThisContextOnImports = moduleOptions.strictThisContextOnImports;\n  }\n\n  _createClass(HarmonyImportDependencyParserPlugin, [{\n    key: \"apply\",\n    value: function apply(parser) {\n      var _this = this;\n\n      parser.hooks.import.tap(\"HarmonyImportDependencyParserPlugin\", function (statement, source) {\n        parser.state.lastHarmonyImportOrder = (parser.state.lastHarmonyImportOrder || 0) + 1;\n        var clearDep = new ConstDependency(\"\", statement.range);\n        clearDep.loc = statement.loc;\n        parser.state.module.addDependency(clearDep);\n        var sideEffectDep = new HarmonyImportSideEffectDependency(source, parser.state.module, parser.state.lastHarmonyImportOrder, parser.state.harmonyParserScope);\n        sideEffectDep.loc = statement.loc;\n        parser.state.module.addDependency(sideEffectDep);\n        return true;\n      });\n      parser.hooks.importSpecifier.tap(\"HarmonyImportDependencyParserPlugin\", function (statement, source, id, name) {\n        parser.scope.definitions.delete(name);\n        parser.scope.renames.set(name, \"imported var\");\n\n        if (!parser.state.harmonySpecifier) {\n          parser.state.harmonySpecifier = new Map();\n        }\n\n        parser.state.harmonySpecifier.set(name, {\n          source: source,\n          id: id,\n          sourceOrder: parser.state.lastHarmonyImportOrder\n        });\n        return true;\n      });\n      parser.hooks.expression.for(\"imported var\").tap(\"HarmonyImportDependencyParserPlugin\", function (expr) {\n        var name = expr.name;\n        var settings = parser.state.harmonySpecifier.get(name);\n        var dep = new HarmonyImportSpecifierDependency(settings.source, parser.state.module, settings.sourceOrder, parser.state.harmonyParserScope, settings.id, name, expr.range, _this.strictExportPresence);\n        dep.shorthand = parser.scope.inShorthand;\n        dep.directImport = true;\n        dep.loc = expr.loc;\n        parser.state.module.addDependency(dep);\n        return true;\n      });\n      parser.hooks.expressionAnyMember.for(\"imported var\").tap(\"HarmonyImportDependencyParserPlugin\", function (expr) {\n        var name = expr.object.name;\n        var settings = parser.state.harmonySpecifier.get(name);\n        if (settings.id !== null) return false;\n        var dep = new HarmonyImportSpecifierDependency(settings.source, parser.state.module, settings.sourceOrder, parser.state.harmonyParserScope, expr.property.name || expr.property.value, name, expr.range, _this.strictExportPresence);\n        dep.shorthand = parser.scope.inShorthand;\n        dep.directImport = false;\n        dep.loc = expr.loc;\n        parser.state.module.addDependency(dep);\n        return true;\n      });\n\n      if (this.strictThisContextOnImports) {\n        // only in case when we strictly follow the spec we need a special case here\n        parser.hooks.callAnyMember.for(\"imported var\").tap(\"HarmonyImportDependencyParserPlugin\", function (expr) {\n          if (expr.callee.type !== \"MemberExpression\") return;\n          if (expr.callee.object.type !== \"Identifier\") return;\n          var name = expr.callee.object.name;\n          var settings = parser.state.harmonySpecifier.get(name);\n          if (settings.id !== null) return false;\n          var dep = new HarmonyImportSpecifierDependency(settings.source, parser.state.module, settings.sourceOrder, parser.state.harmonyParserScope, expr.callee.property.name || expr.callee.property.value, name, expr.callee.range, _this.strictExportPresence);\n          dep.shorthand = parser.scope.inShorthand;\n          dep.directImport = false;\n          dep.namespaceObjectAsContext = true;\n          dep.loc = expr.callee.loc;\n          parser.state.module.addDependency(dep);\n          if (expr.arguments) parser.walkExpressions(expr.arguments);\n          return true;\n        });\n      }\n\n      parser.hooks.call.for(\"imported var\").tap(\"HarmonyImportDependencyParserPlugin\", function (expr) {\n        var args = expr.arguments;\n        var fullExpr = expr;\n        expr = expr.callee;\n        if (expr.type !== \"Identifier\") return;\n        var name = expr.name;\n        var settings = parser.state.harmonySpecifier.get(name);\n        var dep = new HarmonyImportSpecifierDependency(settings.source, parser.state.module, settings.sourceOrder, parser.state.harmonyParserScope, settings.id, name, expr.range, _this.strictExportPresence);\n        dep.directImport = true;\n        dep.callArgs = args;\n        dep.call = fullExpr;\n        dep.loc = expr.loc;\n        parser.state.module.addDependency(dep);\n        if (args) parser.walkExpressions(args);\n        return true;\n      }); // TODO webpack 5: refactor this, no custom hooks\n\n      if (!parser.hooks.hotAcceptCallback) {\n        parser.hooks.hotAcceptCallback = new SyncBailHook([\"expression\", \"requests\"]);\n      }\n\n      if (!parser.hooks.hotAcceptWithoutCallback) {\n        parser.hooks.hotAcceptWithoutCallback = new SyncBailHook([\"expression\", \"requests\"]);\n      }\n\n      parser.hooks.hotAcceptCallback.tap(\"HarmonyImportDependencyParserPlugin\", function (expr, requests) {\n        var harmonyParserScope = parser.state.harmonyParserScope;\n\n        if (!harmonyParserScope) {\n          // This is not a harmony module, skip it\n          return;\n        }\n\n        var dependencies = requests.map(function (request) {\n          var dep = new HarmonyAcceptImportDependency(request, parser.state.module, harmonyParserScope);\n          dep.loc = expr.loc;\n          parser.state.module.addDependency(dep);\n          return dep;\n        });\n\n        if (dependencies.length > 0) {\n          var dep = new HarmonyAcceptDependency(expr.range, dependencies, true);\n          dep.loc = expr.loc;\n          parser.state.module.addDependency(dep);\n        }\n      });\n      parser.hooks.hotAcceptWithoutCallback.tap(\"HarmonyImportDependencyParserPlugin\", function (expr, requests) {\n        var dependencies = requests.map(function (request) {\n          var dep = new HarmonyAcceptImportDependency(request, parser.state.module, parser.state.harmonyParserScope);\n          dep.loc = expr.loc;\n          parser.state.module.addDependency(dep);\n          return dep;\n        });\n\n        if (dependencies.length > 0) {\n          var dep = new HarmonyAcceptDependency(expr.range, dependencies, false);\n          dep.loc = expr.loc;\n          parser.state.module.addDependency(dep);\n        }\n      });\n    }\n  }]);\n\n  return HarmonyImportDependencyParserPlugin;\n}();","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/webpack/lib/dependencies/HarmonyImportDependencyParserPlugin.js"],"names":["require","SyncBailHook","HarmonyImportSideEffectDependency","HarmonyImportSpecifierDependency","HarmonyAcceptImportDependency","HarmonyAcceptDependency","ConstDependency","module","exports","moduleOptions","strictExportPresence","strictThisContextOnImports","parser","hooks","import","tap","statement","source","state","lastHarmonyImportOrder","clearDep","range","loc","addDependency","sideEffectDep","harmonyParserScope","importSpecifier","id","name","scope","definitions","delete","renames","set","harmonySpecifier","Map","sourceOrder","expression","for","expr","settings","get","dep","shorthand","inShorthand","directImport","expressionAnyMember","object","property","value","callAnyMember","callee","type","namespaceObjectAsContext","arguments","walkExpressions","call","args","fullExpr","callArgs","hotAcceptCallback","hotAcceptWithoutCallback","requests","dependencies","map","request","length"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst { SyncBailHook } = require(\"tapable\");\nconst HarmonyImportSideEffectDependency = require(\"./HarmonyImportSideEffectDependency\");\nconst HarmonyImportSpecifierDependency = require(\"./HarmonyImportSpecifierDependency\");\nconst HarmonyAcceptImportDependency = require(\"./HarmonyAcceptImportDependency\");\nconst HarmonyAcceptDependency = require(\"./HarmonyAcceptDependency\");\nconst ConstDependency = require(\"./ConstDependency\");\n\nmodule.exports = class HarmonyImportDependencyParserPlugin {\n\tconstructor(moduleOptions) {\n\t\tthis.strictExportPresence = moduleOptions.strictExportPresence;\n\t\tthis.strictThisContextOnImports = moduleOptions.strictThisContextOnImports;\n\t}\n\n\tapply(parser) {\n\t\tparser.hooks.import.tap(\n\t\t\t\"HarmonyImportDependencyParserPlugin\",\n\t\t\t(statement, source) => {\n\t\t\t\tparser.state.lastHarmonyImportOrder =\n\t\t\t\t\t(parser.state.lastHarmonyImportOrder || 0) + 1;\n\t\t\t\tconst clearDep = new ConstDependency(\"\", statement.range);\n\t\t\t\tclearDep.loc = statement.loc;\n\t\t\t\tparser.state.module.addDependency(clearDep);\n\t\t\t\tconst sideEffectDep = new HarmonyImportSideEffectDependency(\n\t\t\t\t\tsource,\n\t\t\t\t\tparser.state.module,\n\t\t\t\t\tparser.state.lastHarmonyImportOrder,\n\t\t\t\t\tparser.state.harmonyParserScope\n\t\t\t\t);\n\t\t\t\tsideEffectDep.loc = statement.loc;\n\t\t\t\tparser.state.module.addDependency(sideEffectDep);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t);\n\t\tparser.hooks.importSpecifier.tap(\n\t\t\t\"HarmonyImportDependencyParserPlugin\",\n\t\t\t(statement, source, id, name) => {\n\t\t\t\tparser.scope.definitions.delete(name);\n\t\t\t\tparser.scope.renames.set(name, \"imported var\");\n\t\t\t\tif (!parser.state.harmonySpecifier) {\n\t\t\t\t\tparser.state.harmonySpecifier = new Map();\n\t\t\t\t}\n\t\t\t\tparser.state.harmonySpecifier.set(name, {\n\t\t\t\t\tsource,\n\t\t\t\t\tid,\n\t\t\t\t\tsourceOrder: parser.state.lastHarmonyImportOrder\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t);\n\t\tparser.hooks.expression\n\t\t\t.for(\"imported var\")\n\t\t\t.tap(\"HarmonyImportDependencyParserPlugin\", expr => {\n\t\t\t\tconst name = expr.name;\n\t\t\t\tconst settings = parser.state.harmonySpecifier.get(name);\n\t\t\t\tconst dep = new HarmonyImportSpecifierDependency(\n\t\t\t\t\tsettings.source,\n\t\t\t\t\tparser.state.module,\n\t\t\t\t\tsettings.sourceOrder,\n\t\t\t\t\tparser.state.harmonyParserScope,\n\t\t\t\t\tsettings.id,\n\t\t\t\t\tname,\n\t\t\t\t\texpr.range,\n\t\t\t\t\tthis.strictExportPresence\n\t\t\t\t);\n\t\t\t\tdep.shorthand = parser.scope.inShorthand;\n\t\t\t\tdep.directImport = true;\n\t\t\t\tdep.loc = expr.loc;\n\t\t\t\tparser.state.module.addDependency(dep);\n\t\t\t\treturn true;\n\t\t\t});\n\t\tparser.hooks.expressionAnyMember\n\t\t\t.for(\"imported var\")\n\t\t\t.tap(\"HarmonyImportDependencyParserPlugin\", expr => {\n\t\t\t\tconst name = expr.object.name;\n\t\t\t\tconst settings = parser.state.harmonySpecifier.get(name);\n\t\t\t\tif (settings.id !== null) return false;\n\t\t\t\tconst dep = new HarmonyImportSpecifierDependency(\n\t\t\t\t\tsettings.source,\n\t\t\t\t\tparser.state.module,\n\t\t\t\t\tsettings.sourceOrder,\n\t\t\t\t\tparser.state.harmonyParserScope,\n\t\t\t\t\texpr.property.name || expr.property.value,\n\t\t\t\t\tname,\n\t\t\t\t\texpr.range,\n\t\t\t\t\tthis.strictExportPresence\n\t\t\t\t);\n\t\t\t\tdep.shorthand = parser.scope.inShorthand;\n\t\t\t\tdep.directImport = false;\n\t\t\t\tdep.loc = expr.loc;\n\t\t\t\tparser.state.module.addDependency(dep);\n\t\t\t\treturn true;\n\t\t\t});\n\t\tif (this.strictThisContextOnImports) {\n\t\t\t// only in case when we strictly follow the spec we need a special case here\n\t\t\tparser.hooks.callAnyMember\n\t\t\t\t.for(\"imported var\")\n\t\t\t\t.tap(\"HarmonyImportDependencyParserPlugin\", expr => {\n\t\t\t\t\tif (expr.callee.type !== \"MemberExpression\") return;\n\t\t\t\t\tif (expr.callee.object.type !== \"Identifier\") return;\n\t\t\t\t\tconst name = expr.callee.object.name;\n\t\t\t\t\tconst settings = parser.state.harmonySpecifier.get(name);\n\t\t\t\t\tif (settings.id !== null) return false;\n\t\t\t\t\tconst dep = new HarmonyImportSpecifierDependency(\n\t\t\t\t\t\tsettings.source,\n\t\t\t\t\t\tparser.state.module,\n\t\t\t\t\t\tsettings.sourceOrder,\n\t\t\t\t\t\tparser.state.harmonyParserScope,\n\t\t\t\t\t\texpr.callee.property.name || expr.callee.property.value,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\texpr.callee.range,\n\t\t\t\t\t\tthis.strictExportPresence\n\t\t\t\t\t);\n\t\t\t\t\tdep.shorthand = parser.scope.inShorthand;\n\t\t\t\t\tdep.directImport = false;\n\t\t\t\t\tdep.namespaceObjectAsContext = true;\n\t\t\t\t\tdep.loc = expr.callee.loc;\n\t\t\t\t\tparser.state.module.addDependency(dep);\n\t\t\t\t\tif (expr.arguments) parser.walkExpressions(expr.arguments);\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t}\n\t\tparser.hooks.call\n\t\t\t.for(\"imported var\")\n\t\t\t.tap(\"HarmonyImportDependencyParserPlugin\", expr => {\n\t\t\t\tconst args = expr.arguments;\n\t\t\t\tconst fullExpr = expr;\n\t\t\t\texpr = expr.callee;\n\t\t\t\tif (expr.type !== \"Identifier\") return;\n\t\t\t\tconst name = expr.name;\n\t\t\t\tconst settings = parser.state.harmonySpecifier.get(name);\n\t\t\t\tconst dep = new HarmonyImportSpecifierDependency(\n\t\t\t\t\tsettings.source,\n\t\t\t\t\tparser.state.module,\n\t\t\t\t\tsettings.sourceOrder,\n\t\t\t\t\tparser.state.harmonyParserScope,\n\t\t\t\t\tsettings.id,\n\t\t\t\t\tname,\n\t\t\t\t\texpr.range,\n\t\t\t\t\tthis.strictExportPresence\n\t\t\t\t);\n\t\t\t\tdep.directImport = true;\n\t\t\t\tdep.callArgs = args;\n\t\t\t\tdep.call = fullExpr;\n\t\t\t\tdep.loc = expr.loc;\n\t\t\t\tparser.state.module.addDependency(dep);\n\t\t\t\tif (args) parser.walkExpressions(args);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t// TODO webpack 5: refactor this, no custom hooks\n\t\tif (!parser.hooks.hotAcceptCallback) {\n\t\t\tparser.hooks.hotAcceptCallback = new SyncBailHook([\n\t\t\t\t\"expression\",\n\t\t\t\t\"requests\"\n\t\t\t]);\n\t\t}\n\t\tif (!parser.hooks.hotAcceptWithoutCallback) {\n\t\t\tparser.hooks.hotAcceptWithoutCallback = new SyncBailHook([\n\t\t\t\t\"expression\",\n\t\t\t\t\"requests\"\n\t\t\t]);\n\t\t}\n\t\tparser.hooks.hotAcceptCallback.tap(\n\t\t\t\"HarmonyImportDependencyParserPlugin\",\n\t\t\t(expr, requests) => {\n\t\t\t\tconst harmonyParserScope = parser.state.harmonyParserScope;\n\t\t\t\tif (!harmonyParserScope) {\n\t\t\t\t\t// This is not a harmony module, skip it\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst dependencies = requests.map(request => {\n\t\t\t\t\tconst dep = new HarmonyAcceptImportDependency(\n\t\t\t\t\t\trequest,\n\t\t\t\t\t\tparser.state.module,\n\t\t\t\t\t\tharmonyParserScope\n\t\t\t\t\t);\n\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\tparser.state.module.addDependency(dep);\n\t\t\t\t\treturn dep;\n\t\t\t\t});\n\t\t\t\tif (dependencies.length > 0) {\n\t\t\t\t\tconst dep = new HarmonyAcceptDependency(\n\t\t\t\t\t\texpr.range,\n\t\t\t\t\t\tdependencies,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\tparser.state.module.addDependency(dep);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\tparser.hooks.hotAcceptWithoutCallback.tap(\n\t\t\t\"HarmonyImportDependencyParserPlugin\",\n\t\t\t(expr, requests) => {\n\t\t\t\tconst dependencies = requests.map(request => {\n\t\t\t\t\tconst dep = new HarmonyAcceptImportDependency(\n\t\t\t\t\t\trequest,\n\t\t\t\t\t\tparser.state.module,\n\t\t\t\t\t\tparser.state.harmonyParserScope\n\t\t\t\t\t);\n\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\tparser.state.module.addDependency(dep);\n\t\t\t\t\treturn dep;\n\t\t\t\t});\n\t\t\t\tif (dependencies.length > 0) {\n\t\t\t\t\tconst dep = new HarmonyAcceptDependency(\n\t\t\t\t\t\texpr.range,\n\t\t\t\t\t\tdependencies,\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t\tdep.loc = expr.loc;\n\t\t\t\t\tparser.state.module.addDependency(dep);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n};\n"]},"metadata":{},"sourceType":"script"}