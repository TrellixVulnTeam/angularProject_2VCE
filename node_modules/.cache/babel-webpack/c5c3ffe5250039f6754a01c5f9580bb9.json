{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _os = _interopRequireDefault(require(\"os\"));\n\nvar _cacache = _interopRequireDefault(require(\"cacache\"));\n\nvar _findCacheDir = _interopRequireDefault(require(\"find-cache-dir\"));\n\nvar _workerFarm = _interopRequireDefault(require(\"worker-farm\"));\n\nvar _serializeJavascript = _interopRequireDefault(require(\"serialize-javascript\"));\n\nvar _isWsl = _interopRequireDefault(require(\"is-wsl\"));\n\nvar _minify = _interopRequireDefault(require(\"./minify\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar worker = require.resolve('./worker');\n\nvar TaskRunner = /*#__PURE__*/function () {\n  function TaskRunner() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, TaskRunner);\n\n    var cache = options.cache,\n        parallel = options.parallel;\n    this.cacheDir = cache === true ? (0, _findCacheDir.default)({\n      name: 'terser-webpack-plugin'\n    }) || _os.default.tmpdir() : cache; // In some cases cpus() returns undefined\n    // https://github.com/nodejs/node/issues/19022\n\n    var cpus = _os.default.cpus() || {\n      length: 1\n    }; // WSL sometimes freezes, error seems to be on the WSL side\n    // https://github.com/webpack-contrib/terser-webpack-plugin/issues/21\n\n    this.maxConcurrentWorkers = _isWsl.default ? 1 : parallel === true ? cpus.length - 1 : Math.min(Number(parallel) || 0, cpus.length - 1);\n  }\n\n  _createClass(TaskRunner, [{\n    key: \"run\",\n    value: function run(tasks, callback) {\n      var _this = this;\n\n      /* istanbul ignore if */\n      if (!tasks.length) {\n        callback(null, []);\n        return;\n      }\n\n      if (this.maxConcurrentWorkers > 1) {\n        var workerOptions = process.platform === 'win32' ? {\n          maxConcurrentWorkers: this.maxConcurrentWorkers,\n          maxConcurrentCallsPerWorker: 1\n        } : {\n          maxConcurrentWorkers: this.maxConcurrentWorkers\n        };\n        this.workers = (0, _workerFarm.default)(workerOptions, worker);\n\n        this.boundWorkers = function (options, cb) {\n          try {\n            _this.workers((0, _serializeJavascript.default)(options), cb);\n          } catch (error) {\n            // worker-farm can fail with ENOMEM or something else\n            cb(error);\n          }\n        };\n      } else {\n        this.boundWorkers = function (options, cb) {\n          try {\n            cb(null, (0, _minify.default)(options));\n          } catch (error) {\n            cb(error);\n          }\n        };\n      }\n\n      var toRun = tasks.length;\n      var results = [];\n\n      var step = function step(index, data) {\n        toRun -= 1;\n        results[index] = data;\n\n        if (!toRun) {\n          callback(null, results);\n        }\n      };\n\n      tasks.forEach(function (task, index) {\n        var enqueue = function enqueue() {\n          _this.boundWorkers(task, function (error, data) {\n            var result = error ? {\n              error: error\n            } : data;\n\n            var done = function done() {\n              return step(index, result);\n            };\n\n            if (_this.cacheDir && !result.error) {\n              _cacache.default.put(_this.cacheDir, (0, _serializeJavascript.default)(task.cacheKeys), JSON.stringify(data)).then(done, done);\n            } else {\n              done();\n            }\n          });\n        };\n\n        if (_this.cacheDir) {\n          _cacache.default.get(_this.cacheDir, (0, _serializeJavascript.default)(task.cacheKeys)).then(function (_ref) {\n            var data = _ref.data;\n            return step(index, JSON.parse(data));\n          }, enqueue);\n        } else {\n          enqueue();\n        }\n      });\n    }\n  }, {\n    key: \"exit\",\n    value: function exit() {\n      if (this.workers) {\n        _workerFarm.default.end(this.workers);\n      }\n    }\n  }]);\n\n  return TaskRunner;\n}();\n\nexports.default = TaskRunner;","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/webpack/node_modules/terser-webpack-plugin/dist/TaskRunner.js"],"names":["Object","defineProperty","exports","value","default","_os","_interopRequireDefault","require","_cacache","_findCacheDir","_workerFarm","_serializeJavascript","_isWsl","_minify","obj","__esModule","worker","resolve","TaskRunner","options","cache","parallel","cacheDir","name","tmpdir","cpus","length","maxConcurrentWorkers","Math","min","Number","tasks","callback","workerOptions","process","platform","maxConcurrentCallsPerWorker","workers","boundWorkers","cb","error","toRun","results","step","index","data","forEach","task","enqueue","result","done","put","cacheKeys","JSON","stringify","then","get","parse","end"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _os = _interopRequireDefault(require(\"os\"));\n\nvar _cacache = _interopRequireDefault(require(\"cacache\"));\n\nvar _findCacheDir = _interopRequireDefault(require(\"find-cache-dir\"));\n\nvar _workerFarm = _interopRequireDefault(require(\"worker-farm\"));\n\nvar _serializeJavascript = _interopRequireDefault(require(\"serialize-javascript\"));\n\nvar _isWsl = _interopRequireDefault(require(\"is-wsl\"));\n\nvar _minify = _interopRequireDefault(require(\"./minify\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst worker = require.resolve('./worker');\n\nclass TaskRunner {\n  constructor(options = {}) {\n    const {\n      cache,\n      parallel\n    } = options;\n    this.cacheDir = cache === true ? (0, _findCacheDir.default)({\n      name: 'terser-webpack-plugin'\n    }) || _os.default.tmpdir() : cache; // In some cases cpus() returns undefined\n    // https://github.com/nodejs/node/issues/19022\n\n    const cpus = _os.default.cpus() || {\n      length: 1\n    }; // WSL sometimes freezes, error seems to be on the WSL side\n    // https://github.com/webpack-contrib/terser-webpack-plugin/issues/21\n\n    this.maxConcurrentWorkers = _isWsl.default ? 1 : parallel === true ? cpus.length - 1 : Math.min(Number(parallel) || 0, cpus.length - 1);\n  }\n\n  run(tasks, callback) {\n    /* istanbul ignore if */\n    if (!tasks.length) {\n      callback(null, []);\n      return;\n    }\n\n    if (this.maxConcurrentWorkers > 1) {\n      const workerOptions = process.platform === 'win32' ? {\n        maxConcurrentWorkers: this.maxConcurrentWorkers,\n        maxConcurrentCallsPerWorker: 1\n      } : {\n        maxConcurrentWorkers: this.maxConcurrentWorkers\n      };\n      this.workers = (0, _workerFarm.default)(workerOptions, worker);\n\n      this.boundWorkers = (options, cb) => {\n        try {\n          this.workers((0, _serializeJavascript.default)(options), cb);\n        } catch (error) {\n          // worker-farm can fail with ENOMEM or something else\n          cb(error);\n        }\n      };\n    } else {\n      this.boundWorkers = (options, cb) => {\n        try {\n          cb(null, (0, _minify.default)(options));\n        } catch (error) {\n          cb(error);\n        }\n      };\n    }\n\n    let toRun = tasks.length;\n    const results = [];\n\n    const step = (index, data) => {\n      toRun -= 1;\n      results[index] = data;\n\n      if (!toRun) {\n        callback(null, results);\n      }\n    };\n\n    tasks.forEach((task, index) => {\n      const enqueue = () => {\n        this.boundWorkers(task, (error, data) => {\n          const result = error ? {\n            error\n          } : data;\n\n          const done = () => step(index, result);\n\n          if (this.cacheDir && !result.error) {\n            _cacache.default.put(this.cacheDir, (0, _serializeJavascript.default)(task.cacheKeys), JSON.stringify(data)).then(done, done);\n          } else {\n            done();\n          }\n        });\n      };\n\n      if (this.cacheDir) {\n        _cacache.default.get(this.cacheDir, (0, _serializeJavascript.default)(task.cacheKeys)).then(({\n          data\n        }) => step(index, JSON.parse(data)), enqueue);\n      } else {\n        enqueue();\n      }\n    });\n  }\n\n  exit() {\n    if (this.workers) {\n      _workerFarm.default.end(this.workers);\n    }\n  }\n\n}\n\nexports.default = TaskRunner;"]},"metadata":{},"sourceType":"script"}