{"ast":null,"code":"/*\n MIT License http://www.opensource.org/licenses/mit-license.php\n Author Tobias Koppers @sokra\n */\n\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _assertThisInitialized = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar path = require(\"path\");\n\nvar asyncLib = require(\"neo-async\");\n\nvar _require = require(\"tapable\"),\n    Tapable = _require.Tapable,\n    AsyncSeriesWaterfallHook = _require.AsyncSeriesWaterfallHook,\n    SyncWaterfallHook = _require.SyncWaterfallHook,\n    SyncBailHook = _require.SyncBailHook,\n    SyncHook = _require.SyncHook,\n    HookMap = _require.HookMap;\n\nvar NormalModule = require(\"./NormalModule\");\n\nvar RawModule = require(\"./RawModule\");\n\nvar RuleSet = require(\"./RuleSet\");\n\nvar _require2 = require(\"./util/cleverMerge\"),\n    cachedCleverMerge = _require2.cachedCleverMerge;\n\nvar EMPTY_RESOLVE_OPTIONS = {};\nvar MATCH_RESOURCE_REGEX = /^([^!]+)!=!/;\n\nvar loaderToIdent = function loaderToIdent(data) {\n  if (!data.options) {\n    return data.loader;\n  }\n\n  if (typeof data.options === \"string\") {\n    return data.loader + \"?\" + data.options;\n  }\n\n  if (typeof data.options !== \"object\") {\n    throw new Error(\"loader options must be string or object\");\n  }\n\n  if (data.ident) {\n    return data.loader + \"??\" + data.ident;\n  }\n\n  return data.loader + \"?\" + JSON.stringify(data.options);\n};\n\nvar identToLoaderRequest = function identToLoaderRequest(resultString) {\n  var idx = resultString.indexOf(\"?\");\n\n  if (idx >= 0) {\n    var loader = resultString.substr(0, idx);\n    var options = resultString.substr(idx + 1);\n    return {\n      loader: loader,\n      options: options\n    };\n  } else {\n    return {\n      loader: resultString,\n      options: undefined\n    };\n  }\n};\n\nvar dependencyCache = new WeakMap();\n\nvar NormalModuleFactory = /*#__PURE__*/function (_Tapable) {\n  _inherits(NormalModuleFactory, _Tapable);\n\n  var _super = _createSuper(NormalModuleFactory);\n\n  function NormalModuleFactory(context, resolverFactory, options) {\n    var _this;\n\n    _classCallCheck(this, NormalModuleFactory);\n\n    _this = _super.call(this);\n    _this.hooks = {\n      resolver: new SyncWaterfallHook([\"resolver\"]),\n      factory: new SyncWaterfallHook([\"factory\"]),\n      beforeResolve: new AsyncSeriesWaterfallHook([\"data\"]),\n      afterResolve: new AsyncSeriesWaterfallHook([\"data\"]),\n      createModule: new SyncBailHook([\"data\"]),\n      module: new SyncWaterfallHook([\"module\", \"data\"]),\n      createParser: new HookMap(function () {\n        return new SyncBailHook([\"parserOptions\"]);\n      }),\n      parser: new HookMap(function () {\n        return new SyncHook([\"parser\", \"parserOptions\"]);\n      }),\n      createGenerator: new HookMap(function () {\n        return new SyncBailHook([\"generatorOptions\"]);\n      }),\n      generator: new HookMap(function () {\n        return new SyncHook([\"generator\", \"generatorOptions\"]);\n      })\n    };\n\n    _this._pluginCompat.tap(\"NormalModuleFactory\", function (options) {\n      switch (options.name) {\n        case \"before-resolve\":\n        case \"after-resolve\":\n          options.async = true;\n          break;\n\n        case \"parser\":\n          _this.hooks.parser.for(\"javascript/auto\").tap(options.fn.name || \"unnamed compat plugin\", options.fn);\n\n          return true;\n      }\n\n      var match;\n      match = /^parser (.+)$/.exec(options.name);\n\n      if (match) {\n        _this.hooks.parser.for(match[1]).tap(options.fn.name || \"unnamed compat plugin\", options.fn.bind(_assertThisInitialized(_this)));\n\n        return true;\n      }\n\n      match = /^create-parser (.+)$/.exec(options.name);\n\n      if (match) {\n        _this.hooks.createParser.for(match[1]).tap(options.fn.name || \"unnamed compat plugin\", options.fn.bind(_assertThisInitialized(_this)));\n\n        return true;\n      }\n    });\n\n    _this.resolverFactory = resolverFactory;\n    _this.ruleSet = new RuleSet(options.defaultRules.concat(options.rules));\n    _this.cachePredicate = typeof options.unsafeCache === \"function\" ? options.unsafeCache : Boolean.bind(null, options.unsafeCache);\n    _this.context = context || \"\";\n    _this.parserCache = Object.create(null);\n    _this.generatorCache = Object.create(null);\n\n    _this.hooks.factory.tap(\"NormalModuleFactory\", function () {\n      return function (result, callback) {\n        var resolver = _this.hooks.resolver.call(null); // Ignored\n\n\n        if (!resolver) return callback();\n        resolver(result, function (err, data) {\n          if (err) return callback(err); // Ignored\n\n          if (!data) return callback(); // direct module\n\n          if (typeof data.source === \"function\") return callback(null, data);\n\n          _this.hooks.afterResolve.callAsync(data, function (err, result) {\n            if (err) return callback(err); // Ignored\n\n            if (!result) return callback();\n\n            var createdModule = _this.hooks.createModule.call(result);\n\n            if (!createdModule) {\n              if (!result.request) {\n                return callback(new Error(\"Empty dependency (no request)\"));\n              }\n\n              createdModule = new NormalModule(result);\n            }\n\n            createdModule = _this.hooks.module.call(createdModule, result);\n            return callback(null, createdModule);\n          });\n        });\n      };\n    });\n\n    _this.hooks.resolver.tap(\"NormalModuleFactory\", function () {\n      return function (data, callback) {\n        var contextInfo = data.contextInfo;\n        var context = data.context;\n        var request = data.request;\n\n        var loaderResolver = _this.getResolver(\"loader\");\n\n        var normalResolver = _this.getResolver(\"normal\", data.resolveOptions);\n\n        var matchResource = undefined;\n        var requestWithoutMatchResource = request;\n        var matchResourceMatch = MATCH_RESOURCE_REGEX.exec(request);\n\n        if (matchResourceMatch) {\n          matchResource = matchResourceMatch[1];\n\n          if (/^\\.\\.?\\//.test(matchResource)) {\n            matchResource = path.join(context, matchResource);\n          }\n\n          requestWithoutMatchResource = request.substr(matchResourceMatch[0].length);\n        }\n\n        var noPreAutoLoaders = requestWithoutMatchResource.startsWith(\"-!\");\n        var noAutoLoaders = noPreAutoLoaders || requestWithoutMatchResource.startsWith(\"!\");\n        var noPrePostAutoLoaders = requestWithoutMatchResource.startsWith(\"!!\");\n        var elements = requestWithoutMatchResource.replace(/^-?!+/, \"\").replace(/!!+/g, \"!\").split(\"!\");\n        var resource = elements.pop();\n        elements = elements.map(identToLoaderRequest);\n        asyncLib.parallel([function (callback) {\n          return _this.resolveRequestArray(contextInfo, context, elements, loaderResolver, callback);\n        }, function (callback) {\n          if (resource === \"\" || resource[0] === \"?\") {\n            return callback(null, {\n              resource: resource\n            });\n          }\n\n          normalResolver.resolve(contextInfo, context, resource, {}, function (err, resource, resourceResolveData) {\n            if (err) return callback(err);\n            callback(null, {\n              resourceResolveData: resourceResolveData,\n              resource: resource\n            });\n          });\n        }], function (err, results) {\n          if (err) return callback(err);\n          var loaders = results[0];\n          var resourceResolveData = results[1].resourceResolveData;\n          resource = results[1].resource; // translate option idents\n\n          try {\n            var _iterator = _createForOfIteratorHelper(loaders),\n                _step;\n\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var item = _step.value;\n\n                if (typeof item.options === \"string\" && item.options[0] === \"?\") {\n                  var ident = item.options.substr(1);\n                  item.options = _this.ruleSet.findOptionsByIdent(ident);\n                  item.ident = ident;\n                }\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n          } catch (e) {\n            return callback(e);\n          }\n\n          if (resource === false) {\n            // ignored\n            return callback(null, new RawModule(\"/* (ignored) */\", \"ignored \".concat(context, \" \").concat(request), \"\".concat(request, \" (ignored)\")));\n          }\n\n          var userRequest = (matchResource !== undefined ? \"\".concat(matchResource, \"!=!\") : \"\") + loaders.map(loaderToIdent).concat([resource]).join(\"!\");\n          var resourcePath = matchResource !== undefined ? matchResource : resource;\n          var resourceQuery = \"\";\n          var queryIndex = resourcePath.indexOf(\"?\");\n\n          if (queryIndex >= 0) {\n            resourceQuery = resourcePath.substr(queryIndex);\n            resourcePath = resourcePath.substr(0, queryIndex);\n          }\n\n          var result = _this.ruleSet.exec({\n            resource: resourcePath,\n            realResource: matchResource !== undefined ? resource.replace(/\\?.*/, \"\") : resourcePath,\n            resourceQuery: resourceQuery,\n            issuer: contextInfo.issuer,\n            compiler: contextInfo.compiler\n          });\n\n          var settings = {};\n          var useLoadersPost = [];\n          var useLoaders = [];\n          var useLoadersPre = [];\n\n          var _iterator2 = _createForOfIteratorHelper(result),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var r = _step2.value;\n\n              if (r.type === \"use\") {\n                if (r.enforce === \"post\" && !noPrePostAutoLoaders) {\n                  useLoadersPost.push(r.value);\n                } else if (r.enforce === \"pre\" && !noPreAutoLoaders && !noPrePostAutoLoaders) {\n                  useLoadersPre.push(r.value);\n                } else if (!r.enforce && !noAutoLoaders && !noPrePostAutoLoaders) {\n                  useLoaders.push(r.value);\n                }\n              } else if (typeof r.value === \"object\" && r.value !== null && typeof settings[r.type] === \"object\" && settings[r.type] !== null) {\n                settings[r.type] = cachedCleverMerge(settings[r.type], r.value);\n              } else {\n                settings[r.type] = r.value;\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n\n          asyncLib.parallel([_this.resolveRequestArray.bind(_assertThisInitialized(_this), contextInfo, _this.context, useLoadersPost, loaderResolver), _this.resolveRequestArray.bind(_assertThisInitialized(_this), contextInfo, _this.context, useLoaders, loaderResolver), _this.resolveRequestArray.bind(_assertThisInitialized(_this), contextInfo, _this.context, useLoadersPre, loaderResolver)], function (err, results) {\n            if (err) return callback(err);\n\n            if (matchResource === undefined) {\n              loaders = results[0].concat(loaders, results[1], results[2]);\n            } else {\n              loaders = results[0].concat(results[1], loaders, results[2]);\n            }\n\n            process.nextTick(function () {\n              var type = settings.type;\n              var resolveOptions = settings.resolve;\n              callback(null, {\n                context: context,\n                request: loaders.map(loaderToIdent).concat([resource]).join(\"!\"),\n                dependencies: data.dependencies,\n                userRequest: userRequest,\n                rawRequest: request,\n                loaders: loaders,\n                resource: resource,\n                matchResource: matchResource,\n                resourceResolveData: resourceResolveData,\n                settings: settings,\n                type: type,\n                parser: _this.getParser(type, settings.parser),\n                generator: _this.getGenerator(type, settings.generator),\n                resolveOptions: resolveOptions\n              });\n            });\n          });\n        });\n      };\n    });\n\n    return _this;\n  }\n\n  _createClass(NormalModuleFactory, [{\n    key: \"create\",\n    value: function create(data, callback) {\n      var _this2 = this;\n\n      var dependencies = data.dependencies;\n      var cacheEntry = dependencyCache.get(dependencies[0]);\n      if (cacheEntry) return callback(null, cacheEntry);\n      var context = data.context || this.context;\n      var resolveOptions = data.resolveOptions || EMPTY_RESOLVE_OPTIONS;\n      var request = dependencies[0].request;\n      var contextInfo = data.contextInfo || {};\n      this.hooks.beforeResolve.callAsync({\n        contextInfo: contextInfo,\n        resolveOptions: resolveOptions,\n        context: context,\n        request: request,\n        dependencies: dependencies\n      }, function (err, result) {\n        if (err) return callback(err); // Ignored\n\n        if (!result) return callback();\n\n        var factory = _this2.hooks.factory.call(null); // Ignored\n\n\n        if (!factory) return callback();\n        factory(result, function (err, module) {\n          if (err) return callback(err);\n\n          if (module && _this2.cachePredicate(module)) {\n            var _iterator3 = _createForOfIteratorHelper(dependencies),\n                _step3;\n\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                var d = _step3.value;\n                dependencyCache.set(d, module);\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n          }\n\n          callback(null, module);\n        });\n      });\n    }\n  }, {\n    key: \"resolveRequestArray\",\n    value: function resolveRequestArray(contextInfo, context, array, resolver, callback) {\n      if (array.length === 0) return callback(null, []);\n      asyncLib.map(array, function (item, callback) {\n        resolver.resolve(contextInfo, context, item.loader, {}, function (err, result) {\n          if (err && /^[^/]*$/.test(item.loader) && !/-loader$/.test(item.loader)) {\n            return resolver.resolve(contextInfo, context, item.loader + \"-loader\", {}, function (err2) {\n              if (!err2) {\n                err.message = err.message + \"\\n\" + \"BREAKING CHANGE: It's no longer allowed to omit the '-loader' suffix when using loaders.\\n\" + \"                 You need to specify '\".concat(item.loader, \"-loader' instead of '\").concat(item.loader, \"',\\n\") + \"                 see https://webpack.js.org/migrate/3/#automatic-loader-module-name-extension-removed\";\n              }\n\n              callback(err);\n            });\n          }\n\n          if (err) return callback(err);\n          var optionsOnly = item.options ? {\n            options: item.options\n          } : undefined;\n          return callback(null, Object.assign({}, item, identToLoaderRequest(result), optionsOnly));\n        });\n      }, callback);\n    }\n  }, {\n    key: \"getParser\",\n    value: function getParser(type, parserOptions) {\n      var ident = type;\n\n      if (parserOptions) {\n        if (parserOptions.ident) {\n          ident = \"\".concat(type, \"|\").concat(parserOptions.ident);\n        } else {\n          ident = JSON.stringify([type, parserOptions]);\n        }\n      }\n\n      if (ident in this.parserCache) {\n        return this.parserCache[ident];\n      }\n\n      return this.parserCache[ident] = this.createParser(type, parserOptions);\n    }\n  }, {\n    key: \"createParser\",\n    value: function createParser(type) {\n      var parserOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var parser = this.hooks.createParser.for(type).call(parserOptions);\n\n      if (!parser) {\n        throw new Error(\"No parser registered for \".concat(type));\n      }\n\n      this.hooks.parser.for(type).call(parser, parserOptions);\n      return parser;\n    }\n  }, {\n    key: \"getGenerator\",\n    value: function getGenerator(type, generatorOptions) {\n      var ident = type;\n\n      if (generatorOptions) {\n        if (generatorOptions.ident) {\n          ident = \"\".concat(type, \"|\").concat(generatorOptions.ident);\n        } else {\n          ident = JSON.stringify([type, generatorOptions]);\n        }\n      }\n\n      if (ident in this.generatorCache) {\n        return this.generatorCache[ident];\n      }\n\n      return this.generatorCache[ident] = this.createGenerator(type, generatorOptions);\n    }\n  }, {\n    key: \"createGenerator\",\n    value: function createGenerator(type) {\n      var generatorOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var generator = this.hooks.createGenerator.for(type).call(generatorOptions);\n\n      if (!generator) {\n        throw new Error(\"No generator registered for \".concat(type));\n      }\n\n      this.hooks.generator.for(type).call(generator, generatorOptions);\n      return generator;\n    }\n  }, {\n    key: \"getResolver\",\n    value: function getResolver(type, resolveOptions) {\n      return this.resolverFactory.get(type, resolveOptions || EMPTY_RESOLVE_OPTIONS);\n    }\n  }]);\n\n  return NormalModuleFactory;\n}(Tapable);\n\nmodule.exports = NormalModuleFactory;","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/webpack/lib/NormalModuleFactory.js"],"names":["path","require","asyncLib","Tapable","AsyncSeriesWaterfallHook","SyncWaterfallHook","SyncBailHook","SyncHook","HookMap","NormalModule","RawModule","RuleSet","cachedCleverMerge","EMPTY_RESOLVE_OPTIONS","MATCH_RESOURCE_REGEX","loaderToIdent","data","options","loader","Error","ident","JSON","stringify","identToLoaderRequest","resultString","idx","indexOf","substr","undefined","dependencyCache","WeakMap","NormalModuleFactory","context","resolverFactory","hooks","resolver","factory","beforeResolve","afterResolve","createModule","module","createParser","parser","createGenerator","generator","_pluginCompat","tap","name","async","for","fn","match","exec","bind","ruleSet","defaultRules","concat","rules","cachePredicate","unsafeCache","Boolean","parserCache","Object","create","generatorCache","result","callback","call","err","source","callAsync","createdModule","request","contextInfo","loaderResolver","getResolver","normalResolver","resolveOptions","matchResource","requestWithoutMatchResource","matchResourceMatch","test","join","length","noPreAutoLoaders","startsWith","noAutoLoaders","noPrePostAutoLoaders","elements","replace","split","resource","pop","map","parallel","resolveRequestArray","resolve","resourceResolveData","results","loaders","item","findOptionsByIdent","e","userRequest","resourcePath","resourceQuery","queryIndex","realResource","issuer","compiler","settings","useLoadersPost","useLoaders","useLoadersPre","r","type","enforce","push","value","process","nextTick","dependencies","rawRequest","getParser","getGenerator","cacheEntry","get","d","set","array","err2","message","optionsOnly","assign","parserOptions","generatorOptions","exports"],"mappings":"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","sourcesContent":["/*\n MIT License http://www.opensource.org/licenses/mit-license.php\n Author Tobias Koppers @sokra\n */\n\"use strict\";\n\nconst path = require(\"path\");\nconst asyncLib = require(\"neo-async\");\nconst {\n\tTapable,\n\tAsyncSeriesWaterfallHook,\n\tSyncWaterfallHook,\n\tSyncBailHook,\n\tSyncHook,\n\tHookMap\n} = require(\"tapable\");\nconst NormalModule = require(\"./NormalModule\");\nconst RawModule = require(\"./RawModule\");\nconst RuleSet = require(\"./RuleSet\");\nconst { cachedCleverMerge } = require(\"./util/cleverMerge\");\n\nconst EMPTY_RESOLVE_OPTIONS = {};\n\nconst MATCH_RESOURCE_REGEX = /^([^!]+)!=!/;\n\nconst loaderToIdent = data => {\n\tif (!data.options) {\n\t\treturn data.loader;\n\t}\n\tif (typeof data.options === \"string\") {\n\t\treturn data.loader + \"?\" + data.options;\n\t}\n\tif (typeof data.options !== \"object\") {\n\t\tthrow new Error(\"loader options must be string or object\");\n\t}\n\tif (data.ident) {\n\t\treturn data.loader + \"??\" + data.ident;\n\t}\n\treturn data.loader + \"?\" + JSON.stringify(data.options);\n};\n\nconst identToLoaderRequest = resultString => {\n\tconst idx = resultString.indexOf(\"?\");\n\tif (idx >= 0) {\n\t\tconst loader = resultString.substr(0, idx);\n\t\tconst options = resultString.substr(idx + 1);\n\t\treturn {\n\t\t\tloader,\n\t\t\toptions\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tloader: resultString,\n\t\t\toptions: undefined\n\t\t};\n\t}\n};\n\nconst dependencyCache = new WeakMap();\n\nclass NormalModuleFactory extends Tapable {\n\tconstructor(context, resolverFactory, options) {\n\t\tsuper();\n\t\tthis.hooks = {\n\t\t\tresolver: new SyncWaterfallHook([\"resolver\"]),\n\t\t\tfactory: new SyncWaterfallHook([\"factory\"]),\n\t\t\tbeforeResolve: new AsyncSeriesWaterfallHook([\"data\"]),\n\t\t\tafterResolve: new AsyncSeriesWaterfallHook([\"data\"]),\n\t\t\tcreateModule: new SyncBailHook([\"data\"]),\n\t\t\tmodule: new SyncWaterfallHook([\"module\", \"data\"]),\n\t\t\tcreateParser: new HookMap(() => new SyncBailHook([\"parserOptions\"])),\n\t\t\tparser: new HookMap(() => new SyncHook([\"parser\", \"parserOptions\"])),\n\t\t\tcreateGenerator: new HookMap(\n\t\t\t\t() => new SyncBailHook([\"generatorOptions\"])\n\t\t\t),\n\t\t\tgenerator: new HookMap(\n\t\t\t\t() => new SyncHook([\"generator\", \"generatorOptions\"])\n\t\t\t)\n\t\t};\n\t\tthis._pluginCompat.tap(\"NormalModuleFactory\", options => {\n\t\t\tswitch (options.name) {\n\t\t\t\tcase \"before-resolve\":\n\t\t\t\tcase \"after-resolve\":\n\t\t\t\t\toptions.async = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"parser\":\n\t\t\t\t\tthis.hooks.parser\n\t\t\t\t\t\t.for(\"javascript/auto\")\n\t\t\t\t\t\t.tap(options.fn.name || \"unnamed compat plugin\", options.fn);\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t\tlet match;\n\t\t\tmatch = /^parser (.+)$/.exec(options.name);\n\t\t\tif (match) {\n\t\t\t\tthis.hooks.parser\n\t\t\t\t\t.for(match[1])\n\t\t\t\t\t.tap(\n\t\t\t\t\t\toptions.fn.name || \"unnamed compat plugin\",\n\t\t\t\t\t\toptions.fn.bind(this)\n\t\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tmatch = /^create-parser (.+)$/.exec(options.name);\n\t\t\tif (match) {\n\t\t\t\tthis.hooks.createParser\n\t\t\t\t\t.for(match[1])\n\t\t\t\t\t.tap(\n\t\t\t\t\t\toptions.fn.name || \"unnamed compat plugin\",\n\t\t\t\t\t\toptions.fn.bind(this)\n\t\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\tthis.resolverFactory = resolverFactory;\n\t\tthis.ruleSet = new RuleSet(options.defaultRules.concat(options.rules));\n\t\tthis.cachePredicate =\n\t\t\ttypeof options.unsafeCache === \"function\"\n\t\t\t\t? options.unsafeCache\n\t\t\t\t: Boolean.bind(null, options.unsafeCache);\n\t\tthis.context = context || \"\";\n\t\tthis.parserCache = Object.create(null);\n\t\tthis.generatorCache = Object.create(null);\n\t\tthis.hooks.factory.tap(\"NormalModuleFactory\", () => (result, callback) => {\n\t\t\tlet resolver = this.hooks.resolver.call(null);\n\n\t\t\t// Ignored\n\t\t\tif (!resolver) return callback();\n\n\t\t\tresolver(result, (err, data) => {\n\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t// Ignored\n\t\t\t\tif (!data) return callback();\n\n\t\t\t\t// direct module\n\t\t\t\tif (typeof data.source === \"function\") return callback(null, data);\n\n\t\t\t\tthis.hooks.afterResolve.callAsync(data, (err, result) => {\n\t\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t\t// Ignored\n\t\t\t\t\tif (!result) return callback();\n\n\t\t\t\t\tlet createdModule = this.hooks.createModule.call(result);\n\t\t\t\t\tif (!createdModule) {\n\t\t\t\t\t\tif (!result.request) {\n\t\t\t\t\t\t\treturn callback(new Error(\"Empty dependency (no request)\"));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcreatedModule = new NormalModule(result);\n\t\t\t\t\t}\n\n\t\t\t\t\tcreatedModule = this.hooks.module.call(createdModule, result);\n\n\t\t\t\t\treturn callback(null, createdModule);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t\tthis.hooks.resolver.tap(\"NormalModuleFactory\", () => (data, callback) => {\n\t\t\tconst contextInfo = data.contextInfo;\n\t\t\tconst context = data.context;\n\t\t\tconst request = data.request;\n\n\t\t\tconst loaderResolver = this.getResolver(\"loader\");\n\t\t\tconst normalResolver = this.getResolver(\"normal\", data.resolveOptions);\n\n\t\t\tlet matchResource = undefined;\n\t\t\tlet requestWithoutMatchResource = request;\n\t\t\tconst matchResourceMatch = MATCH_RESOURCE_REGEX.exec(request);\n\t\t\tif (matchResourceMatch) {\n\t\t\t\tmatchResource = matchResourceMatch[1];\n\t\t\t\tif (/^\\.\\.?\\//.test(matchResource)) {\n\t\t\t\t\tmatchResource = path.join(context, matchResource);\n\t\t\t\t}\n\t\t\t\trequestWithoutMatchResource = request.substr(\n\t\t\t\t\tmatchResourceMatch[0].length\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst noPreAutoLoaders = requestWithoutMatchResource.startsWith(\"-!\");\n\t\t\tconst noAutoLoaders =\n\t\t\t\tnoPreAutoLoaders || requestWithoutMatchResource.startsWith(\"!\");\n\t\t\tconst noPrePostAutoLoaders = requestWithoutMatchResource.startsWith(\"!!\");\n\t\t\tlet elements = requestWithoutMatchResource\n\t\t\t\t.replace(/^-?!+/, \"\")\n\t\t\t\t.replace(/!!+/g, \"!\")\n\t\t\t\t.split(\"!\");\n\t\t\tlet resource = elements.pop();\n\t\t\telements = elements.map(identToLoaderRequest);\n\n\t\t\tasyncLib.parallel(\n\t\t\t\t[\n\t\t\t\t\tcallback =>\n\t\t\t\t\t\tthis.resolveRequestArray(\n\t\t\t\t\t\t\tcontextInfo,\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\telements,\n\t\t\t\t\t\t\tloaderResolver,\n\t\t\t\t\t\t\tcallback\n\t\t\t\t\t\t),\n\t\t\t\t\tcallback => {\n\t\t\t\t\t\tif (resource === \"\" || resource[0] === \"?\") {\n\t\t\t\t\t\t\treturn callback(null, {\n\t\t\t\t\t\t\t\tresource\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnormalResolver.resolve(\n\t\t\t\t\t\t\tcontextInfo,\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\tresource,\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t(err, resource, resourceResolveData) => {\n\t\t\t\t\t\t\t\tif (err) return callback(err);\n\t\t\t\t\t\t\t\tcallback(null, {\n\t\t\t\t\t\t\t\t\tresourceResolveData,\n\t\t\t\t\t\t\t\t\tresource\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\t(err, results) => {\n\t\t\t\t\tif (err) return callback(err);\n\t\t\t\t\tlet loaders = results[0];\n\t\t\t\t\tconst resourceResolveData = results[1].resourceResolveData;\n\t\t\t\t\tresource = results[1].resource;\n\n\t\t\t\t\t// translate option idents\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor (const item of loaders) {\n\t\t\t\t\t\t\tif (typeof item.options === \"string\" && item.options[0] === \"?\") {\n\t\t\t\t\t\t\t\tconst ident = item.options.substr(1);\n\t\t\t\t\t\t\t\titem.options = this.ruleSet.findOptionsByIdent(ident);\n\t\t\t\t\t\t\t\titem.ident = ident;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn callback(e);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (resource === false) {\n\t\t\t\t\t\t// ignored\n\t\t\t\t\t\treturn callback(\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tnew RawModule(\n\t\t\t\t\t\t\t\t\"/* (ignored) */\",\n\t\t\t\t\t\t\t\t`ignored ${context} ${request}`,\n\t\t\t\t\t\t\t\t`${request} (ignored)`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst userRequest =\n\t\t\t\t\t\t(matchResource !== undefined ? `${matchResource}!=!` : \"\") +\n\t\t\t\t\t\tloaders\n\t\t\t\t\t\t\t.map(loaderToIdent)\n\t\t\t\t\t\t\t.concat([resource])\n\t\t\t\t\t\t\t.join(\"!\");\n\n\t\t\t\t\tlet resourcePath =\n\t\t\t\t\t\tmatchResource !== undefined ? matchResource : resource;\n\t\t\t\t\tlet resourceQuery = \"\";\n\t\t\t\t\tconst queryIndex = resourcePath.indexOf(\"?\");\n\t\t\t\t\tif (queryIndex >= 0) {\n\t\t\t\t\t\tresourceQuery = resourcePath.substr(queryIndex);\n\t\t\t\t\t\tresourcePath = resourcePath.substr(0, queryIndex);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = this.ruleSet.exec({\n\t\t\t\t\t\tresource: resourcePath,\n\t\t\t\t\t\trealResource:\n\t\t\t\t\t\t\tmatchResource !== undefined\n\t\t\t\t\t\t\t\t? resource.replace(/\\?.*/, \"\")\n\t\t\t\t\t\t\t\t: resourcePath,\n\t\t\t\t\t\tresourceQuery,\n\t\t\t\t\t\tissuer: contextInfo.issuer,\n\t\t\t\t\t\tcompiler: contextInfo.compiler\n\t\t\t\t\t});\n\t\t\t\t\tconst settings = {};\n\t\t\t\t\tconst useLoadersPost = [];\n\t\t\t\t\tconst useLoaders = [];\n\t\t\t\t\tconst useLoadersPre = [];\n\t\t\t\t\tfor (const r of result) {\n\t\t\t\t\t\tif (r.type === \"use\") {\n\t\t\t\t\t\t\tif (r.enforce === \"post\" && !noPrePostAutoLoaders) {\n\t\t\t\t\t\t\t\tuseLoadersPost.push(r.value);\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tr.enforce === \"pre\" &&\n\t\t\t\t\t\t\t\t!noPreAutoLoaders &&\n\t\t\t\t\t\t\t\t!noPrePostAutoLoaders\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tuseLoadersPre.push(r.value);\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\t!r.enforce &&\n\t\t\t\t\t\t\t\t!noAutoLoaders &&\n\t\t\t\t\t\t\t\t!noPrePostAutoLoaders\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tuseLoaders.push(r.value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\ttypeof r.value === \"object\" &&\n\t\t\t\t\t\t\tr.value !== null &&\n\t\t\t\t\t\t\ttypeof settings[r.type] === \"object\" &&\n\t\t\t\t\t\t\tsettings[r.type] !== null\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tsettings[r.type] = cachedCleverMerge(settings[r.type], r.value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsettings[r.type] = r.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tasyncLib.parallel(\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tthis.resolveRequestArray.bind(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\tcontextInfo,\n\t\t\t\t\t\t\t\tthis.context,\n\t\t\t\t\t\t\t\tuseLoadersPost,\n\t\t\t\t\t\t\t\tloaderResolver\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tthis.resolveRequestArray.bind(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\tcontextInfo,\n\t\t\t\t\t\t\t\tthis.context,\n\t\t\t\t\t\t\t\tuseLoaders,\n\t\t\t\t\t\t\t\tloaderResolver\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tthis.resolveRequestArray.bind(\n\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\tcontextInfo,\n\t\t\t\t\t\t\t\tthis.context,\n\t\t\t\t\t\t\t\tuseLoadersPre,\n\t\t\t\t\t\t\t\tloaderResolver\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t],\n\t\t\t\t\t\t(err, results) => {\n\t\t\t\t\t\t\tif (err) return callback(err);\n\t\t\t\t\t\t\tif (matchResource === undefined) {\n\t\t\t\t\t\t\t\tloaders = results[0].concat(loaders, results[1], results[2]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tloaders = results[0].concat(results[1], loaders, results[2]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tprocess.nextTick(() => {\n\t\t\t\t\t\t\t\tconst type = settings.type;\n\t\t\t\t\t\t\t\tconst resolveOptions = settings.resolve;\n\t\t\t\t\t\t\t\tcallback(null, {\n\t\t\t\t\t\t\t\t\tcontext: context,\n\t\t\t\t\t\t\t\t\trequest: loaders\n\t\t\t\t\t\t\t\t\t\t.map(loaderToIdent)\n\t\t\t\t\t\t\t\t\t\t.concat([resource])\n\t\t\t\t\t\t\t\t\t\t.join(\"!\"),\n\t\t\t\t\t\t\t\t\tdependencies: data.dependencies,\n\t\t\t\t\t\t\t\t\tuserRequest,\n\t\t\t\t\t\t\t\t\trawRequest: request,\n\t\t\t\t\t\t\t\t\tloaders,\n\t\t\t\t\t\t\t\t\tresource,\n\t\t\t\t\t\t\t\t\tmatchResource,\n\t\t\t\t\t\t\t\t\tresourceResolveData,\n\t\t\t\t\t\t\t\t\tsettings,\n\t\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\t\tparser: this.getParser(type, settings.parser),\n\t\t\t\t\t\t\t\t\tgenerator: this.getGenerator(type, settings.generator),\n\t\t\t\t\t\t\t\t\tresolveOptions\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tcreate(data, callback) {\n\t\tconst dependencies = data.dependencies;\n\t\tconst cacheEntry = dependencyCache.get(dependencies[0]);\n\t\tif (cacheEntry) return callback(null, cacheEntry);\n\t\tconst context = data.context || this.context;\n\t\tconst resolveOptions = data.resolveOptions || EMPTY_RESOLVE_OPTIONS;\n\t\tconst request = dependencies[0].request;\n\t\tconst contextInfo = data.contextInfo || {};\n\t\tthis.hooks.beforeResolve.callAsync(\n\t\t\t{\n\t\t\t\tcontextInfo,\n\t\t\t\tresolveOptions,\n\t\t\t\tcontext,\n\t\t\t\trequest,\n\t\t\t\tdependencies\n\t\t\t},\n\t\t\t(err, result) => {\n\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t// Ignored\n\t\t\t\tif (!result) return callback();\n\n\t\t\t\tconst factory = this.hooks.factory.call(null);\n\n\t\t\t\t// Ignored\n\t\t\t\tif (!factory) return callback();\n\n\t\t\t\tfactory(result, (err, module) => {\n\t\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t\tif (module && this.cachePredicate(module)) {\n\t\t\t\t\t\tfor (const d of dependencies) {\n\t\t\t\t\t\t\tdependencyCache.set(d, module);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(null, module);\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tresolveRequestArray(contextInfo, context, array, resolver, callback) {\n\t\tif (array.length === 0) return callback(null, []);\n\t\tasyncLib.map(\n\t\t\tarray,\n\t\t\t(item, callback) => {\n\t\t\t\tresolver.resolve(\n\t\t\t\t\tcontextInfo,\n\t\t\t\t\tcontext,\n\t\t\t\t\titem.loader,\n\t\t\t\t\t{},\n\t\t\t\t\t(err, result) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\terr &&\n\t\t\t\t\t\t\t/^[^/]*$/.test(item.loader) &&\n\t\t\t\t\t\t\t!/-loader$/.test(item.loader)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn resolver.resolve(\n\t\t\t\t\t\t\t\tcontextInfo,\n\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\titem.loader + \"-loader\",\n\t\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t\terr2 => {\n\t\t\t\t\t\t\t\t\tif (!err2) {\n\t\t\t\t\t\t\t\t\t\terr.message =\n\t\t\t\t\t\t\t\t\t\t\terr.message +\n\t\t\t\t\t\t\t\t\t\t\t\"\\n\" +\n\t\t\t\t\t\t\t\t\t\t\t\"BREAKING CHANGE: It's no longer allowed to omit the '-loader' suffix when using loaders.\\n\" +\n\t\t\t\t\t\t\t\t\t\t\t`                 You need to specify '${item.loader}-loader' instead of '${item.loader}',\\n` +\n\t\t\t\t\t\t\t\t\t\t\t\"                 see https://webpack.js.org/migrate/3/#automatic-loader-module-name-extension-removed\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcallback(err);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t\t\tconst optionsOnly = item.options\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\toptions: item.options\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\treturn callback(\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tObject.assign({}, item, identToLoaderRequest(result), optionsOnly)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t},\n\t\t\tcallback\n\t\t);\n\t}\n\n\tgetParser(type, parserOptions) {\n\t\tlet ident = type;\n\t\tif (parserOptions) {\n\t\t\tif (parserOptions.ident) {\n\t\t\t\tident = `${type}|${parserOptions.ident}`;\n\t\t\t} else {\n\t\t\t\tident = JSON.stringify([type, parserOptions]);\n\t\t\t}\n\t\t}\n\t\tif (ident in this.parserCache) {\n\t\t\treturn this.parserCache[ident];\n\t\t}\n\t\treturn (this.parserCache[ident] = this.createParser(type, parserOptions));\n\t}\n\n\tcreateParser(type, parserOptions = {}) {\n\t\tconst parser = this.hooks.createParser.for(type).call(parserOptions);\n\t\tif (!parser) {\n\t\t\tthrow new Error(`No parser registered for ${type}`);\n\t\t}\n\t\tthis.hooks.parser.for(type).call(parser, parserOptions);\n\t\treturn parser;\n\t}\n\n\tgetGenerator(type, generatorOptions) {\n\t\tlet ident = type;\n\t\tif (generatorOptions) {\n\t\t\tif (generatorOptions.ident) {\n\t\t\t\tident = `${type}|${generatorOptions.ident}`;\n\t\t\t} else {\n\t\t\t\tident = JSON.stringify([type, generatorOptions]);\n\t\t\t}\n\t\t}\n\t\tif (ident in this.generatorCache) {\n\t\t\treturn this.generatorCache[ident];\n\t\t}\n\t\treturn (this.generatorCache[ident] = this.createGenerator(\n\t\t\ttype,\n\t\t\tgeneratorOptions\n\t\t));\n\t}\n\n\tcreateGenerator(type, generatorOptions = {}) {\n\t\tconst generator = this.hooks.createGenerator\n\t\t\t.for(type)\n\t\t\t.call(generatorOptions);\n\t\tif (!generator) {\n\t\t\tthrow new Error(`No generator registered for ${type}`);\n\t\t}\n\t\tthis.hooks.generator.for(type).call(generator, generatorOptions);\n\t\treturn generator;\n\t}\n\n\tgetResolver(type, resolveOptions) {\n\t\treturn this.resolverFactory.get(\n\t\t\ttype,\n\t\t\tresolveOptions || EMPTY_RESOLVE_OPTIONS\n\t\t);\n\t}\n}\n\nmodule.exports = NormalModuleFactory;\n"]},"metadata":{},"sourceType":"script"}