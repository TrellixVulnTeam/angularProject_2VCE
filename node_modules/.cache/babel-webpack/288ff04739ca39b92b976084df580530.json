{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createSuper\");\n\nvar parseJson = require(\"json-parse-better-errors\");\n\nvar asyncLib = require(\"neo-async\");\n\nvar path = require(\"path\");\n\nvar _require = require(\"webpack-sources\"),\n    Source = _require.Source;\n\nvar util = require(\"util\");\n\nvar _require2 = require(\"tapable\"),\n    Tapable = _require2.Tapable,\n    SyncHook = _require2.SyncHook,\n    SyncBailHook = _require2.SyncBailHook,\n    AsyncParallelHook = _require2.AsyncParallelHook,\n    AsyncSeriesHook = _require2.AsyncSeriesHook;\n\nvar Compilation = require(\"./Compilation\");\n\nvar Stats = require(\"./Stats\");\n\nvar Watching = require(\"./Watching\");\n\nvar NormalModuleFactory = require(\"./NormalModuleFactory\");\n\nvar ContextModuleFactory = require(\"./ContextModuleFactory\");\n\nvar ResolverFactory = require(\"./ResolverFactory\");\n\nvar RequestShortener = require(\"./RequestShortener\");\n\nvar _require3 = require(\"./util/identifier\"),\n    makePathsRelative = _require3.makePathsRelative;\n\nvar ConcurrentCompilationError = require(\"./ConcurrentCompilationError\");\n\nvar _require4 = require(\"./logging/Logger\"),\n    Logger = _require4.Logger;\n/** @typedef {import(\"../declarations/WebpackOptions\").Entry} Entry */\n\n/** @typedef {import(\"../declarations/WebpackOptions\").WebpackOptions} WebpackOptions */\n\n/**\n * @typedef {Object} CompilationParams\n * @property {NormalModuleFactory} normalModuleFactory\n * @property {ContextModuleFactory} contextModuleFactory\n * @property {Set<string>} compilationDependencies\n */\n\n\nvar Compiler = /*#__PURE__*/function (_Tapable) {\n  _inherits(Compiler, _Tapable);\n\n  var _super = _createSuper(Compiler);\n\n  function Compiler(context) {\n    var _this;\n\n    _classCallCheck(this, Compiler);\n\n    _this = _super.call(this);\n    _this.hooks = {\n      /** @type {SyncBailHook<Compilation>} */\n      shouldEmit: new SyncBailHook([\"compilation\"]),\n\n      /** @type {AsyncSeriesHook<Stats>} */\n      done: new AsyncSeriesHook([\"stats\"]),\n\n      /** @type {AsyncSeriesHook<>} */\n      additionalPass: new AsyncSeriesHook([]),\n\n      /** @type {AsyncSeriesHook<Compiler>} */\n      beforeRun: new AsyncSeriesHook([\"compiler\"]),\n\n      /** @type {AsyncSeriesHook<Compiler>} */\n      run: new AsyncSeriesHook([\"compiler\"]),\n\n      /** @type {AsyncSeriesHook<Compilation>} */\n      emit: new AsyncSeriesHook([\"compilation\"]),\n\n      /** @type {AsyncSeriesHook<string, Buffer>} */\n      assetEmitted: new AsyncSeriesHook([\"file\", \"content\"]),\n\n      /** @type {AsyncSeriesHook<Compilation>} */\n      afterEmit: new AsyncSeriesHook([\"compilation\"]),\n\n      /** @type {SyncHook<Compilation, CompilationParams>} */\n      thisCompilation: new SyncHook([\"compilation\", \"params\"]),\n\n      /** @type {SyncHook<Compilation, CompilationParams>} */\n      compilation: new SyncHook([\"compilation\", \"params\"]),\n\n      /** @type {SyncHook<NormalModuleFactory>} */\n      normalModuleFactory: new SyncHook([\"normalModuleFactory\"]),\n\n      /** @type {SyncHook<ContextModuleFactory>}  */\n      contextModuleFactory: new SyncHook([\"contextModulefactory\"]),\n\n      /** @type {AsyncSeriesHook<CompilationParams>} */\n      beforeCompile: new AsyncSeriesHook([\"params\"]),\n\n      /** @type {SyncHook<CompilationParams>} */\n      compile: new SyncHook([\"params\"]),\n\n      /** @type {AsyncParallelHook<Compilation>} */\n      make: new AsyncParallelHook([\"compilation\"]),\n\n      /** @type {AsyncSeriesHook<Compilation>} */\n      afterCompile: new AsyncSeriesHook([\"compilation\"]),\n\n      /** @type {AsyncSeriesHook<Compiler>} */\n      watchRun: new AsyncSeriesHook([\"compiler\"]),\n\n      /** @type {SyncHook<Error>} */\n      failed: new SyncHook([\"error\"]),\n\n      /** @type {SyncHook<string, string>} */\n      invalid: new SyncHook([\"filename\", \"changeTime\"]),\n\n      /** @type {SyncHook} */\n      watchClose: new SyncHook([]),\n\n      /** @type {SyncBailHook<string, string, any[]>} */\n      infrastructureLog: new SyncBailHook([\"origin\", \"type\", \"args\"]),\n      // TODO the following hooks are weirdly located here\n      // TODO move them for webpack 5\n\n      /** @type {SyncHook} */\n      environment: new SyncHook([]),\n\n      /** @type {SyncHook} */\n      afterEnvironment: new SyncHook([]),\n\n      /** @type {SyncHook<Compiler>} */\n      afterPlugins: new SyncHook([\"compiler\"]),\n\n      /** @type {SyncHook<Compiler>} */\n      afterResolvers: new SyncHook([\"compiler\"]),\n\n      /** @type {SyncBailHook<string, Entry>} */\n      entryOption: new SyncBailHook([\"context\", \"entry\"])\n    }; // TODO webpack 5 remove this\n\n    _this.hooks.infrastructurelog = _this.hooks.infrastructureLog;\n\n    _this._pluginCompat.tap(\"Compiler\", function (options) {\n      switch (options.name) {\n        case \"additional-pass\":\n        case \"before-run\":\n        case \"run\":\n        case \"emit\":\n        case \"after-emit\":\n        case \"before-compile\":\n        case \"make\":\n        case \"after-compile\":\n        case \"watch-run\":\n          options.async = true;\n          break;\n      }\n    });\n    /** @type {string=} */\n\n\n    _this.name = undefined;\n    /** @type {Compilation=} */\n\n    _this.parentCompilation = undefined;\n    /** @type {string} */\n\n    _this.outputPath = \"\";\n    _this.outputFileSystem = null;\n    _this.inputFileSystem = null;\n    /** @type {string|null} */\n\n    _this.recordsInputPath = null;\n    /** @type {string|null} */\n\n    _this.recordsOutputPath = null;\n    _this.records = {};\n    _this.removedFiles = new Set();\n    /** @type {Map<string, number>} */\n\n    _this.fileTimestamps = new Map();\n    /** @type {Map<string, number>} */\n\n    _this.contextTimestamps = new Map();\n    /** @type {ResolverFactory} */\n\n    _this.resolverFactory = new ResolverFactory();\n    _this.infrastructureLogger = undefined; // TODO remove in webpack 5\n\n    _this.resolvers = {\n      normal: {\n        plugins: util.deprecate(function (hook, fn) {\n          _this.resolverFactory.plugin(\"resolver normal\", function (resolver) {\n            resolver.plugin(hook, fn);\n          });\n        }, \"webpack: Using compiler.resolvers.normal is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver normal\", resolver => {\\n  resolver.plugin(/* … */);\\n}); instead.'),\n        apply: util.deprecate(function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          _this.resolverFactory.plugin(\"resolver normal\", function (resolver) {\n            resolver.apply.apply(resolver, args);\n          });\n        }, \"webpack: Using compiler.resolvers.normal is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver normal\", resolver => {\\n  resolver.apply(/* … */);\\n}); instead.')\n      },\n      loader: {\n        plugins: util.deprecate(function (hook, fn) {\n          _this.resolverFactory.plugin(\"resolver loader\", function (resolver) {\n            resolver.plugin(hook, fn);\n          });\n        }, \"webpack: Using compiler.resolvers.loader is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver loader\", resolver => {\\n  resolver.plugin(/* … */);\\n}); instead.'),\n        apply: util.deprecate(function () {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          _this.resolverFactory.plugin(\"resolver loader\", function (resolver) {\n            resolver.apply.apply(resolver, args);\n          });\n        }, \"webpack: Using compiler.resolvers.loader is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver loader\", resolver => {\\n  resolver.apply(/* … */);\\n}); instead.')\n      },\n      context: {\n        plugins: util.deprecate(function (hook, fn) {\n          _this.resolverFactory.plugin(\"resolver context\", function (resolver) {\n            resolver.plugin(hook, fn);\n          });\n        }, \"webpack: Using compiler.resolvers.context is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver context\", resolver => {\\n  resolver.plugin(/* … */);\\n}); instead.'),\n        apply: util.deprecate(function () {\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          _this.resolverFactory.plugin(\"resolver context\", function (resolver) {\n            resolver.apply.apply(resolver, args);\n          });\n        }, \"webpack: Using compiler.resolvers.context is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver context\", resolver => {\\n  resolver.apply(/* … */);\\n}); instead.')\n      }\n    };\n    /** @type {WebpackOptions} */\n\n    _this.options =\n    /** @type {WebpackOptions} */\n    {};\n    _this.context = context;\n    _this.requestShortener = new RequestShortener(context);\n    /** @type {boolean} */\n\n    _this.running = false;\n    /** @type {boolean} */\n\n    _this.watchMode = false;\n    /** @private @type {WeakMap<Source, { sizeOnlySource: SizeOnlySource, writtenTo: Map<string, number> }>} */\n\n    _this._assetEmittingSourceCache = new WeakMap();\n    /** @private @type {Map<string, number>} */\n\n    _this._assetEmittingWrittenFiles = new Map();\n    return _this;\n  }\n  /**\n   * @param {string | (function(): string)} name name of the logger, or function called once to get the logger name\n   * @returns {Logger} a logger with that name\n   */\n\n\n  _createClass(Compiler, [{\n    key: \"getInfrastructureLogger\",\n    value: function getInfrastructureLogger(name) {\n      var _this2 = this;\n\n      if (!name) {\n        throw new TypeError(\"Compiler.getInfrastructureLogger(name) called without a name\");\n      }\n\n      return new Logger(function (type, args) {\n        if (typeof name === \"function\") {\n          name = name();\n\n          if (!name) {\n            throw new TypeError(\"Compiler.getInfrastructureLogger(name) called with a function not returning a name\");\n          }\n        }\n\n        if (_this2.hooks.infrastructureLog.call(name, type, args) === undefined) {\n          if (_this2.infrastructureLogger !== undefined) {\n            _this2.infrastructureLogger(name, type, args);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"watch\",\n    value: function watch(watchOptions, handler) {\n      if (this.running) return handler(new ConcurrentCompilationError());\n      this.running = true;\n      this.watchMode = true;\n      this.fileTimestamps = new Map();\n      this.contextTimestamps = new Map();\n      this.removedFiles = new Set();\n      return new Watching(this, watchOptions, handler);\n    }\n  }, {\n    key: \"run\",\n    value: function run(callback) {\n      var _this3 = this;\n\n      if (this.running) return callback(new ConcurrentCompilationError());\n\n      var finalCallback = function finalCallback(err, stats) {\n        _this3.running = false;\n\n        if (err) {\n          _this3.hooks.failed.call(err);\n        }\n\n        if (callback !== undefined) return callback(err, stats);\n      };\n\n      var startTime = Date.now();\n      this.running = true;\n\n      var onCompiled = function onCompiled(err, compilation) {\n        if (err) return finalCallback(err);\n\n        if (_this3.hooks.shouldEmit.call(compilation) === false) {\n          var stats = new Stats(compilation);\n          stats.startTime = startTime;\n          stats.endTime = Date.now();\n\n          _this3.hooks.done.callAsync(stats, function (err) {\n            if (err) return finalCallback(err);\n            return finalCallback(null, stats);\n          });\n\n          return;\n        }\n\n        _this3.emitAssets(compilation, function (err) {\n          if (err) return finalCallback(err);\n\n          if (compilation.hooks.needAdditionalPass.call()) {\n            compilation.needAdditionalPass = true;\n\n            var _stats = new Stats(compilation);\n\n            _stats.startTime = startTime;\n            _stats.endTime = Date.now();\n\n            _this3.hooks.done.callAsync(_stats, function (err) {\n              if (err) return finalCallback(err);\n\n              _this3.hooks.additionalPass.callAsync(function (err) {\n                if (err) return finalCallback(err);\n\n                _this3.compile(onCompiled);\n              });\n            });\n\n            return;\n          }\n\n          _this3.emitRecords(function (err) {\n            if (err) return finalCallback(err);\n            var stats = new Stats(compilation);\n            stats.startTime = startTime;\n            stats.endTime = Date.now();\n\n            _this3.hooks.done.callAsync(stats, function (err) {\n              if (err) return finalCallback(err);\n              return finalCallback(null, stats);\n            });\n          });\n        });\n      };\n\n      this.hooks.beforeRun.callAsync(this, function (err) {\n        if (err) return finalCallback(err);\n\n        _this3.hooks.run.callAsync(_this3, function (err) {\n          if (err) return finalCallback(err);\n\n          _this3.readRecords(function (err) {\n            if (err) return finalCallback(err);\n\n            _this3.compile(onCompiled);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"runAsChild\",\n    value: function runAsChild(callback) {\n      var _this4 = this;\n\n      this.compile(function (err, compilation) {\n        if (err) return callback(err);\n\n        _this4.parentCompilation.children.push(compilation);\n\n        var _iterator = _createForOfIteratorHelper(compilation.getAssets()),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _step$value = _step.value,\n                name = _step$value.name,\n                source = _step$value.source,\n                info = _step$value.info;\n\n            _this4.parentCompilation.emitAsset(name, source, info);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        var entries = Array.from(compilation.entrypoints.values(), function (ep) {\n          return ep.chunks;\n        }).reduce(function (array, chunks) {\n          return array.concat(chunks);\n        }, []);\n        return callback(null, entries, compilation);\n      });\n    }\n  }, {\n    key: \"purgeInputFileSystem\",\n    value: function purgeInputFileSystem() {\n      if (this.inputFileSystem && this.inputFileSystem.purge) {\n        this.inputFileSystem.purge();\n      }\n    }\n  }, {\n    key: \"emitAssets\",\n    value: function emitAssets(compilation, callback) {\n      var _this5 = this;\n\n      var outputPath;\n\n      var emitFiles = function emitFiles(err) {\n        if (err) return callback(err);\n        asyncLib.forEachLimit(compilation.getAssets(), 15, function (_ref, callback) {\n          var file = _ref.name,\n              source = _ref.source;\n          var targetFile = file;\n          var queryStringIdx = targetFile.indexOf(\"?\");\n\n          if (queryStringIdx >= 0) {\n            targetFile = targetFile.substr(0, queryStringIdx);\n          }\n\n          var writeOut = function writeOut(err) {\n            if (err) return callback(err);\n\n            var targetPath = _this5.outputFileSystem.join(outputPath, targetFile); // TODO webpack 5 remove futureEmitAssets option and make it on by default\n\n\n            if (_this5.options.output.futureEmitAssets) {\n              // check if the target file has already been written by this Compiler\n              var targetFileGeneration = _this5._assetEmittingWrittenFiles.get(targetPath); // create an cache entry for this Source if not already existing\n\n\n              var cacheEntry = _this5._assetEmittingSourceCache.get(source);\n\n              if (cacheEntry === undefined) {\n                cacheEntry = {\n                  sizeOnlySource: undefined,\n                  writtenTo: new Map()\n                };\n\n                _this5._assetEmittingSourceCache.set(source, cacheEntry);\n              } // if the target file has already been written\n\n\n              if (targetFileGeneration !== undefined) {\n                // check if the Source has been written to this target file\n                var writtenGeneration = cacheEntry.writtenTo.get(targetPath);\n\n                if (writtenGeneration === targetFileGeneration) {\n                  // if yes, we skip writing the file\n                  // as it's already there\n                  // (we assume one doesn't remove files while the Compiler is running)\n                  compilation.updateAsset(file, cacheEntry.sizeOnlySource, {\n                    size: cacheEntry.sizeOnlySource.size()\n                  });\n                  return callback();\n                }\n              } // TODO webpack 5: if info.immutable check if file already exists in output\n              // skip emitting if it's already there\n              // get the binary (Buffer) content from the Source\n\n              /** @type {Buffer} */\n\n\n              var content;\n\n              if (typeof source.buffer === \"function\") {\n                content = source.buffer();\n              } else {\n                var bufferOrString = source.source();\n\n                if (Buffer.isBuffer(bufferOrString)) {\n                  content = bufferOrString;\n                } else {\n                  content = Buffer.from(bufferOrString, \"utf8\");\n                }\n              } // Create a replacement resource which only allows to ask for size\n              // This allows to GC all memory allocated by the Source\n              // (expect when the Source is stored in any other cache)\n\n\n              cacheEntry.sizeOnlySource = new SizeOnlySource(content.length);\n              compilation.updateAsset(file, cacheEntry.sizeOnlySource, {\n                size: content.length\n              }); // Write the file to output file system\n\n              _this5.outputFileSystem.writeFile(targetPath, content, function (err) {\n                if (err) return callback(err); // information marker that the asset has been emitted\n\n                compilation.emittedAssets.add(file); // cache the information that the Source has been written to that location\n\n                var newGeneration = targetFileGeneration === undefined ? 1 : targetFileGeneration + 1;\n                cacheEntry.writtenTo.set(targetPath, newGeneration);\n\n                _this5._assetEmittingWrittenFiles.set(targetPath, newGeneration);\n\n                _this5.hooks.assetEmitted.callAsync(file, content, callback);\n              });\n            } else {\n              if (source.existsAt === targetPath) {\n                source.emitted = false;\n                return callback();\n              }\n\n              var _content = source.source();\n\n              if (!Buffer.isBuffer(_content)) {\n                _content = Buffer.from(_content, \"utf8\");\n              }\n\n              source.existsAt = targetPath;\n              source.emitted = true;\n\n              _this5.outputFileSystem.writeFile(targetPath, _content, function (err) {\n                if (err) return callback(err);\n\n                _this5.hooks.assetEmitted.callAsync(file, _content, callback);\n              });\n            }\n          };\n\n          if (targetFile.match(/\\/|\\\\/)) {\n            var dir = path.dirname(targetFile);\n\n            _this5.outputFileSystem.mkdirp(_this5.outputFileSystem.join(outputPath, dir), writeOut);\n          } else {\n            writeOut();\n          }\n        }, function (err) {\n          if (err) return callback(err);\n\n          _this5.hooks.afterEmit.callAsync(compilation, function (err) {\n            if (err) return callback(err);\n            return callback();\n          });\n        });\n      };\n\n      this.hooks.emit.callAsync(compilation, function (err) {\n        if (err) return callback(err);\n        outputPath = compilation.getPath(_this5.outputPath);\n\n        _this5.outputFileSystem.mkdirp(outputPath, emitFiles);\n      });\n    }\n  }, {\n    key: \"emitRecords\",\n    value: function emitRecords(callback) {\n      var _this6 = this;\n\n      if (!this.recordsOutputPath) return callback();\n      var idx1 = this.recordsOutputPath.lastIndexOf(\"/\");\n      var idx2 = this.recordsOutputPath.lastIndexOf(\"\\\\\");\n      var recordsOutputPathDirectory = null;\n\n      if (idx1 > idx2) {\n        recordsOutputPathDirectory = this.recordsOutputPath.substr(0, idx1);\n      } else if (idx1 < idx2) {\n        recordsOutputPathDirectory = this.recordsOutputPath.substr(0, idx2);\n      }\n\n      var writeFile = function writeFile() {\n        _this6.outputFileSystem.writeFile(_this6.recordsOutputPath, JSON.stringify(_this6.records, undefined, 2), callback);\n      };\n\n      if (!recordsOutputPathDirectory) {\n        return writeFile();\n      }\n\n      this.outputFileSystem.mkdirp(recordsOutputPathDirectory, function (err) {\n        if (err) return callback(err);\n        writeFile();\n      });\n    }\n  }, {\n    key: \"readRecords\",\n    value: function readRecords(callback) {\n      var _this7 = this;\n\n      if (!this.recordsInputPath) {\n        this.records = {};\n        return callback();\n      }\n\n      this.inputFileSystem.stat(this.recordsInputPath, function (err) {\n        // It doesn't exist\n        // We can ignore this.\n        if (err) return callback();\n\n        _this7.inputFileSystem.readFile(_this7.recordsInputPath, function (err, content) {\n          if (err) return callback(err);\n\n          try {\n            _this7.records = parseJson(content.toString(\"utf-8\"));\n          } catch (e) {\n            e.message = \"Cannot parse records: \" + e.message;\n            return callback(e);\n          }\n\n          return callback();\n        });\n      });\n    }\n  }, {\n    key: \"createChildCompiler\",\n    value: function createChildCompiler(compilation, compilerName, compilerIndex, outputOptions, plugins) {\n      var childCompiler = new Compiler(this.context);\n\n      if (Array.isArray(plugins)) {\n        var _iterator2 = _createForOfIteratorHelper(plugins),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var plugin = _step2.value;\n            plugin.apply(childCompiler);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n\n      for (var name in this.hooks) {\n        if (![\"make\", \"compile\", \"emit\", \"afterEmit\", \"invalid\", \"done\", \"thisCompilation\"].includes(name)) {\n          if (childCompiler.hooks[name]) {\n            childCompiler.hooks[name].taps = this.hooks[name].taps.slice();\n          }\n        }\n      }\n\n      childCompiler.name = compilerName;\n      childCompiler.outputPath = this.outputPath;\n      childCompiler.inputFileSystem = this.inputFileSystem;\n      childCompiler.outputFileSystem = null;\n      childCompiler.resolverFactory = this.resolverFactory;\n      childCompiler.fileTimestamps = this.fileTimestamps;\n      childCompiler.contextTimestamps = this.contextTimestamps;\n      var relativeCompilerName = makePathsRelative(this.context, compilerName);\n\n      if (!this.records[relativeCompilerName]) {\n        this.records[relativeCompilerName] = [];\n      }\n\n      if (this.records[relativeCompilerName][compilerIndex]) {\n        childCompiler.records = this.records[relativeCompilerName][compilerIndex];\n      } else {\n        this.records[relativeCompilerName].push(childCompiler.records = {});\n      }\n\n      childCompiler.options = Object.create(this.options);\n      childCompiler.options.output = Object.create(childCompiler.options.output);\n\n      for (var _name in outputOptions) {\n        childCompiler.options.output[_name] = outputOptions[_name];\n      }\n\n      childCompiler.parentCompilation = compilation;\n      compilation.hooks.childCompiler.call(childCompiler, compilerName, compilerIndex);\n      return childCompiler;\n    }\n  }, {\n    key: \"isChild\",\n    value: function isChild() {\n      return !!this.parentCompilation;\n    }\n  }, {\n    key: \"createCompilation\",\n    value: function createCompilation() {\n      return new Compilation(this);\n    }\n  }, {\n    key: \"newCompilation\",\n    value: function newCompilation(params) {\n      var compilation = this.createCompilation();\n      compilation.fileTimestamps = this.fileTimestamps;\n      compilation.contextTimestamps = this.contextTimestamps;\n      compilation.name = this.name;\n      compilation.records = this.records;\n      compilation.compilationDependencies = params.compilationDependencies;\n      this.hooks.thisCompilation.call(compilation, params);\n      this.hooks.compilation.call(compilation, params);\n      return compilation;\n    }\n  }, {\n    key: \"createNormalModuleFactory\",\n    value: function createNormalModuleFactory() {\n      var normalModuleFactory = new NormalModuleFactory(this.options.context, this.resolverFactory, this.options.module || {});\n      this.hooks.normalModuleFactory.call(normalModuleFactory);\n      return normalModuleFactory;\n    }\n  }, {\n    key: \"createContextModuleFactory\",\n    value: function createContextModuleFactory() {\n      var contextModuleFactory = new ContextModuleFactory(this.resolverFactory);\n      this.hooks.contextModuleFactory.call(contextModuleFactory);\n      return contextModuleFactory;\n    }\n  }, {\n    key: \"newCompilationParams\",\n    value: function newCompilationParams() {\n      var params = {\n        normalModuleFactory: this.createNormalModuleFactory(),\n        contextModuleFactory: this.createContextModuleFactory(),\n        compilationDependencies: new Set()\n      };\n      return params;\n    }\n  }, {\n    key: \"compile\",\n    value: function compile(callback) {\n      var _this8 = this;\n\n      var params = this.newCompilationParams();\n      this.hooks.beforeCompile.callAsync(params, function (err) {\n        if (err) return callback(err);\n\n        _this8.hooks.compile.call(params);\n\n        var compilation = _this8.newCompilation(params);\n\n        _this8.hooks.make.callAsync(compilation, function (err) {\n          if (err) return callback(err);\n          compilation.finish(function (err) {\n            if (err) return callback(err);\n            compilation.seal(function (err) {\n              if (err) return callback(err);\n\n              _this8.hooks.afterCompile.callAsync(compilation, function (err) {\n                if (err) return callback(err);\n                return callback(null, compilation);\n              });\n            });\n          });\n        });\n      });\n    }\n  }]);\n\n  return Compiler;\n}(Tapable);\n\nmodule.exports = Compiler;\n\nvar SizeOnlySource = /*#__PURE__*/function (_Source) {\n  _inherits(SizeOnlySource, _Source);\n\n  var _super2 = _createSuper(SizeOnlySource);\n\n  function SizeOnlySource(size) {\n    var _this9;\n\n    _classCallCheck(this, SizeOnlySource);\n\n    _this9 = _super2.call(this);\n    _this9._size = size;\n    return _this9;\n  }\n\n  _createClass(SizeOnlySource, [{\n    key: \"_error\",\n    value: function _error() {\n      return new Error(\"Content and Map of this Source is no longer available (only size() is supported)\");\n    }\n  }, {\n    key: \"size\",\n    value: function size() {\n      return this._size;\n    }\n    /**\n     * @param {any} options options\n     * @returns {string} the source\n     */\n\n  }, {\n    key: \"source\",\n    value: function source(options) {\n      throw this._error();\n    }\n  }, {\n    key: \"node\",\n    value: function node() {\n      throw this._error();\n    }\n  }, {\n    key: \"listMap\",\n    value: function listMap() {\n      throw this._error();\n    }\n  }, {\n    key: \"map\",\n    value: function map() {\n      throw this._error();\n    }\n  }, {\n    key: \"listNode\",\n    value: function listNode() {\n      throw this._error();\n    }\n  }, {\n    key: \"updateHash\",\n    value: function updateHash() {\n      throw this._error();\n    }\n  }]);\n\n  return SizeOnlySource;\n}(Source);","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/webpack/lib/Compiler.js"],"names":["parseJson","require","asyncLib","path","Source","util","Tapable","SyncHook","SyncBailHook","AsyncParallelHook","AsyncSeriesHook","Compilation","Stats","Watching","NormalModuleFactory","ContextModuleFactory","ResolverFactory","RequestShortener","makePathsRelative","ConcurrentCompilationError","Logger","Compiler","context","hooks","shouldEmit","done","additionalPass","beforeRun","run","emit","assetEmitted","afterEmit","thisCompilation","compilation","normalModuleFactory","contextModuleFactory","beforeCompile","compile","make","afterCompile","watchRun","failed","invalid","watchClose","infrastructureLog","environment","afterEnvironment","afterPlugins","afterResolvers","entryOption","infrastructurelog","_pluginCompat","tap","options","name","async","undefined","parentCompilation","outputPath","outputFileSystem","inputFileSystem","recordsInputPath","recordsOutputPath","records","removedFiles","Set","fileTimestamps","Map","contextTimestamps","resolverFactory","infrastructureLogger","resolvers","normal","plugins","deprecate","hook","fn","plugin","resolver","apply","args","loader","requestShortener","running","watchMode","_assetEmittingSourceCache","WeakMap","_assetEmittingWrittenFiles","TypeError","type","call","watchOptions","handler","callback","finalCallback","err","stats","startTime","Date","now","onCompiled","endTime","callAsync","emitAssets","needAdditionalPass","emitRecords","readRecords","children","push","getAssets","source","info","emitAsset","entries","Array","from","entrypoints","values","ep","chunks","reduce","array","concat","purge","emitFiles","forEachLimit","file","targetFile","queryStringIdx","indexOf","substr","writeOut","targetPath","join","output","futureEmitAssets","targetFileGeneration","get","cacheEntry","sizeOnlySource","writtenTo","set","writtenGeneration","updateAsset","size","content","buffer","bufferOrString","Buffer","isBuffer","SizeOnlySource","length","writeFile","emittedAssets","add","newGeneration","existsAt","emitted","match","dir","dirname","mkdirp","getPath","idx1","lastIndexOf","idx2","recordsOutputPathDirectory","JSON","stringify","stat","readFile","toString","e","message","compilerName","compilerIndex","outputOptions","childCompiler","isArray","includes","taps","slice","relativeCompilerName","Object","create","params","createCompilation","compilationDependencies","module","createNormalModuleFactory","createContextModuleFactory","newCompilationParams","newCompilation","finish","seal","exports","_size","Error","_error"],"mappings":"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","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst parseJson = require(\"json-parse-better-errors\");\nconst asyncLib = require(\"neo-async\");\nconst path = require(\"path\");\nconst { Source } = require(\"webpack-sources\");\nconst util = require(\"util\");\nconst {\n\tTapable,\n\tSyncHook,\n\tSyncBailHook,\n\tAsyncParallelHook,\n\tAsyncSeriesHook\n} = require(\"tapable\");\n\nconst Compilation = require(\"./Compilation\");\nconst Stats = require(\"./Stats\");\nconst Watching = require(\"./Watching\");\nconst NormalModuleFactory = require(\"./NormalModuleFactory\");\nconst ContextModuleFactory = require(\"./ContextModuleFactory\");\nconst ResolverFactory = require(\"./ResolverFactory\");\n\nconst RequestShortener = require(\"./RequestShortener\");\nconst { makePathsRelative } = require(\"./util/identifier\");\nconst ConcurrentCompilationError = require(\"./ConcurrentCompilationError\");\nconst { Logger } = require(\"./logging/Logger\");\n\n/** @typedef {import(\"../declarations/WebpackOptions\").Entry} Entry */\n/** @typedef {import(\"../declarations/WebpackOptions\").WebpackOptions} WebpackOptions */\n\n/**\n * @typedef {Object} CompilationParams\n * @property {NormalModuleFactory} normalModuleFactory\n * @property {ContextModuleFactory} contextModuleFactory\n * @property {Set<string>} compilationDependencies\n */\n\nclass Compiler extends Tapable {\n\tconstructor(context) {\n\t\tsuper();\n\t\tthis.hooks = {\n\t\t\t/** @type {SyncBailHook<Compilation>} */\n\t\t\tshouldEmit: new SyncBailHook([\"compilation\"]),\n\t\t\t/** @type {AsyncSeriesHook<Stats>} */\n\t\t\tdone: new AsyncSeriesHook([\"stats\"]),\n\t\t\t/** @type {AsyncSeriesHook<>} */\n\t\t\tadditionalPass: new AsyncSeriesHook([]),\n\t\t\t/** @type {AsyncSeriesHook<Compiler>} */\n\t\t\tbeforeRun: new AsyncSeriesHook([\"compiler\"]),\n\t\t\t/** @type {AsyncSeriesHook<Compiler>} */\n\t\t\trun: new AsyncSeriesHook([\"compiler\"]),\n\t\t\t/** @type {AsyncSeriesHook<Compilation>} */\n\t\t\temit: new AsyncSeriesHook([\"compilation\"]),\n\t\t\t/** @type {AsyncSeriesHook<string, Buffer>} */\n\t\t\tassetEmitted: new AsyncSeriesHook([\"file\", \"content\"]),\n\t\t\t/** @type {AsyncSeriesHook<Compilation>} */\n\t\t\tafterEmit: new AsyncSeriesHook([\"compilation\"]),\n\n\t\t\t/** @type {SyncHook<Compilation, CompilationParams>} */\n\t\t\tthisCompilation: new SyncHook([\"compilation\", \"params\"]),\n\t\t\t/** @type {SyncHook<Compilation, CompilationParams>} */\n\t\t\tcompilation: new SyncHook([\"compilation\", \"params\"]),\n\t\t\t/** @type {SyncHook<NormalModuleFactory>} */\n\t\t\tnormalModuleFactory: new SyncHook([\"normalModuleFactory\"]),\n\t\t\t/** @type {SyncHook<ContextModuleFactory>}  */\n\t\t\tcontextModuleFactory: new SyncHook([\"contextModulefactory\"]),\n\n\t\t\t/** @type {AsyncSeriesHook<CompilationParams>} */\n\t\t\tbeforeCompile: new AsyncSeriesHook([\"params\"]),\n\t\t\t/** @type {SyncHook<CompilationParams>} */\n\t\t\tcompile: new SyncHook([\"params\"]),\n\t\t\t/** @type {AsyncParallelHook<Compilation>} */\n\t\t\tmake: new AsyncParallelHook([\"compilation\"]),\n\t\t\t/** @type {AsyncSeriesHook<Compilation>} */\n\t\t\tafterCompile: new AsyncSeriesHook([\"compilation\"]),\n\n\t\t\t/** @type {AsyncSeriesHook<Compiler>} */\n\t\t\twatchRun: new AsyncSeriesHook([\"compiler\"]),\n\t\t\t/** @type {SyncHook<Error>} */\n\t\t\tfailed: new SyncHook([\"error\"]),\n\t\t\t/** @type {SyncHook<string, string>} */\n\t\t\tinvalid: new SyncHook([\"filename\", \"changeTime\"]),\n\t\t\t/** @type {SyncHook} */\n\t\t\twatchClose: new SyncHook([]),\n\n\t\t\t/** @type {SyncBailHook<string, string, any[]>} */\n\t\t\tinfrastructureLog: new SyncBailHook([\"origin\", \"type\", \"args\"]),\n\n\t\t\t// TODO the following hooks are weirdly located here\n\t\t\t// TODO move them for webpack 5\n\t\t\t/** @type {SyncHook} */\n\t\t\tenvironment: new SyncHook([]),\n\t\t\t/** @type {SyncHook} */\n\t\t\tafterEnvironment: new SyncHook([]),\n\t\t\t/** @type {SyncHook<Compiler>} */\n\t\t\tafterPlugins: new SyncHook([\"compiler\"]),\n\t\t\t/** @type {SyncHook<Compiler>} */\n\t\t\tafterResolvers: new SyncHook([\"compiler\"]),\n\t\t\t/** @type {SyncBailHook<string, Entry>} */\n\t\t\tentryOption: new SyncBailHook([\"context\", \"entry\"])\n\t\t};\n\t\t// TODO webpack 5 remove this\n\t\tthis.hooks.infrastructurelog = this.hooks.infrastructureLog;\n\n\t\tthis._pluginCompat.tap(\"Compiler\", options => {\n\t\t\tswitch (options.name) {\n\t\t\t\tcase \"additional-pass\":\n\t\t\t\tcase \"before-run\":\n\t\t\t\tcase \"run\":\n\t\t\t\tcase \"emit\":\n\t\t\t\tcase \"after-emit\":\n\t\t\t\tcase \"before-compile\":\n\t\t\t\tcase \"make\":\n\t\t\t\tcase \"after-compile\":\n\t\t\t\tcase \"watch-run\":\n\t\t\t\t\toptions.async = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\t/** @type {string=} */\n\t\tthis.name = undefined;\n\t\t/** @type {Compilation=} */\n\t\tthis.parentCompilation = undefined;\n\t\t/** @type {string} */\n\t\tthis.outputPath = \"\";\n\n\t\tthis.outputFileSystem = null;\n\t\tthis.inputFileSystem = null;\n\n\t\t/** @type {string|null} */\n\t\tthis.recordsInputPath = null;\n\t\t/** @type {string|null} */\n\t\tthis.recordsOutputPath = null;\n\t\tthis.records = {};\n\t\tthis.removedFiles = new Set();\n\t\t/** @type {Map<string, number>} */\n\t\tthis.fileTimestamps = new Map();\n\t\t/** @type {Map<string, number>} */\n\t\tthis.contextTimestamps = new Map();\n\t\t/** @type {ResolverFactory} */\n\t\tthis.resolverFactory = new ResolverFactory();\n\n\t\tthis.infrastructureLogger = undefined;\n\n\t\t// TODO remove in webpack 5\n\t\tthis.resolvers = {\n\t\t\tnormal: {\n\t\t\t\tplugins: util.deprecate((hook, fn) => {\n\t\t\t\t\tthis.resolverFactory.plugin(\"resolver normal\", resolver => {\n\t\t\t\t\t\tresolver.plugin(hook, fn);\n\t\t\t\t\t});\n\t\t\t\t}, \"webpack: Using compiler.resolvers.normal is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver normal\", resolver => {\\n  resolver.plugin(/* … */);\\n}); instead.'),\n\t\t\t\tapply: util.deprecate((...args) => {\n\t\t\t\t\tthis.resolverFactory.plugin(\"resolver normal\", resolver => {\n\t\t\t\t\t\tresolver.apply(...args);\n\t\t\t\t\t});\n\t\t\t\t}, \"webpack: Using compiler.resolvers.normal is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver normal\", resolver => {\\n  resolver.apply(/* … */);\\n}); instead.')\n\t\t\t},\n\t\t\tloader: {\n\t\t\t\tplugins: util.deprecate((hook, fn) => {\n\t\t\t\t\tthis.resolverFactory.plugin(\"resolver loader\", resolver => {\n\t\t\t\t\t\tresolver.plugin(hook, fn);\n\t\t\t\t\t});\n\t\t\t\t}, \"webpack: Using compiler.resolvers.loader is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver loader\", resolver => {\\n  resolver.plugin(/* … */);\\n}); instead.'),\n\t\t\t\tapply: util.deprecate((...args) => {\n\t\t\t\t\tthis.resolverFactory.plugin(\"resolver loader\", resolver => {\n\t\t\t\t\t\tresolver.apply(...args);\n\t\t\t\t\t});\n\t\t\t\t}, \"webpack: Using compiler.resolvers.loader is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver loader\", resolver => {\\n  resolver.apply(/* … */);\\n}); instead.')\n\t\t\t},\n\t\t\tcontext: {\n\t\t\t\tplugins: util.deprecate((hook, fn) => {\n\t\t\t\t\tthis.resolverFactory.plugin(\"resolver context\", resolver => {\n\t\t\t\t\t\tresolver.plugin(hook, fn);\n\t\t\t\t\t});\n\t\t\t\t}, \"webpack: Using compiler.resolvers.context is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver context\", resolver => {\\n  resolver.plugin(/* … */);\\n}); instead.'),\n\t\t\t\tapply: util.deprecate((...args) => {\n\t\t\t\t\tthis.resolverFactory.plugin(\"resolver context\", resolver => {\n\t\t\t\t\t\tresolver.apply(...args);\n\t\t\t\t\t});\n\t\t\t\t}, \"webpack: Using compiler.resolvers.context is deprecated.\\n\" + 'Use compiler.resolverFactory.plugin(\"resolver context\", resolver => {\\n  resolver.apply(/* … */);\\n}); instead.')\n\t\t\t}\n\t\t};\n\n\t\t/** @type {WebpackOptions} */\n\t\tthis.options = /** @type {WebpackOptions} */ ({});\n\n\t\tthis.context = context;\n\n\t\tthis.requestShortener = new RequestShortener(context);\n\n\t\t/** @type {boolean} */\n\t\tthis.running = false;\n\n\t\t/** @type {boolean} */\n\t\tthis.watchMode = false;\n\n\t\t/** @private @type {WeakMap<Source, { sizeOnlySource: SizeOnlySource, writtenTo: Map<string, number> }>} */\n\t\tthis._assetEmittingSourceCache = new WeakMap();\n\t\t/** @private @type {Map<string, number>} */\n\t\tthis._assetEmittingWrittenFiles = new Map();\n\t}\n\n\t/**\n\t * @param {string | (function(): string)} name name of the logger, or function called once to get the logger name\n\t * @returns {Logger} a logger with that name\n\t */\n\tgetInfrastructureLogger(name) {\n\t\tif (!name) {\n\t\t\tthrow new TypeError(\n\t\t\t\t\"Compiler.getInfrastructureLogger(name) called without a name\"\n\t\t\t);\n\t\t}\n\t\treturn new Logger((type, args) => {\n\t\t\tif (typeof name === \"function\") {\n\t\t\t\tname = name();\n\t\t\t\tif (!name) {\n\t\t\t\t\tthrow new TypeError(\n\t\t\t\t\t\t\"Compiler.getInfrastructureLogger(name) called with a function not returning a name\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.hooks.infrastructureLog.call(name, type, args) === undefined) {\n\t\t\t\tif (this.infrastructureLogger !== undefined) {\n\t\t\t\t\tthis.infrastructureLogger(name, type, args);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\twatch(watchOptions, handler) {\n\t\tif (this.running) return handler(new ConcurrentCompilationError());\n\n\t\tthis.running = true;\n\t\tthis.watchMode = true;\n\t\tthis.fileTimestamps = new Map();\n\t\tthis.contextTimestamps = new Map();\n\t\tthis.removedFiles = new Set();\n\t\treturn new Watching(this, watchOptions, handler);\n\t}\n\n\trun(callback) {\n\t\tif (this.running) return callback(new ConcurrentCompilationError());\n\n\t\tconst finalCallback = (err, stats) => {\n\t\t\tthis.running = false;\n\n\t\t\tif (err) {\n\t\t\t\tthis.hooks.failed.call(err);\n\t\t\t}\n\n\t\t\tif (callback !== undefined) return callback(err, stats);\n\t\t};\n\n\t\tconst startTime = Date.now();\n\n\t\tthis.running = true;\n\n\t\tconst onCompiled = (err, compilation) => {\n\t\t\tif (err) return finalCallback(err);\n\n\t\t\tif (this.hooks.shouldEmit.call(compilation) === false) {\n\t\t\t\tconst stats = new Stats(compilation);\n\t\t\t\tstats.startTime = startTime;\n\t\t\t\tstats.endTime = Date.now();\n\t\t\t\tthis.hooks.done.callAsync(stats, err => {\n\t\t\t\t\tif (err) return finalCallback(err);\n\t\t\t\t\treturn finalCallback(null, stats);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.emitAssets(compilation, err => {\n\t\t\t\tif (err) return finalCallback(err);\n\n\t\t\t\tif (compilation.hooks.needAdditionalPass.call()) {\n\t\t\t\t\tcompilation.needAdditionalPass = true;\n\n\t\t\t\t\tconst stats = new Stats(compilation);\n\t\t\t\t\tstats.startTime = startTime;\n\t\t\t\t\tstats.endTime = Date.now();\n\t\t\t\t\tthis.hooks.done.callAsync(stats, err => {\n\t\t\t\t\t\tif (err) return finalCallback(err);\n\n\t\t\t\t\t\tthis.hooks.additionalPass.callAsync(err => {\n\t\t\t\t\t\t\tif (err) return finalCallback(err);\n\t\t\t\t\t\t\tthis.compile(onCompiled);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.emitRecords(err => {\n\t\t\t\t\tif (err) return finalCallback(err);\n\n\t\t\t\t\tconst stats = new Stats(compilation);\n\t\t\t\t\tstats.startTime = startTime;\n\t\t\t\t\tstats.endTime = Date.now();\n\t\t\t\t\tthis.hooks.done.callAsync(stats, err => {\n\t\t\t\t\t\tif (err) return finalCallback(err);\n\t\t\t\t\t\treturn finalCallback(null, stats);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tthis.hooks.beforeRun.callAsync(this, err => {\n\t\t\tif (err) return finalCallback(err);\n\n\t\t\tthis.hooks.run.callAsync(this, err => {\n\t\t\t\tif (err) return finalCallback(err);\n\n\t\t\t\tthis.readRecords(err => {\n\t\t\t\t\tif (err) return finalCallback(err);\n\n\t\t\t\t\tthis.compile(onCompiled);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\trunAsChild(callback) {\n\t\tthis.compile((err, compilation) => {\n\t\t\tif (err) return callback(err);\n\n\t\t\tthis.parentCompilation.children.push(compilation);\n\t\t\tfor (const { name, source, info } of compilation.getAssets()) {\n\t\t\t\tthis.parentCompilation.emitAsset(name, source, info);\n\t\t\t}\n\n\t\t\tconst entries = Array.from(\n\t\t\t\tcompilation.entrypoints.values(),\n\t\t\t\tep => ep.chunks\n\t\t\t).reduce((array, chunks) => {\n\t\t\t\treturn array.concat(chunks);\n\t\t\t}, []);\n\n\t\t\treturn callback(null, entries, compilation);\n\t\t});\n\t}\n\n\tpurgeInputFileSystem() {\n\t\tif (this.inputFileSystem && this.inputFileSystem.purge) {\n\t\t\tthis.inputFileSystem.purge();\n\t\t}\n\t}\n\n\temitAssets(compilation, callback) {\n\t\tlet outputPath;\n\t\tconst emitFiles = err => {\n\t\t\tif (err) return callback(err);\n\n\t\t\tasyncLib.forEachLimit(\n\t\t\t\tcompilation.getAssets(),\n\t\t\t\t15,\n\t\t\t\t({ name: file, source }, callback) => {\n\t\t\t\t\tlet targetFile = file;\n\t\t\t\t\tconst queryStringIdx = targetFile.indexOf(\"?\");\n\t\t\t\t\tif (queryStringIdx >= 0) {\n\t\t\t\t\t\ttargetFile = targetFile.substr(0, queryStringIdx);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst writeOut = err => {\n\t\t\t\t\t\tif (err) return callback(err);\n\t\t\t\t\t\tconst targetPath = this.outputFileSystem.join(\n\t\t\t\t\t\t\toutputPath,\n\t\t\t\t\t\t\ttargetFile\n\t\t\t\t\t\t);\n\t\t\t\t\t\t// TODO webpack 5 remove futureEmitAssets option and make it on by default\n\t\t\t\t\t\tif (this.options.output.futureEmitAssets) {\n\t\t\t\t\t\t\t// check if the target file has already been written by this Compiler\n\t\t\t\t\t\t\tconst targetFileGeneration = this._assetEmittingWrittenFiles.get(\n\t\t\t\t\t\t\t\ttargetPath\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// create an cache entry for this Source if not already existing\n\t\t\t\t\t\t\tlet cacheEntry = this._assetEmittingSourceCache.get(source);\n\t\t\t\t\t\t\tif (cacheEntry === undefined) {\n\t\t\t\t\t\t\t\tcacheEntry = {\n\t\t\t\t\t\t\t\t\tsizeOnlySource: undefined,\n\t\t\t\t\t\t\t\t\twrittenTo: new Map()\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tthis._assetEmittingSourceCache.set(source, cacheEntry);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// if the target file has already been written\n\t\t\t\t\t\t\tif (targetFileGeneration !== undefined) {\n\t\t\t\t\t\t\t\t// check if the Source has been written to this target file\n\t\t\t\t\t\t\t\tconst writtenGeneration = cacheEntry.writtenTo.get(targetPath);\n\t\t\t\t\t\t\t\tif (writtenGeneration === targetFileGeneration) {\n\t\t\t\t\t\t\t\t\t// if yes, we skip writing the file\n\t\t\t\t\t\t\t\t\t// as it's already there\n\t\t\t\t\t\t\t\t\t// (we assume one doesn't remove files while the Compiler is running)\n\n\t\t\t\t\t\t\t\t\tcompilation.updateAsset(file, cacheEntry.sizeOnlySource, {\n\t\t\t\t\t\t\t\t\t\tsize: cacheEntry.sizeOnlySource.size()\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\treturn callback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// TODO webpack 5: if info.immutable check if file already exists in output\n\t\t\t\t\t\t\t// skip emitting if it's already there\n\n\t\t\t\t\t\t\t// get the binary (Buffer) content from the Source\n\t\t\t\t\t\t\t/** @type {Buffer} */\n\t\t\t\t\t\t\tlet content;\n\t\t\t\t\t\t\tif (typeof source.buffer === \"function\") {\n\t\t\t\t\t\t\t\tcontent = source.buffer();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst bufferOrString = source.source();\n\t\t\t\t\t\t\t\tif (Buffer.isBuffer(bufferOrString)) {\n\t\t\t\t\t\t\t\t\tcontent = bufferOrString;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcontent = Buffer.from(bufferOrString, \"utf8\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Create a replacement resource which only allows to ask for size\n\t\t\t\t\t\t\t// This allows to GC all memory allocated by the Source\n\t\t\t\t\t\t\t// (expect when the Source is stored in any other cache)\n\t\t\t\t\t\t\tcacheEntry.sizeOnlySource = new SizeOnlySource(content.length);\n\t\t\t\t\t\t\tcompilation.updateAsset(file, cacheEntry.sizeOnlySource, {\n\t\t\t\t\t\t\t\tsize: content.length\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Write the file to output file system\n\t\t\t\t\t\t\tthis.outputFileSystem.writeFile(targetPath, content, err => {\n\t\t\t\t\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t\t\t\t\t// information marker that the asset has been emitted\n\t\t\t\t\t\t\t\tcompilation.emittedAssets.add(file);\n\n\t\t\t\t\t\t\t\t// cache the information that the Source has been written to that location\n\t\t\t\t\t\t\t\tconst newGeneration =\n\t\t\t\t\t\t\t\t\ttargetFileGeneration === undefined\n\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t: targetFileGeneration + 1;\n\t\t\t\t\t\t\t\tcacheEntry.writtenTo.set(targetPath, newGeneration);\n\t\t\t\t\t\t\t\tthis._assetEmittingWrittenFiles.set(targetPath, newGeneration);\n\t\t\t\t\t\t\t\tthis.hooks.assetEmitted.callAsync(file, content, callback);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (source.existsAt === targetPath) {\n\t\t\t\t\t\t\t\tsource.emitted = false;\n\t\t\t\t\t\t\t\treturn callback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet content = source.source();\n\n\t\t\t\t\t\t\tif (!Buffer.isBuffer(content)) {\n\t\t\t\t\t\t\t\tcontent = Buffer.from(content, \"utf8\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsource.existsAt = targetPath;\n\t\t\t\t\t\t\tsource.emitted = true;\n\t\t\t\t\t\t\tthis.outputFileSystem.writeFile(targetPath, content, err => {\n\t\t\t\t\t\t\t\tif (err) return callback(err);\n\t\t\t\t\t\t\t\tthis.hooks.assetEmitted.callAsync(file, content, callback);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (targetFile.match(/\\/|\\\\/)) {\n\t\t\t\t\t\tconst dir = path.dirname(targetFile);\n\t\t\t\t\t\tthis.outputFileSystem.mkdirp(\n\t\t\t\t\t\t\tthis.outputFileSystem.join(outputPath, dir),\n\t\t\t\t\t\t\twriteOut\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twriteOut();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terr => {\n\t\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t\tthis.hooks.afterEmit.callAsync(compilation, err => {\n\t\t\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t\t\treturn callback();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\tthis.hooks.emit.callAsync(compilation, err => {\n\t\t\tif (err) return callback(err);\n\t\t\toutputPath = compilation.getPath(this.outputPath);\n\t\t\tthis.outputFileSystem.mkdirp(outputPath, emitFiles);\n\t\t});\n\t}\n\n\temitRecords(callback) {\n\t\tif (!this.recordsOutputPath) return callback();\n\t\tconst idx1 = this.recordsOutputPath.lastIndexOf(\"/\");\n\t\tconst idx2 = this.recordsOutputPath.lastIndexOf(\"\\\\\");\n\t\tlet recordsOutputPathDirectory = null;\n\t\tif (idx1 > idx2) {\n\t\t\trecordsOutputPathDirectory = this.recordsOutputPath.substr(0, idx1);\n\t\t} else if (idx1 < idx2) {\n\t\t\trecordsOutputPathDirectory = this.recordsOutputPath.substr(0, idx2);\n\t\t}\n\n\t\tconst writeFile = () => {\n\t\t\tthis.outputFileSystem.writeFile(\n\t\t\t\tthis.recordsOutputPath,\n\t\t\t\tJSON.stringify(this.records, undefined, 2),\n\t\t\t\tcallback\n\t\t\t);\n\t\t};\n\n\t\tif (!recordsOutputPathDirectory) {\n\t\t\treturn writeFile();\n\t\t}\n\t\tthis.outputFileSystem.mkdirp(recordsOutputPathDirectory, err => {\n\t\t\tif (err) return callback(err);\n\t\t\twriteFile();\n\t\t});\n\t}\n\n\treadRecords(callback) {\n\t\tif (!this.recordsInputPath) {\n\t\t\tthis.records = {};\n\t\t\treturn callback();\n\t\t}\n\t\tthis.inputFileSystem.stat(this.recordsInputPath, err => {\n\t\t\t// It doesn't exist\n\t\t\t// We can ignore this.\n\t\t\tif (err) return callback();\n\n\t\t\tthis.inputFileSystem.readFile(this.recordsInputPath, (err, content) => {\n\t\t\t\tif (err) return callback(err);\n\n\t\t\t\ttry {\n\t\t\t\t\tthis.records = parseJson(content.toString(\"utf-8\"));\n\t\t\t\t} catch (e) {\n\t\t\t\t\te.message = \"Cannot parse records: \" + e.message;\n\t\t\t\t\treturn callback(e);\n\t\t\t\t}\n\n\t\t\t\treturn callback();\n\t\t\t});\n\t\t});\n\t}\n\n\tcreateChildCompiler(\n\t\tcompilation,\n\t\tcompilerName,\n\t\tcompilerIndex,\n\t\toutputOptions,\n\t\tplugins\n\t) {\n\t\tconst childCompiler = new Compiler(this.context);\n\t\tif (Array.isArray(plugins)) {\n\t\t\tfor (const plugin of plugins) {\n\t\t\t\tplugin.apply(childCompiler);\n\t\t\t}\n\t\t}\n\t\tfor (const name in this.hooks) {\n\t\t\tif (\n\t\t\t\t![\n\t\t\t\t\t\"make\",\n\t\t\t\t\t\"compile\",\n\t\t\t\t\t\"emit\",\n\t\t\t\t\t\"afterEmit\",\n\t\t\t\t\t\"invalid\",\n\t\t\t\t\t\"done\",\n\t\t\t\t\t\"thisCompilation\"\n\t\t\t\t].includes(name)\n\t\t\t) {\n\t\t\t\tif (childCompiler.hooks[name]) {\n\t\t\t\t\tchildCompiler.hooks[name].taps = this.hooks[name].taps.slice();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tchildCompiler.name = compilerName;\n\t\tchildCompiler.outputPath = this.outputPath;\n\t\tchildCompiler.inputFileSystem = this.inputFileSystem;\n\t\tchildCompiler.outputFileSystem = null;\n\t\tchildCompiler.resolverFactory = this.resolverFactory;\n\t\tchildCompiler.fileTimestamps = this.fileTimestamps;\n\t\tchildCompiler.contextTimestamps = this.contextTimestamps;\n\n\t\tconst relativeCompilerName = makePathsRelative(this.context, compilerName);\n\t\tif (!this.records[relativeCompilerName]) {\n\t\t\tthis.records[relativeCompilerName] = [];\n\t\t}\n\t\tif (this.records[relativeCompilerName][compilerIndex]) {\n\t\t\tchildCompiler.records = this.records[relativeCompilerName][compilerIndex];\n\t\t} else {\n\t\t\tthis.records[relativeCompilerName].push((childCompiler.records = {}));\n\t\t}\n\n\t\tchildCompiler.options = Object.create(this.options);\n\t\tchildCompiler.options.output = Object.create(childCompiler.options.output);\n\t\tfor (const name in outputOptions) {\n\t\t\tchildCompiler.options.output[name] = outputOptions[name];\n\t\t}\n\t\tchildCompiler.parentCompilation = compilation;\n\n\t\tcompilation.hooks.childCompiler.call(\n\t\t\tchildCompiler,\n\t\t\tcompilerName,\n\t\t\tcompilerIndex\n\t\t);\n\n\t\treturn childCompiler;\n\t}\n\n\tisChild() {\n\t\treturn !!this.parentCompilation;\n\t}\n\n\tcreateCompilation() {\n\t\treturn new Compilation(this);\n\t}\n\n\tnewCompilation(params) {\n\t\tconst compilation = this.createCompilation();\n\t\tcompilation.fileTimestamps = this.fileTimestamps;\n\t\tcompilation.contextTimestamps = this.contextTimestamps;\n\t\tcompilation.name = this.name;\n\t\tcompilation.records = this.records;\n\t\tcompilation.compilationDependencies = params.compilationDependencies;\n\t\tthis.hooks.thisCompilation.call(compilation, params);\n\t\tthis.hooks.compilation.call(compilation, params);\n\t\treturn compilation;\n\t}\n\n\tcreateNormalModuleFactory() {\n\t\tconst normalModuleFactory = new NormalModuleFactory(\n\t\t\tthis.options.context,\n\t\t\tthis.resolverFactory,\n\t\t\tthis.options.module || {}\n\t\t);\n\t\tthis.hooks.normalModuleFactory.call(normalModuleFactory);\n\t\treturn normalModuleFactory;\n\t}\n\n\tcreateContextModuleFactory() {\n\t\tconst contextModuleFactory = new ContextModuleFactory(this.resolverFactory);\n\t\tthis.hooks.contextModuleFactory.call(contextModuleFactory);\n\t\treturn contextModuleFactory;\n\t}\n\n\tnewCompilationParams() {\n\t\tconst params = {\n\t\t\tnormalModuleFactory: this.createNormalModuleFactory(),\n\t\t\tcontextModuleFactory: this.createContextModuleFactory(),\n\t\t\tcompilationDependencies: new Set()\n\t\t};\n\t\treturn params;\n\t}\n\n\tcompile(callback) {\n\t\tconst params = this.newCompilationParams();\n\t\tthis.hooks.beforeCompile.callAsync(params, err => {\n\t\t\tif (err) return callback(err);\n\n\t\t\tthis.hooks.compile.call(params);\n\n\t\t\tconst compilation = this.newCompilation(params);\n\n\t\t\tthis.hooks.make.callAsync(compilation, err => {\n\t\t\t\tif (err) return callback(err);\n\n\t\t\t\tcompilation.finish(err => {\n\t\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t\tcompilation.seal(err => {\n\t\t\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t\t\tthis.hooks.afterCompile.callAsync(compilation, err => {\n\t\t\t\t\t\t\tif (err) return callback(err);\n\n\t\t\t\t\t\t\treturn callback(null, compilation);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n}\n\nmodule.exports = Compiler;\n\nclass SizeOnlySource extends Source {\n\tconstructor(size) {\n\t\tsuper();\n\t\tthis._size = size;\n\t}\n\n\t_error() {\n\t\treturn new Error(\n\t\t\t\"Content and Map of this Source is no longer available (only size() is supported)\"\n\t\t);\n\t}\n\n\tsize() {\n\t\treturn this._size;\n\t}\n\n\t/**\n\t * @param {any} options options\n\t * @returns {string} the source\n\t */\n\tsource(options) {\n\t\tthrow this._error();\n\t}\n\n\tnode() {\n\t\tthrow this._error();\n\t}\n\n\tlistMap() {\n\t\tthrow this._error();\n\t}\n\n\tmap() {\n\t\tthrow this._error();\n\t}\n\n\tlistNode() {\n\t\tthrow this._error();\n\t}\n\n\tupdateHash() {\n\t\tthrow this._error();\n\t}\n}\n"]},"metadata":{},"sourceType":"script"}