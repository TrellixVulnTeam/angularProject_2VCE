{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nvar _createForOfIteratorHelper = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nvar Stats = require(\"./Stats\");\n\nvar Watching = /*#__PURE__*/function () {\n  function Watching(compiler, watchOptions, handler) {\n    var _this = this;\n\n    _classCallCheck(this, Watching);\n\n    this.startTime = null;\n    this.invalid = false;\n    this.handler = handler;\n    this.callbacks = [];\n    this.closed = false;\n    this.suspended = false;\n\n    if (typeof watchOptions === \"number\") {\n      this.watchOptions = {\n        aggregateTimeout: watchOptions\n      };\n    } else if (watchOptions && typeof watchOptions === \"object\") {\n      this.watchOptions = Object.assign({}, watchOptions);\n    } else {\n      this.watchOptions = {};\n    }\n\n    this.watchOptions.aggregateTimeout = this.watchOptions.aggregateTimeout || 200;\n    this.compiler = compiler;\n    this.running = true;\n    this.compiler.readRecords(function (err) {\n      if (err) return _this._done(err);\n\n      _this._go();\n    });\n  }\n\n  _createClass(Watching, [{\n    key: \"_go\",\n    value: function _go() {\n      var _this2 = this;\n\n      this.startTime = Date.now();\n      this.running = true;\n      this.invalid = false;\n      this.compiler.hooks.watchRun.callAsync(this.compiler, function (err) {\n        if (err) return _this2._done(err);\n\n        var onCompiled = function onCompiled(err, compilation) {\n          if (err) return _this2._done(err);\n          if (_this2.invalid) return _this2._done();\n\n          if (_this2.compiler.hooks.shouldEmit.call(compilation) === false) {\n            return _this2._done(null, compilation);\n          }\n\n          _this2.compiler.emitAssets(compilation, function (err) {\n            if (err) return _this2._done(err);\n            if (_this2.invalid) return _this2._done();\n\n            _this2.compiler.emitRecords(function (err) {\n              if (err) return _this2._done(err);\n\n              if (compilation.hooks.needAdditionalPass.call()) {\n                compilation.needAdditionalPass = true;\n                var stats = new Stats(compilation);\n                stats.startTime = _this2.startTime;\n                stats.endTime = Date.now();\n\n                _this2.compiler.hooks.done.callAsync(stats, function (err) {\n                  if (err) return _this2._done(err);\n\n                  _this2.compiler.hooks.additionalPass.callAsync(function (err) {\n                    if (err) return _this2._done(err);\n\n                    _this2.compiler.compile(onCompiled);\n                  });\n                });\n\n                return;\n              }\n\n              return _this2._done(null, compilation);\n            });\n          });\n        };\n\n        _this2.compiler.compile(onCompiled);\n      });\n    }\n  }, {\n    key: \"_getStats\",\n    value: function _getStats(compilation) {\n      var stats = new Stats(compilation);\n      stats.startTime = this.startTime;\n      stats.endTime = Date.now();\n      return stats;\n    }\n  }, {\n    key: \"_done\",\n    value: function _done(err, compilation) {\n      var _this3 = this;\n\n      this.running = false;\n      if (this.invalid) return this._go();\n      var stats = compilation ? this._getStats(compilation) : null;\n\n      if (err) {\n        this.compiler.hooks.failed.call(err);\n        this.handler(err, stats);\n        return;\n      }\n\n      this.compiler.hooks.done.callAsync(stats, function () {\n        _this3.handler(null, stats);\n\n        if (!_this3.closed) {\n          _this3.watch(Array.from(compilation.fileDependencies), Array.from(compilation.contextDependencies), Array.from(compilation.missingDependencies));\n        }\n\n        var _iterator = _createForOfIteratorHelper(_this3.callbacks),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var cb = _step.value;\n            cb();\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        _this3.callbacks.length = 0;\n      });\n    }\n  }, {\n    key: \"watch\",\n    value: function watch(files, dirs, missing) {\n      var _this4 = this;\n\n      this.pausedWatcher = null;\n      this.watcher = this.compiler.watchFileSystem.watch(files, dirs, missing, this.startTime, this.watchOptions, function (err, filesModified, contextModified, missingModified, fileTimestamps, contextTimestamps, removedFiles) {\n        _this4.pausedWatcher = _this4.watcher;\n        _this4.watcher = null;\n\n        if (err) {\n          return _this4.handler(err);\n        }\n\n        _this4.compiler.fileTimestamps = fileTimestamps;\n        _this4.compiler.contextTimestamps = contextTimestamps;\n        _this4.compiler.removedFiles = removedFiles;\n\n        if (!_this4.suspended) {\n          _this4._invalidate();\n        }\n      }, function (fileName, changeTime) {\n        _this4.compiler.hooks.invalid.call(fileName, changeTime);\n      });\n    }\n  }, {\n    key: \"invalidate\",\n    value: function invalidate(callback) {\n      if (callback) {\n        this.callbacks.push(callback);\n      }\n\n      if (this.watcher) {\n        this.compiler.fileTimestamps = this.watcher.getFileTimestamps();\n        this.compiler.contextTimestamps = this.watcher.getContextTimestamps();\n      }\n\n      return this._invalidate();\n    }\n  }, {\n    key: \"_invalidate\",\n    value: function _invalidate() {\n      if (this.watcher) {\n        this.pausedWatcher = this.watcher;\n        this.watcher.pause();\n        this.watcher = null;\n      }\n\n      if (this.running) {\n        this.invalid = true;\n        return false;\n      } else {\n        this._go();\n      }\n    }\n  }, {\n    key: \"suspend\",\n    value: function suspend() {\n      this.suspended = true;\n      this.invalid = false;\n    }\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      if (this.suspended) {\n        this.suspended = false;\n\n        this._invalidate();\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close(callback) {\n      var _this5 = this;\n\n      var finalCallback = function finalCallback() {\n        _this5.compiler.hooks.watchClose.call();\n\n        _this5.compiler.running = false;\n        _this5.compiler.watchMode = false;\n        if (callback !== undefined) callback();\n      };\n\n      this.closed = true;\n\n      if (this.watcher) {\n        this.watcher.close();\n        this.watcher = null;\n      }\n\n      if (this.pausedWatcher) {\n        this.pausedWatcher.close();\n        this.pausedWatcher = null;\n      }\n\n      if (this.running) {\n        this.invalid = true;\n        this._done = finalCallback;\n      } else {\n        finalCallback();\n      }\n    }\n  }]);\n\n  return Watching;\n}();\n\nmodule.exports = Watching;","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/webpack/lib/Watching.js"],"names":["Stats","require","Watching","compiler","watchOptions","handler","startTime","invalid","callbacks","closed","suspended","aggregateTimeout","Object","assign","running","readRecords","err","_done","_go","Date","now","hooks","watchRun","callAsync","onCompiled","compilation","shouldEmit","call","emitAssets","emitRecords","needAdditionalPass","stats","endTime","done","additionalPass","compile","_getStats","failed","watch","Array","from","fileDependencies","contextDependencies","missingDependencies","cb","length","files","dirs","missing","pausedWatcher","watcher","watchFileSystem","filesModified","contextModified","missingModified","fileTimestamps","contextTimestamps","removedFiles","_invalidate","fileName","changeTime","callback","push","getFileTimestamps","getContextTimestamps","pause","finalCallback","watchClose","watchMode","undefined","close","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;;;;;;;AAEA,IAAMA,KAAK,GAAGC,OAAO,CAAC,SAAD,CAArB;;IAEMC,Q;AACL,oBAAYC,QAAZ,EAAsBC,YAAtB,EAAoCC,OAApC,EAA6C;AAAA;;AAAA;;AAC5C,SAAKC,SAAL,GAAiB,IAAjB;AACA,SAAKC,OAAL,GAAe,KAAf;AACA,SAAKF,OAAL,GAAeA,OAAf;AACA,SAAKG,SAAL,GAAiB,EAAjB;AACA,SAAKC,MAAL,GAAc,KAAd;AACA,SAAKC,SAAL,GAAiB,KAAjB;;AACA,QAAI,OAAON,YAAP,KAAwB,QAA5B,EAAsC;AACrC,WAAKA,YAAL,GAAoB;AACnBO,QAAAA,gBAAgB,EAAEP;AADC,OAApB;AAGA,KAJD,MAIO,IAAIA,YAAY,IAAI,OAAOA,YAAP,KAAwB,QAA5C,EAAsD;AAC5D,WAAKA,YAAL,GAAoBQ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBT,YAAlB,CAApB;AACA,KAFM,MAEA;AACN,WAAKA,YAAL,GAAoB,EAApB;AACA;;AACD,SAAKA,YAAL,CAAkBO,gBAAlB,GACC,KAAKP,YAAL,CAAkBO,gBAAlB,IAAsC,GADvC;AAEA,SAAKR,QAAL,GAAgBA,QAAhB;AACA,SAAKW,OAAL,GAAe,IAAf;AACA,SAAKX,QAAL,CAAcY,WAAd,CAA0B,UAAAC,GAAG,EAAI;AAChC,UAAIA,GAAJ,EAAS,OAAO,KAAI,CAACC,KAAL,CAAWD,GAAX,CAAP;;AAET,MAAA,KAAI,CAACE,GAAL;AACA,KAJD;AAKA;;;;WAED,eAAM;AAAA;;AACL,WAAKZ,SAAL,GAAiBa,IAAI,CAACC,GAAL,EAAjB;AACA,WAAKN,OAAL,GAAe,IAAf;AACA,WAAKP,OAAL,GAAe,KAAf;AACA,WAAKJ,QAAL,CAAckB,KAAd,CAAoBC,QAApB,CAA6BC,SAA7B,CAAuC,KAAKpB,QAA5C,EAAsD,UAAAa,GAAG,EAAI;AAC5D,YAAIA,GAAJ,EAAS,OAAO,MAAI,CAACC,KAAL,CAAWD,GAAX,CAAP;;AACT,YAAMQ,UAAU,GAAG,SAAbA,UAAa,CAACR,GAAD,EAAMS,WAAN,EAAsB;AACxC,cAAIT,GAAJ,EAAS,OAAO,MAAI,CAACC,KAAL,CAAWD,GAAX,CAAP;AACT,cAAI,MAAI,CAACT,OAAT,EAAkB,OAAO,MAAI,CAACU,KAAL,EAAP;;AAElB,cAAI,MAAI,CAACd,QAAL,CAAckB,KAAd,CAAoBK,UAApB,CAA+BC,IAA/B,CAAoCF,WAApC,MAAqD,KAAzD,EAAgE;AAC/D,mBAAO,MAAI,CAACR,KAAL,CAAW,IAAX,EAAiBQ,WAAjB,CAAP;AACA;;AAED,UAAA,MAAI,CAACtB,QAAL,CAAcyB,UAAd,CAAyBH,WAAzB,EAAsC,UAAAT,GAAG,EAAI;AAC5C,gBAAIA,GAAJ,EAAS,OAAO,MAAI,CAACC,KAAL,CAAWD,GAAX,CAAP;AACT,gBAAI,MAAI,CAACT,OAAT,EAAkB,OAAO,MAAI,CAACU,KAAL,EAAP;;AAClB,YAAA,MAAI,CAACd,QAAL,CAAc0B,WAAd,CAA0B,UAAAb,GAAG,EAAI;AAChC,kBAAIA,GAAJ,EAAS,OAAO,MAAI,CAACC,KAAL,CAAWD,GAAX,CAAP;;AAET,kBAAIS,WAAW,CAACJ,KAAZ,CAAkBS,kBAAlB,CAAqCH,IAArC,EAAJ,EAAiD;AAChDF,gBAAAA,WAAW,CAACK,kBAAZ,GAAiC,IAAjC;AAEA,oBAAMC,KAAK,GAAG,IAAI/B,KAAJ,CAAUyB,WAAV,CAAd;AACAM,gBAAAA,KAAK,CAACzB,SAAN,GAAkB,MAAI,CAACA,SAAvB;AACAyB,gBAAAA,KAAK,CAACC,OAAN,GAAgBb,IAAI,CAACC,GAAL,EAAhB;;AACA,gBAAA,MAAI,CAACjB,QAAL,CAAckB,KAAd,CAAoBY,IAApB,CAAyBV,SAAzB,CAAmCQ,KAAnC,EAA0C,UAAAf,GAAG,EAAI;AAChD,sBAAIA,GAAJ,EAAS,OAAO,MAAI,CAACC,KAAL,CAAWD,GAAX,CAAP;;AAET,kBAAA,MAAI,CAACb,QAAL,CAAckB,KAAd,CAAoBa,cAApB,CAAmCX,SAAnC,CAA6C,UAAAP,GAAG,EAAI;AACnD,wBAAIA,GAAJ,EAAS,OAAO,MAAI,CAACC,KAAL,CAAWD,GAAX,CAAP;;AACT,oBAAA,MAAI,CAACb,QAAL,CAAcgC,OAAd,CAAsBX,UAAtB;AACA,mBAHD;AAIA,iBAPD;;AAQA;AACA;;AACD,qBAAO,MAAI,CAACP,KAAL,CAAW,IAAX,EAAiBQ,WAAjB,CAAP;AACA,aApBD;AAqBA,WAxBD;AAyBA,SAjCD;;AAkCA,QAAA,MAAI,CAACtB,QAAL,CAAcgC,OAAd,CAAsBX,UAAtB;AACA,OArCD;AAsCA;;;WAED,mBAAUC,WAAV,EAAuB;AACtB,UAAMM,KAAK,GAAG,IAAI/B,KAAJ,CAAUyB,WAAV,CAAd;AACAM,MAAAA,KAAK,CAACzB,SAAN,GAAkB,KAAKA,SAAvB;AACAyB,MAAAA,KAAK,CAACC,OAAN,GAAgBb,IAAI,CAACC,GAAL,EAAhB;AACA,aAAOW,KAAP;AACA;;;WAED,eAAMf,GAAN,EAAWS,WAAX,EAAwB;AAAA;;AACvB,WAAKX,OAAL,GAAe,KAAf;AACA,UAAI,KAAKP,OAAT,EAAkB,OAAO,KAAKW,GAAL,EAAP;AAElB,UAAMa,KAAK,GAAGN,WAAW,GAAG,KAAKW,SAAL,CAAeX,WAAf,CAAH,GAAiC,IAA1D;;AACA,UAAIT,GAAJ,EAAS;AACR,aAAKb,QAAL,CAAckB,KAAd,CAAoBgB,MAApB,CAA2BV,IAA3B,CAAgCX,GAAhC;AACA,aAAKX,OAAL,CAAaW,GAAb,EAAkBe,KAAlB;AACA;AACA;;AACD,WAAK5B,QAAL,CAAckB,KAAd,CAAoBY,IAApB,CAAyBV,SAAzB,CAAmCQ,KAAnC,EAA0C,YAAM;AAC/C,QAAA,MAAI,CAAC1B,OAAL,CAAa,IAAb,EAAmB0B,KAAnB;;AACA,YAAI,CAAC,MAAI,CAACtB,MAAV,EAAkB;AACjB,UAAA,MAAI,CAAC6B,KAAL,CACCC,KAAK,CAACC,IAAN,CAAWf,WAAW,CAACgB,gBAAvB,CADD,EAECF,KAAK,CAACC,IAAN,CAAWf,WAAW,CAACiB,mBAAvB,CAFD,EAGCH,KAAK,CAACC,IAAN,CAAWf,WAAW,CAACkB,mBAAvB,CAHD;AAKA;;AAR8C,mDAS9B,MAAI,CAACnC,SATyB;AAAA;;AAAA;AAS/C;AAAA,gBAAWoC,EAAX;AAAiCA,YAAAA,EAAE;AAAnC;AAT+C;AAAA;AAAA;AAAA;AAAA;;AAU/C,QAAA,MAAI,CAACpC,SAAL,CAAeqC,MAAf,GAAwB,CAAxB;AACA,OAXD;AAYA;;;WAED,eAAMC,KAAN,EAAaC,IAAb,EAAmBC,OAAnB,EAA4B;AAAA;;AAC3B,WAAKC,aAAL,GAAqB,IAArB;AACA,WAAKC,OAAL,GAAe,KAAK/C,QAAL,CAAcgD,eAAd,CAA8Bb,KAA9B,CACdQ,KADc,EAEdC,IAFc,EAGdC,OAHc,EAId,KAAK1C,SAJS,EAKd,KAAKF,YALS,EAMd,UACCY,GADD,EAECoC,aAFD,EAGCC,eAHD,EAICC,eAJD,EAKCC,cALD,EAMCC,iBAND,EAOCC,YAPD,EAQK;AACJ,QAAA,MAAI,CAACR,aAAL,GAAqB,MAAI,CAACC,OAA1B;AACA,QAAA,MAAI,CAACA,OAAL,GAAe,IAAf;;AACA,YAAIlC,GAAJ,EAAS;AACR,iBAAO,MAAI,CAACX,OAAL,CAAaW,GAAb,CAAP;AACA;;AACD,QAAA,MAAI,CAACb,QAAL,CAAcoD,cAAd,GAA+BA,cAA/B;AACA,QAAA,MAAI,CAACpD,QAAL,CAAcqD,iBAAd,GAAkCA,iBAAlC;AACA,QAAA,MAAI,CAACrD,QAAL,CAAcsD,YAAd,GAA6BA,YAA7B;;AACA,YAAI,CAAC,MAAI,CAAC/C,SAAV,EAAqB;AACpB,UAAA,MAAI,CAACgD,WAAL;AACA;AACD,OA1Ba,EA2Bd,UAACC,QAAD,EAAWC,UAAX,EAA0B;AACzB,QAAA,MAAI,CAACzD,QAAL,CAAckB,KAAd,CAAoBd,OAApB,CAA4BoB,IAA5B,CAAiCgC,QAAjC,EAA2CC,UAA3C;AACA,OA7Ba,CAAf;AA+BA;;;WAED,oBAAWC,QAAX,EAAqB;AACpB,UAAIA,QAAJ,EAAc;AACb,aAAKrD,SAAL,CAAesD,IAAf,CAAoBD,QAApB;AACA;;AACD,UAAI,KAAKX,OAAT,EAAkB;AACjB,aAAK/C,QAAL,CAAcoD,cAAd,GAA+B,KAAKL,OAAL,CAAaa,iBAAb,EAA/B;AACA,aAAK5D,QAAL,CAAcqD,iBAAd,GAAkC,KAAKN,OAAL,CAAac,oBAAb,EAAlC;AACA;;AACD,aAAO,KAAKN,WAAL,EAAP;AACA;;;WAED,uBAAc;AACb,UAAI,KAAKR,OAAT,EAAkB;AACjB,aAAKD,aAAL,GAAqB,KAAKC,OAA1B;AACA,aAAKA,OAAL,CAAae,KAAb;AACA,aAAKf,OAAL,GAAe,IAAf;AACA;;AAED,UAAI,KAAKpC,OAAT,EAAkB;AACjB,aAAKP,OAAL,GAAe,IAAf;AACA,eAAO,KAAP;AACA,OAHD,MAGO;AACN,aAAKW,GAAL;AACA;AACD;;;WAED,mBAAU;AACT,WAAKR,SAAL,GAAiB,IAAjB;AACA,WAAKH,OAAL,GAAe,KAAf;AACA;;;WAED,kBAAS;AACR,UAAI,KAAKG,SAAT,EAAoB;AACnB,aAAKA,SAAL,GAAiB,KAAjB;;AACA,aAAKgD,WAAL;AACA;AACD;;;WAED,eAAMG,QAAN,EAAgB;AAAA;;AACf,UAAMK,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC3B,QAAA,MAAI,CAAC/D,QAAL,CAAckB,KAAd,CAAoB8C,UAApB,CAA+BxC,IAA/B;;AACA,QAAA,MAAI,CAACxB,QAAL,CAAcW,OAAd,GAAwB,KAAxB;AACA,QAAA,MAAI,CAACX,QAAL,CAAciE,SAAd,GAA0B,KAA1B;AACA,YAAIP,QAAQ,KAAKQ,SAAjB,EAA4BR,QAAQ;AACpC,OALD;;AAOA,WAAKpD,MAAL,GAAc,IAAd;;AACA,UAAI,KAAKyC,OAAT,EAAkB;AACjB,aAAKA,OAAL,CAAaoB,KAAb;AACA,aAAKpB,OAAL,GAAe,IAAf;AACA;;AACD,UAAI,KAAKD,aAAT,EAAwB;AACvB,aAAKA,aAAL,CAAmBqB,KAAnB;AACA,aAAKrB,aAAL,GAAqB,IAArB;AACA;;AACD,UAAI,KAAKnC,OAAT,EAAkB;AACjB,aAAKP,OAAL,GAAe,IAAf;AACA,aAAKU,KAAL,GAAaiD,aAAb;AACA,OAHD,MAGO;AACNA,QAAAA,aAAa;AACb;AACD;;;;;;AAGFK,MAAM,CAACC,OAAP,GAAiBtE,QAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Stats = require(\"./Stats\");\n\nclass Watching {\n\tconstructor(compiler, watchOptions, handler) {\n\t\tthis.startTime = null;\n\t\tthis.invalid = false;\n\t\tthis.handler = handler;\n\t\tthis.callbacks = [];\n\t\tthis.closed = false;\n\t\tthis.suspended = false;\n\t\tif (typeof watchOptions === \"number\") {\n\t\t\tthis.watchOptions = {\n\t\t\t\taggregateTimeout: watchOptions\n\t\t\t};\n\t\t} else if (watchOptions && typeof watchOptions === \"object\") {\n\t\t\tthis.watchOptions = Object.assign({}, watchOptions);\n\t\t} else {\n\t\t\tthis.watchOptions = {};\n\t\t}\n\t\tthis.watchOptions.aggregateTimeout =\n\t\t\tthis.watchOptions.aggregateTimeout || 200;\n\t\tthis.compiler = compiler;\n\t\tthis.running = true;\n\t\tthis.compiler.readRecords(err => {\n\t\t\tif (err) return this._done(err);\n\n\t\t\tthis._go();\n\t\t});\n\t}\n\n\t_go() {\n\t\tthis.startTime = Date.now();\n\t\tthis.running = true;\n\t\tthis.invalid = false;\n\t\tthis.compiler.hooks.watchRun.callAsync(this.compiler, err => {\n\t\t\tif (err) return this._done(err);\n\t\t\tconst onCompiled = (err, compilation) => {\n\t\t\t\tif (err) return this._done(err);\n\t\t\t\tif (this.invalid) return this._done();\n\n\t\t\t\tif (this.compiler.hooks.shouldEmit.call(compilation) === false) {\n\t\t\t\t\treturn this._done(null, compilation);\n\t\t\t\t}\n\n\t\t\t\tthis.compiler.emitAssets(compilation, err => {\n\t\t\t\t\tif (err) return this._done(err);\n\t\t\t\t\tif (this.invalid) return this._done();\n\t\t\t\t\tthis.compiler.emitRecords(err => {\n\t\t\t\t\t\tif (err) return this._done(err);\n\n\t\t\t\t\t\tif (compilation.hooks.needAdditionalPass.call()) {\n\t\t\t\t\t\t\tcompilation.needAdditionalPass = true;\n\n\t\t\t\t\t\t\tconst stats = new Stats(compilation);\n\t\t\t\t\t\t\tstats.startTime = this.startTime;\n\t\t\t\t\t\t\tstats.endTime = Date.now();\n\t\t\t\t\t\t\tthis.compiler.hooks.done.callAsync(stats, err => {\n\t\t\t\t\t\t\t\tif (err) return this._done(err);\n\n\t\t\t\t\t\t\t\tthis.compiler.hooks.additionalPass.callAsync(err => {\n\t\t\t\t\t\t\t\t\tif (err) return this._done(err);\n\t\t\t\t\t\t\t\t\tthis.compiler.compile(onCompiled);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this._done(null, compilation);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\t\t\tthis.compiler.compile(onCompiled);\n\t\t});\n\t}\n\n\t_getStats(compilation) {\n\t\tconst stats = new Stats(compilation);\n\t\tstats.startTime = this.startTime;\n\t\tstats.endTime = Date.now();\n\t\treturn stats;\n\t}\n\n\t_done(err, compilation) {\n\t\tthis.running = false;\n\t\tif (this.invalid) return this._go();\n\n\t\tconst stats = compilation ? this._getStats(compilation) : null;\n\t\tif (err) {\n\t\t\tthis.compiler.hooks.failed.call(err);\n\t\t\tthis.handler(err, stats);\n\t\t\treturn;\n\t\t}\n\t\tthis.compiler.hooks.done.callAsync(stats, () => {\n\t\t\tthis.handler(null, stats);\n\t\t\tif (!this.closed) {\n\t\t\t\tthis.watch(\n\t\t\t\t\tArray.from(compilation.fileDependencies),\n\t\t\t\t\tArray.from(compilation.contextDependencies),\n\t\t\t\t\tArray.from(compilation.missingDependencies)\n\t\t\t\t);\n\t\t\t}\n\t\t\tfor (const cb of this.callbacks) cb();\n\t\t\tthis.callbacks.length = 0;\n\t\t});\n\t}\n\n\twatch(files, dirs, missing) {\n\t\tthis.pausedWatcher = null;\n\t\tthis.watcher = this.compiler.watchFileSystem.watch(\n\t\t\tfiles,\n\t\t\tdirs,\n\t\t\tmissing,\n\t\t\tthis.startTime,\n\t\t\tthis.watchOptions,\n\t\t\t(\n\t\t\t\terr,\n\t\t\t\tfilesModified,\n\t\t\t\tcontextModified,\n\t\t\t\tmissingModified,\n\t\t\t\tfileTimestamps,\n\t\t\t\tcontextTimestamps,\n\t\t\t\tremovedFiles\n\t\t\t) => {\n\t\t\t\tthis.pausedWatcher = this.watcher;\n\t\t\t\tthis.watcher = null;\n\t\t\t\tif (err) {\n\t\t\t\t\treturn this.handler(err);\n\t\t\t\t}\n\t\t\t\tthis.compiler.fileTimestamps = fileTimestamps;\n\t\t\t\tthis.compiler.contextTimestamps = contextTimestamps;\n\t\t\t\tthis.compiler.removedFiles = removedFiles;\n\t\t\t\tif (!this.suspended) {\n\t\t\t\t\tthis._invalidate();\n\t\t\t\t}\n\t\t\t},\n\t\t\t(fileName, changeTime) => {\n\t\t\t\tthis.compiler.hooks.invalid.call(fileName, changeTime);\n\t\t\t}\n\t\t);\n\t}\n\n\tinvalidate(callback) {\n\t\tif (callback) {\n\t\t\tthis.callbacks.push(callback);\n\t\t}\n\t\tif (this.watcher) {\n\t\t\tthis.compiler.fileTimestamps = this.watcher.getFileTimestamps();\n\t\t\tthis.compiler.contextTimestamps = this.watcher.getContextTimestamps();\n\t\t}\n\t\treturn this._invalidate();\n\t}\n\n\t_invalidate() {\n\t\tif (this.watcher) {\n\t\t\tthis.pausedWatcher = this.watcher;\n\t\t\tthis.watcher.pause();\n\t\t\tthis.watcher = null;\n\t\t}\n\n\t\tif (this.running) {\n\t\t\tthis.invalid = true;\n\t\t\treturn false;\n\t\t} else {\n\t\t\tthis._go();\n\t\t}\n\t}\n\n\tsuspend() {\n\t\tthis.suspended = true;\n\t\tthis.invalid = false;\n\t}\n\n\tresume() {\n\t\tif (this.suspended) {\n\t\t\tthis.suspended = false;\n\t\t\tthis._invalidate();\n\t\t}\n\t}\n\n\tclose(callback) {\n\t\tconst finalCallback = () => {\n\t\t\tthis.compiler.hooks.watchClose.call();\n\t\t\tthis.compiler.running = false;\n\t\t\tthis.compiler.watchMode = false;\n\t\t\tif (callback !== undefined) callback();\n\t\t};\n\n\t\tthis.closed = true;\n\t\tif (this.watcher) {\n\t\t\tthis.watcher.close();\n\t\t\tthis.watcher = null;\n\t\t}\n\t\tif (this.pausedWatcher) {\n\t\t\tthis.pausedWatcher.close();\n\t\t\tthis.pausedWatcher = null;\n\t\t}\n\t\tif (this.running) {\n\t\t\tthis.invalid = true;\n\t\t\tthis._done = finalCallback;\n\t\t} else {\n\t\t\tfinalCallback();\n\t\t}\n\t}\n}\n\nmodule.exports = Watching;\n"]},"metadata":{},"sourceType":"script"}