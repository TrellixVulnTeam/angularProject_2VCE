{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DedupeModuleResolvePlugin = void 0;\n\nvar webpack_diagnostics_1 = require(\"../../utils/webpack-diagnostics\"); // tslint:disable-next-line: no-any\n\n\nfunction getResourceData(resolveData) {\n  var _a, _b;\n\n  if (resolveData.createData) {\n    // Webpack 5+\n    var _resolveData$createDa = resolveData.createData.resourceResolveData,\n        descriptionFileData = _resolveData$createDa.descriptionFileData,\n        relativePath = _resolveData$createDa.relativePath,\n        resource = _resolveData$createDa.resource;\n    return {\n      packageName: descriptionFileData === null || descriptionFileData === void 0 ? void 0 : descriptionFileData.name,\n      packageVersion: descriptionFileData === null || descriptionFileData === void 0 ? void 0 : descriptionFileData.version,\n      relativePath: relativePath,\n      resource: resource\n    };\n  } else {\n    // Webpack 4\n    var _resource = resolveData.resource,\n        resourceResolveData = resolveData.resourceResolveData;\n    return {\n      packageName: (_a = resourceResolveData.descriptionFileData) === null || _a === void 0 ? void 0 : _a.name,\n      packageVersion: (_b = resourceResolveData.descriptionFileData) === null || _b === void 0 ? void 0 : _b.version,\n      relativePath: resourceResolveData.relativePath,\n      resource: _resource\n    };\n  }\n}\n/**\n * DedupeModuleResolvePlugin is a webpack plugin which dedupes modules with the same name and versions\n * that are laid out in different parts of the node_modules tree.\n *\n * This is needed because Webpack relies on package managers to hoist modules and doesn't have any deduping logic.\n *\n * This is similar to how Webpack's 'NormalModuleReplacementPlugin' works\n * @see https://github.com/webpack/webpack/blob/4a1f068828c2ab47537d8be30d542cd3a1076db4/lib/NormalModuleReplacementPlugin.js#L9\n */\n\n\nvar DedupeModuleResolvePlugin = /*#__PURE__*/function () {\n  function DedupeModuleResolvePlugin(options) {\n    _classCallCheck(this, DedupeModuleResolvePlugin);\n\n    this.options = options;\n    this.modules = new Map();\n  }\n\n  _createClass(DedupeModuleResolvePlugin, [{\n    key: \"apply\",\n    value: function apply(compiler) {\n      var _this = this;\n\n      compiler.hooks.compilation.tap('DedupeModuleResolvePlugin', function (compilation, _ref) {\n        var normalModuleFactory = _ref.normalModuleFactory;\n        normalModuleFactory.hooks.afterResolve.tap('DedupeModuleResolvePlugin', function (result) {\n          var _a;\n\n          if (!result) {\n            return;\n          }\n\n          var _getResourceData = getResourceData(result),\n              packageName = _getResourceData.packageName,\n              packageVersion = _getResourceData.packageVersion,\n              relativePath = _getResourceData.relativePath,\n              resource = _getResourceData.resource; // Empty name or versions are no valid primary  entrypoints of a library\n\n\n          if (!packageName || !packageVersion) {\n            return;\n          }\n\n          var moduleId = packageName + '@' + packageVersion + ':' + relativePath;\n\n          var prevResolvedModule = _this.modules.get(moduleId);\n\n          if (!prevResolvedModule) {\n            // This is the first time we visit this module.\n            _this.modules.set(moduleId, {\n              resource: resource,\n              request: result.request\n            });\n\n            return;\n          }\n\n          var prevResource = prevResolvedModule.resource,\n              prevRequest = prevResolvedModule.request;\n\n          if (resource === prevResource) {\n            // No deduping needed.\n            // Current path and previously resolved path are the same.\n            return;\n          }\n\n          if ((_a = _this.options) === null || _a === void 0 ? void 0 : _a.verbose) {\n            webpack_diagnostics_1.addWarning(compilation, \"[DedupeModuleResolvePlugin]: \".concat(resource, \" -> \").concat(prevResource));\n          } // Alter current request with previously resolved module.\n\n\n          result.request = prevRequest;\n        });\n      });\n    }\n  }]);\n\n  return DedupeModuleResolvePlugin;\n}();\n\nexports.DedupeModuleResolvePlugin = DedupeModuleResolvePlugin;","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@angular-devkit/build-angular/src/webpack/plugins/dedupe-module-resolve-plugin.js"],"names":["Object","defineProperty","exports","value","DedupeModuleResolvePlugin","webpack_diagnostics_1","require","getResourceData","resolveData","_a","_b","createData","resourceResolveData","descriptionFileData","relativePath","resource","packageName","name","packageVersion","version","options","modules","Map","compiler","hooks","compilation","tap","normalModuleFactory","afterResolve","result","moduleId","prevResolvedModule","get","set","request","prevResource","prevRequest","verbose","addWarning"],"mappings":"AAAA;;;;;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,yBAAR,GAAoC,KAAK,CAAzC;;AACA,IAAMC,qBAAqB,GAAGC,OAAO,CAAC,iCAAD,CAArC,C,CACA;;;AACA,SAASC,eAAT,CAAyBC,WAAzB,EAAsC;AAClC,MAAIC,EAAJ,EAAQC,EAAR;;AACA,MAAIF,WAAW,CAACG,UAAhB,EAA4B;AACxB;AACA,gCAAyDH,WAAW,CAACG,UAAZ,CAAuBC,mBAAhF;AAAA,QAAQC,mBAAR,yBAAQA,mBAAR;AAAA,QAA6BC,YAA7B,yBAA6BA,YAA7B;AAAA,QAA2CC,QAA3C,yBAA2CA,QAA3C;AACA,WAAO;AACHC,MAAAA,WAAW,EAAEH,mBAAmB,KAAK,IAAxB,IAAgCA,mBAAmB,KAAK,KAAK,CAA7D,GAAiE,KAAK,CAAtE,GAA0EA,mBAAmB,CAACI,IADxG;AAEHC,MAAAA,cAAc,EAAEL,mBAAmB,KAAK,IAAxB,IAAgCA,mBAAmB,KAAK,KAAK,CAA7D,GAAiE,KAAK,CAAtE,GAA0EA,mBAAmB,CAACM,OAF3G;AAGHL,MAAAA,YAAY,EAAZA,YAHG;AAIHC,MAAAA,QAAQ,EAARA;AAJG,KAAP;AAMH,GATD,MAUK;AACD;AACA,QAAQA,SAAR,GAA0CP,WAA1C,CAAQO,QAAR;AAAA,QAAkBH,mBAAlB,GAA0CJ,WAA1C,CAAkBI,mBAAlB;AACA,WAAO;AACHI,MAAAA,WAAW,EAAE,CAACP,EAAE,GAAGG,mBAAmB,CAACC,mBAA1B,MAAmD,IAAnD,IAA2DJ,EAAE,KAAK,KAAK,CAAvE,GAA2E,KAAK,CAAhF,GAAoFA,EAAE,CAACQ,IADjG;AAEHC,MAAAA,cAAc,EAAE,CAACR,EAAE,GAAGE,mBAAmB,CAACC,mBAA1B,MAAmD,IAAnD,IAA2DH,EAAE,KAAK,KAAK,CAAvE,GAA2E,KAAK,CAAhF,GAAoFA,EAAE,CAACS,OAFpG;AAGHL,MAAAA,YAAY,EAAEF,mBAAmB,CAACE,YAH/B;AAIHC,MAAAA,QAAQ,EAAEA;AAJP,KAAP;AAMH;AACJ;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;IACMX,yB;AACF,qCAAYgB,OAAZ,EAAqB;AAAA;;AACjB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKC,OAAL,GAAe,IAAIC,GAAJ,EAAf;AACH;;;;WACD,eAAMC,QAAN,EAAgB;AAAA;;AACZA,MAAAA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CAA+B,2BAA/B,EAA4D,UAACD,WAAD,QAA0C;AAAA,YAA1BE,mBAA0B,QAA1BA,mBAA0B;AAClGA,QAAAA,mBAAmB,CAACH,KAApB,CAA0BI,YAA1B,CAAuCF,GAAvC,CAA2C,2BAA3C,EAAwE,UAACG,MAAD,EAAY;AAChF,cAAIpB,EAAJ;;AACA,cAAI,CAACoB,MAAL,EAAa;AACT;AACH;;AACD,iCAAgEtB,eAAe,CAACsB,MAAD,CAA/E;AAAA,cAAQb,WAAR,oBAAQA,WAAR;AAAA,cAAqBE,cAArB,oBAAqBA,cAArB;AAAA,cAAqCJ,YAArC,oBAAqCA,YAArC;AAAA,cAAmDC,QAAnD,oBAAmDA,QAAnD,CALgF,CAMhF;;;AACA,cAAI,CAACC,WAAD,IAAgB,CAACE,cAArB,EAAqC;AACjC;AACH;;AACD,cAAMY,QAAQ,GAAGd,WAAW,GAAG,GAAd,GAAoBE,cAApB,GAAqC,GAArC,GAA2CJ,YAA5D;;AACA,cAAMiB,kBAAkB,GAAG,KAAI,CAACV,OAAL,CAAaW,GAAb,CAAiBF,QAAjB,CAA3B;;AACA,cAAI,CAACC,kBAAL,EAAyB;AACrB;AACA,YAAA,KAAI,CAACV,OAAL,CAAaY,GAAb,CAAiBH,QAAjB,EAA2B;AACvBf,cAAAA,QAAQ,EAARA,QADuB;AAEvBmB,cAAAA,OAAO,EAAEL,MAAM,CAACK;AAFO,aAA3B;;AAIA;AACH;;AACD,cAAkBC,YAAlB,GAAyDJ,kBAAzD,CAAQhB,QAAR;AAAA,cAAyCqB,WAAzC,GAAyDL,kBAAzD,CAAgCG,OAAhC;;AACA,cAAInB,QAAQ,KAAKoB,YAAjB,EAA+B;AAC3B;AACA;AACA;AACH;;AACD,cAAI,CAAC1B,EAAE,GAAG,KAAI,CAACW,OAAX,MAAwB,IAAxB,IAAgCX,EAAE,KAAK,KAAK,CAA5C,GAAgD,KAAK,CAArD,GAAyDA,EAAE,CAAC4B,OAAhE,EAAyE;AACrEhC,YAAAA,qBAAqB,CAACiC,UAAtB,CAAiCb,WAAjC,yCAA8EV,QAA9E,iBAA6FoB,YAA7F;AACH,WA5B+E,CA6BhF;;;AACAN,UAAAA,MAAM,CAACK,OAAP,GAAiBE,WAAjB;AACH,SA/BD;AAgCH,OAjCD;AAkCH;;;;;;AAELlC,OAAO,CAACE,yBAAR,GAAoCA,yBAApC","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DedupeModuleResolvePlugin = void 0;\nconst webpack_diagnostics_1 = require(\"../../utils/webpack-diagnostics\");\n// tslint:disable-next-line: no-any\nfunction getResourceData(resolveData) {\n    var _a, _b;\n    if (resolveData.createData) {\n        // Webpack 5+\n        const { descriptionFileData, relativePath, resource, } = resolveData.createData.resourceResolveData;\n        return {\n            packageName: descriptionFileData === null || descriptionFileData === void 0 ? void 0 : descriptionFileData.name,\n            packageVersion: descriptionFileData === null || descriptionFileData === void 0 ? void 0 : descriptionFileData.version,\n            relativePath,\n            resource,\n        };\n    }\n    else {\n        // Webpack 4\n        const { resource, resourceResolveData } = resolveData;\n        return {\n            packageName: (_a = resourceResolveData.descriptionFileData) === null || _a === void 0 ? void 0 : _a.name,\n            packageVersion: (_b = resourceResolveData.descriptionFileData) === null || _b === void 0 ? void 0 : _b.version,\n            relativePath: resourceResolveData.relativePath,\n            resource: resource,\n        };\n    }\n}\n/**\n * DedupeModuleResolvePlugin is a webpack plugin which dedupes modules with the same name and versions\n * that are laid out in different parts of the node_modules tree.\n *\n * This is needed because Webpack relies on package managers to hoist modules and doesn't have any deduping logic.\n *\n * This is similar to how Webpack's 'NormalModuleReplacementPlugin' works\n * @see https://github.com/webpack/webpack/blob/4a1f068828c2ab47537d8be30d542cd3a1076db4/lib/NormalModuleReplacementPlugin.js#L9\n */\nclass DedupeModuleResolvePlugin {\n    constructor(options) {\n        this.options = options;\n        this.modules = new Map();\n    }\n    apply(compiler) {\n        compiler.hooks.compilation.tap('DedupeModuleResolvePlugin', (compilation, { normalModuleFactory }) => {\n            normalModuleFactory.hooks.afterResolve.tap('DedupeModuleResolvePlugin', (result) => {\n                var _a;\n                if (!result) {\n                    return;\n                }\n                const { packageName, packageVersion, relativePath, resource } = getResourceData(result);\n                // Empty name or versions are no valid primary  entrypoints of a library\n                if (!packageName || !packageVersion) {\n                    return;\n                }\n                const moduleId = packageName + '@' + packageVersion + ':' + relativePath;\n                const prevResolvedModule = this.modules.get(moduleId);\n                if (!prevResolvedModule) {\n                    // This is the first time we visit this module.\n                    this.modules.set(moduleId, {\n                        resource,\n                        request: result.request,\n                    });\n                    return;\n                }\n                const { resource: prevResource, request: prevRequest } = prevResolvedModule;\n                if (resource === prevResource) {\n                    // No deduping needed.\n                    // Current path and previously resolved path are the same.\n                    return;\n                }\n                if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.verbose) {\n                    webpack_diagnostics_1.addWarning(compilation, `[DedupeModuleResolvePlugin]: ${resource} -> ${prevResource}`);\n                }\n                // Alter current request with previously resolved module.\n                result.request = prevRequest;\n            });\n        });\n    }\n}\nexports.DedupeModuleResolvePlugin = DedupeModuleResolvePlugin;\n"]},"metadata":{},"sourceType":"script"}