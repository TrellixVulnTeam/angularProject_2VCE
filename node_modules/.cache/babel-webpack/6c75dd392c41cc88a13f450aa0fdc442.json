{"ast":null,"code":"/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n(function (factory) {\n  if (typeof module === \"object\" && typeof module.exports === \"object\") {\n    var v = factory(require, exports);\n    if (v !== undefined) module.exports = v;\n  } else if (typeof define === \"function\" && define.amd) {\n    define(\"@angular/compiler-cli/src/ngtsc/typecheck/diagnostics/src/id\", [\"require\", \"exports\"], factory);\n  }\n})(function (require, exports) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getTemplateId = void 0;\n  var TEMPLATE_ID = Symbol('ngTemplateId');\n  var NEXT_TEMPLATE_ID = Symbol('ngNextTemplateId');\n\n  function getTemplateId(clazz) {\n    var node = clazz;\n\n    if (node[TEMPLATE_ID] === undefined) {\n      node[TEMPLATE_ID] = allocateTemplateId(node.getSourceFile());\n    }\n\n    return node[TEMPLATE_ID];\n  }\n\n  exports.getTemplateId = getTemplateId;\n\n  function allocateTemplateId(sf) {\n    if (sf[NEXT_TEMPLATE_ID] === undefined) {\n      sf[NEXT_TEMPLATE_ID] = 1;\n    }\n\n    return \"tcb\" + sf[NEXT_TEMPLATE_ID]++;\n  }\n});","map":{"version":3,"sources":["../../../../../../../../../../packages/compiler-cli/src/ngtsc/typecheck/diagnostics/src/id.ts"],"names":[],"mappings":"AAAA;;;;;;AAMG;;;;;;;;;;;;;;;AAQH,MAAM,WAAW,GAAG,MAAM,CAAC,cAAD,CAA1B;AACA,MAAM,gBAAgB,GAAG,MAAM,CAAC,kBAAD,CAA/B;;AAUA,WAAgB,aAAhB,CAA8B,KAA9B,EAAoD;AAClD,QAAM,IAAI,GAAG,KAAb;;AACA,QAAI,IAAI,CAAC,WAAD,CAAJ,KAAsB,SAA1B,EAAqC;AACnC,MAAA,IAAI,CAAC,WAAD,CAAJ,GAAoB,kBAAkB,CAAC,IAAI,CAAC,aAAL,EAAD,CAAtC;AACD;;AACD,WAAO,IAAI,CAAC,WAAD,CAAX;AACD;;AAND,EAAA,OAAA,CAAA,aAAA,GAAA,aAAA;;AAQA,WAAS,kBAAT,CAA4B,EAA5B,EAAwE;AACtE,QAAI,EAAE,CAAC,gBAAD,CAAF,KAAyB,SAA7B,EAAwC;AACtC,MAAA,EAAE,CAAC,gBAAD,CAAF,GAAuB,CAAvB;AACD;;AACD,WAAQ,QAAM,EAAE,CAAC,gBAAD,CAAF,EAAd;AACD","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport * as ts from 'typescript';\nimport {DeclarationNode} from '../../../reflection';\n\nimport {TemplateId} from '../../api';\n\n\nconst TEMPLATE_ID = Symbol('ngTemplateId');\nconst NEXT_TEMPLATE_ID = Symbol('ngNextTemplateId');\n\ninterface HasTemplateId {\n  [TEMPLATE_ID]: TemplateId;\n}\n\ninterface HasNextTemplateId {\n  [NEXT_TEMPLATE_ID]: number;\n}\n\nexport function getTemplateId(clazz: DeclarationNode): TemplateId {\n  const node = clazz as ts.Declaration & Partial<HasTemplateId>;\n  if (node[TEMPLATE_ID] === undefined) {\n    node[TEMPLATE_ID] = allocateTemplateId(node.getSourceFile());\n  }\n  return node[TEMPLATE_ID]!;\n}\n\nfunction allocateTemplateId(sf: ts.SourceFile&Partial<HasNextTemplateId>): TemplateId {\n  if (sf[NEXT_TEMPLATE_ID] === undefined) {\n    sf[NEXT_TEMPLATE_ID] = 1;\n  }\n  return (`tcb${sf[NEXT_TEMPLATE_ID]!++}`) as TemplateId;\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}