{"ast":null,"code":"\"use strict\";\n\nvar _objectSpread = require(\"/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@babel/runtime/helpers/objectSpread2\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.runWebpack = void 0;\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nvar architect_1 = require(\"@angular-devkit/architect\");\n\nvar core_1 = require(\"@angular-devkit/core\");\n\nvar rxjs_1 = require(\"rxjs\");\n\nvar operators_1 = require(\"rxjs/operators\");\n\nvar webpack = require(\"webpack\");\n\nvar utils_1 = require(\"../utils\");\n\nfunction runWebpack(config, context) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var createWebpack = function createWebpack(c) {\n    if (options.webpackFactory) {\n      var result = options.webpackFactory(c);\n\n      if (rxjs_1.isObservable(result)) {\n        return result;\n      } else {\n        return rxjs_1.of(result);\n      }\n    } else {\n      return rxjs_1.of(webpack(c));\n    }\n  };\n\n  var log = options.logging || function (stats, config) {\n    return context.logger.info(stats.toString(config.stats));\n  };\n\n  return createWebpack(_objectSpread(_objectSpread({}, config), {}, {\n    watch: false\n  })).pipe(operators_1.switchMap(function (webpackCompiler) {\n    return new rxjs_1.Observable(function (obs) {\n      // Webpack 5 has a compiler level close function\n      // The close function will crash if caching is disabled\n      var compilerClose = webpackCompiler.options.cache !== false ? webpackCompiler.close : undefined;\n\n      var callback = function callback(err, stats) {\n        if (err) {\n          return obs.error(err);\n        }\n\n        if (!stats) {\n          return;\n        } // Log stats.\n\n\n        log(stats, config);\n        obs.next({\n          success: !stats.hasErrors(),\n          webpackStats: stats.toJson(),\n          emittedFiles: utils_1.getEmittedFiles(stats.compilation)\n        });\n\n        if (!config.watch) {\n          if (compilerClose) {\n            compilerClose(function () {\n              return obs.complete();\n            });\n          } else {\n            obs.complete();\n          }\n        }\n      };\n\n      try {\n        if (config.watch) {\n          var watchOptions = config.watchOptions || {};\n          var watching = webpackCompiler.watch(watchOptions, callback); // Teardown logic. Close the watcher when unsubscribed from.\n\n          return function () {\n            watching.close(function () {});\n            compilerClose === null || compilerClose === void 0 ? void 0 : compilerClose(function () {});\n          };\n        } else {\n          webpackCompiler.run(callback);\n        }\n      } catch (err) {\n        if (err) {\n          context.logger.error(\"\\nAn error occurred during the build:\\n\".concat(err && err.stack || err));\n        }\n\n        throw err;\n      }\n    });\n  }));\n}\n\nexports.runWebpack = runWebpack;\nexports.default = architect_1.createBuilder(function (options, context) {\n  var configPath = core_1.resolve(core_1.normalize(context.workspaceRoot), core_1.normalize(options.webpackConfig));\n  return rxjs_1.from(Promise.resolve().then(function () {\n    return require(core_1.getSystemPath(configPath));\n  })).pipe(operators_1.switchMap(function (config) {\n    return runWebpack(config, context);\n  }));\n});","map":{"version":3,"sources":["/Users/abdillahihussein/Documents/GitHub/angularProject/node_modules/@angular-devkit/build-webpack/src/webpack/index.js"],"names":["Object","defineProperty","exports","value","runWebpack","architect_1","require","core_1","rxjs_1","operators_1","webpack","utils_1","config","context","options","createWebpack","c","webpackFactory","result","isObservable","of","log","logging","stats","logger","info","toString","watch","pipe","switchMap","webpackCompiler","Observable","obs","compilerClose","cache","close","undefined","callback","err","error","next","success","hasErrors","webpackStats","toJson","emittedFiles","getEmittedFiles","compilation","complete","watchOptions","watching","run","stack","default","createBuilder","configPath","resolve","normalize","workspaceRoot","webpackConfig","from","Promise","then","getSystemPath"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.runWebpack = void 0;\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst architect_1 = require(\"@angular-devkit/architect\");\nconst core_1 = require(\"@angular-devkit/core\");\nconst rxjs_1 = require(\"rxjs\");\nconst operators_1 = require(\"rxjs/operators\");\nconst webpack = require(\"webpack\");\nconst utils_1 = require(\"../utils\");\nfunction runWebpack(config, context, options = {}) {\n    const createWebpack = (c) => {\n        if (options.webpackFactory) {\n            const result = options.webpackFactory(c);\n            if (rxjs_1.isObservable(result)) {\n                return result;\n            }\n            else {\n                return rxjs_1.of(result);\n            }\n        }\n        else {\n            return rxjs_1.of(webpack(c));\n        }\n    };\n    const log = options.logging\n        || ((stats, config) => context.logger.info(stats.toString(config.stats)));\n    return createWebpack({ ...config, watch: false }).pipe(operators_1.switchMap(webpackCompiler => new rxjs_1.Observable(obs => {\n        // Webpack 5 has a compiler level close function\n        // The close function will crash if caching is disabled\n        const compilerClose = webpackCompiler.options.cache !== false\n            ? webpackCompiler.close\n            : undefined;\n        const callback = (err, stats) => {\n            if (err) {\n                return obs.error(err);\n            }\n            if (!stats) {\n                return;\n            }\n            // Log stats.\n            log(stats, config);\n            obs.next({\n                success: !stats.hasErrors(),\n                webpackStats: stats.toJson(),\n                emittedFiles: utils_1.getEmittedFiles(stats.compilation),\n            });\n            if (!config.watch) {\n                if (compilerClose) {\n                    compilerClose(() => obs.complete());\n                }\n                else {\n                    obs.complete();\n                }\n            }\n        };\n        try {\n            if (config.watch) {\n                const watchOptions = config.watchOptions || {};\n                const watching = webpackCompiler.watch(watchOptions, callback);\n                // Teardown logic. Close the watcher when unsubscribed from.\n                return () => {\n                    watching.close(() => { });\n                    compilerClose === null || compilerClose === void 0 ? void 0 : compilerClose(() => { });\n                };\n            }\n            else {\n                webpackCompiler.run(callback);\n            }\n        }\n        catch (err) {\n            if (err) {\n                context.logger.error(`\\nAn error occurred during the build:\\n${err && err.stack || err}`);\n            }\n            throw err;\n        }\n    })));\n}\nexports.runWebpack = runWebpack;\nexports.default = architect_1.createBuilder((options, context) => {\n    const configPath = core_1.resolve(core_1.normalize(context.workspaceRoot), core_1.normalize(options.webpackConfig));\n    return rxjs_1.from(Promise.resolve().then(() => require(core_1.getSystemPath(configPath)))).pipe(operators_1.switchMap((config) => runWebpack(config, context)));\n});\n"]},"metadata":{},"sourceType":"script"}